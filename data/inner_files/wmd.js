'use strict';var Markdown={};
(function(){function n(p){return p}function D(p){return!1}function z(){}function w(){}z.prototype={chain:function(p,t){var v=this[p];if(!v)throw Error("unknown hook "+p);this[p]=v===n?t:function(p){var k=Array.prototype.slice.call(arguments,0);k[0]=v.apply(null,k);return t.apply(null,k)}},set:function(p,t){if(!this[p])throw Error("unknown hook "+p);this[p]=t},addNoop:function(p){this[p]=n},addFalse:function(p){this[p]=D}};Markdown.HookCollection=z;w.prototype={set:function(p,t){this["s_"+p]=t},get:function(p){return this["s_"+
p]}};Markdown.Converter=function(){function p(a){return a=a.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,M,b,c,d,s){M=M.toLowerCase();J.set(M,h(b));if(d)return c;s&&K.set(M,s.replace(/"/g,"\x26quot;"));return""})}function t(a){a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,n);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,
n);a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,n);a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,n);return a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,n)}function n(a,b){var c;c=b.replace(/^\n+/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(L.push(c)-1)+"K\n\n"}function u(a,b){a=s.preBlockGamut(a,O);a=F(a);a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"\x3chr /\x3e\n");a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,
"\x3chr /\x3e\n");a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"\x3chr /\x3e\n");a=C(a);a=A(a);a=c(a);a=s.postBlockGamut(a,O);a=t(a);return a=f(a,b)}function k(a){a=s.preSpanGamut(a);a=e(a);a=D(a);a=a.replace(/\\(\\)/g,I);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,I);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,q);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
y);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,y);a=l(a);a=a.replace(/~P/g,"://");a=h(a);a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1\x3cstrong\x3e$3\x3c/strong\x3e$4");a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1\x3cem\x3e$3\x3c/em\x3e$4");a=a.replace(/  +\n/g," \x3cbr\x3e\n");return a=s.postSpanGamut(a)}function D(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,
"$1`");return b=m(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function y(a,b,c,d,s,e,h,f){void 0==f&&(f="");a=c.replace(/:\/\//g,"~P");d=d.toLowerCase();if(""==s)if(""==d&&(d=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=J.get(d))s=J.get(d),void 0!=K.get(d)&&(f=K.get(d));else if(-1<b.search(/\(\s*\)$/m))s="";else return b;s=E(s);s=m(s,"*_");b='\x3ca href\x3d"'+s+'"';""!=f&&(f=g(f),f=m(f,"*_"),b+=' title\x3d"'+f+'"');return b+("\x3e"+a+"\x3c/a\x3e")}function g(a){return a.replace(/>/g,"\x26gt;").replace(/</g,
"\x26lt;").replace(/"/g,"\x26quot;")}function q(a,b,c,d,s,e,h,f){a=c;d=d.toLowerCase();f||(f="");if(""==s)if(""==d&&(d=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=J.get(d))s=J.get(d),void 0!=K.get(d)&&(f=K.get(d));else return b;a=m(g(a),"*_[]()");s=m(s,"*_");b='\x3cimg src\x3d"'+s+'" alt\x3d"'+a+'"';f=g(f);f=m(f,"*_");return b=b+(' title\x3d"'+f+'"')+" /\x3e"}function F(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"\x3ch1\x3e"+k(b)+"\x3c/h1\x3e\n\n"});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,
function(a,b){return"\x3ch2\x3e"+k(b)+"\x3c/h2\x3e\n\n"});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return"\x3ch"+a+"\x3e"+k(c)+"\x3c/h"+a+"\x3e\n\n"})}function C(a,b){a+="~0";var c=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;N?a=a.replace(c,function(a,c,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";c=G(c,a,b);c=c.replace(/\s+$/,"");return"\x3c"+a+"\x3e"+c+"\x3c/"+a+"\x3e\n"}):(c=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,
a=a.replace(c,function(a,b,c,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";c=G(c,a);return b+"\x3c"+a+"\x3e\n"+c+"\x3c/"+a+"\x3e\n"}));return a=a.replace(/~0/,"")}function G(a,b,c){N++;a=a.replace(/\n{2,}$/,"\n");b=P[b];var d=!1;a=(a+"~0").replace(RegExp("(^[ \\t]*)("+b+")[ \\t]+([^\\r]+?(\\n+))(?\x3d(~0|\\1("+b+")[ \\t]+))","gm"),function(a,b,s,e){a=e;(b=/\n\n$/.test(a))||-1<a.search(/\n{2,}/)||d?a=u(x(a),!0):(a=C(x(a),!0),a=a.replace(/\n$/,""),c||(a=k(a)));d=b;return"\x3cli\x3e"+a+"\x3c/li\x3e\n"});a=a.replace(/~0/g,
"");N--;return a}function A(a){a=(a+"~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,c,d){a=b(x(c));a=H(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="\x3cpre\x3e\x3ccode\x3e"+a+"\n\x3c/code\x3e\x3c/pre\x3e";return"\n\n"+a+"\n\n"+d});return a=a.replace(/~0/,"")}function a(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(L.push(a)-1)+"K\n\n"}function e(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,c,d,s,e){a=s.replace(/^([ \t]*)/g,
"");a=a.replace(/[ \t]*$/g,"");a=b(a);a=a.replace(/:\/\//g,"~P");return c+"\x3ccode\x3e"+a+"\x3c/code\x3e"})}function b(a){a=a.replace(/&/g,"\x26amp;");a=a.replace(/</g,"\x26lt;");a=a.replace(/>/g,"\x26gt;");return a=m(a,"*_{}[]\\",!1)}function c(b){return b=b.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(b,c){var d;d=c.replace(/^[ \t]*>[ \t]?/gm,"~0");d=d.replace(/~0/g,"");d=d.replace(/^[ \t]+$/gm,"");d=u(d);d=d.replace(/(^|\n)/g,"$1  ");d=d.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,
b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return a("\x3cblockquote\x3e\n"+d+"\n\x3c/blockquote\x3e")})}function f(a,b){a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],s=/~K(\d+)K/,e=c.length,f=0;f<e;f++){var h=c[f];s.test(h)?d.push(h):/\S/.test(h)&&(h=k(h),h=h.replace(/^([ \t]*)/g,"\x3cp\x3e"),h+="\x3c/p\x3e",d.push(h))}if(!b)for(e=d.length,f=0;f<e;f++)for(var m=!0;m;)m=!1,d[f]=d[f].replace(/~K(\d+)K/g,function(a,b){m=!0;return L[b]});return d.join("\n\n")}
function h(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"\x26amp;");return a=a.replace(/<(?![a-z\/?!]|~D)/gi,"\x26lt;")}function d(a,b,c,d){if(b)return a;if(")"!==d.charAt(d.length-1))return"\x3c"+c+d+"\x3e";a=d.match(/[()]/g);for(var s=b=0;s<a.length;s++)"("===a[s]?0>=b?b=1:b++:b--;var e="";0>b&&(d=d.replace(RegExp("\\){1,"+-b+"}$"),function(a){e=a;return""}));e&&(a=d.charAt(d.length-1),Q.test(a)||(e=a+e,d=d.substr(0,d.length-1)));return"\x3c"+c+d+"\x3e"+e}function l(a){a=a.replace(R,d);return a=
a.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(a,b){return'\x3ca href\x3d"'+b+'"\x3e'+s.plainLinkText(b)+"\x3c/a\x3e"})}function r(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function x(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function H(a){if(!/\t/.test(a))return a;var b=["    ","   ","  "," "],c=0,d;return a.replace(/[\n\t]/g,function(a,s){if("\n"===a)return c=s+1,a;d=(s-c)%4;c=s+1;return b[d]})}function E(a){if(!a)return"";
var b=a.length;return a.replace(S,function(c,d){return"~D"==c?"%24":":"!=c||d!=b-1&&!/[0-9\/]/.test(a.charAt(d+1))?"%"+c.charCodeAt(0).toString(16):":"})}function m(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),I)}function I(a,b){return"~E"+b.charCodeAt(0)+"E"}var s=this.hooks=new z;s.addNoop("plainLinkText");s.addNoop("preConversion");s.addNoop("postNormalization");s.addNoop("preBlockGamut");s.addNoop("postBlockGamut");s.addNoop("preSpanGamut");
s.addNoop("postSpanGamut");s.addNoop("postConversion");var J,K,L,N;this.makeHtml=function(a){if(J)throw Error("Recursive call to converter.makeHtml");J=new w;K=new w;L=[];N=0;a=s.preConversion(a);a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=H("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=s.postNormalization(a);a=t(a);a=p(a);a=u(a);a=r(a);a=a.replace(/~D/g,"$$");a=a.replace(/~T/g,"~");a=s.postConversion(a);L=K=J=null;return a};var O=function(a){return u(a)},
P={ol:"\\d+[.]",ul:"[*+-]"},R=/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#/%?=~_|[\]()!:,.;]*[-A-Z0-9+&@#/%=~_|[\])])(?=$|\W)/gi,Q=/[-A-Z0-9+&@#/%=~_|[\])]/i,S=/(?:["'*()[\]:]|~D)/g}})();
(function(){function n(){}function D(a){this.buttonBar=g.getElementById("wmd-button-bar"+a);this.preview=g.getElementById("wmd-preview"+a);this.input=g.getElementById("wmd-input"+a)}function z(a,e){var b=this,c=[],f=0,h="none",d,l,r,x=function(a,b){h!=a&&(h=a,b||E());C.isIE&&"moving"==h?r=null:l=setTimeout(g,1)},g=function(a){r=new w(e,a);l=void 0};this.setCommandMode=function(){h="command";E();l=setTimeout(g,0)};this.canUndo=function(){return 1<f};this.canRedo=function(){return c[f+1]?!0:!1};this.undo=
function(){b.canUndo()&&(d?(d.restore(),d=null):(c[f]=new w(e),c[--f].restore(),a&&a()));h="none";e.input.focus();g()};this.redo=function(){b.canRedo()&&(c[++f].restore(),a&&a());h="none";e.input.focus();g()};var E=function(){var b=r||new w(e);if(!b)return!1;"moving"==h?d||(d=b):(d&&(c[f-1].text!=d.text&&(c[f++]=d),d=null),c[f++]=b,c[f+1]=null,a&&a())},m=function(a){var c=!1;if((a.ctrlKey||a.metaKey)&&!a.altKey)switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "y":b.redo();c=!0;
break;case "z":a.shiftKey?b.redo():b.undo(),c=!0}c&&(a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1))},I=function(a){a.ctrlKey||a.metaKey||(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?x("moving"):8==a||46==a||127==a?x("deleting"):13==a?x("newlines"):27==a?x("escape"):(16>a||20<a)&&91!=a&&x("typing"))};(function(){k.addEvent(e.input,"keypress",function(a){!a.ctrlKey&&!a.metaKey||a.altKey||89!=a.keyCode&&90!=a.keyCode||a.preventDefault()});var a=function(){(C.isIE||
r&&r.text!=e.input.value)&&void 0==l&&(h="paste",E(),g())};k.addEvent(e.input,"keydown",m);k.addEvent(e.input,"keydown",I);k.addEvent(e.input,"mousedown",function(){x("moving")});e.input.onpaste=a;e.input.ondrop=a})();g(!0);E()}function w(a,e){var b=this,c=a.input;this.init=function(){k.isVisible(c)&&(e||!g.activeElement||g.activeElement===c)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=c.scrollTop,!this.text&&c.selectionStart||0===c.selectionStart)&&(this.text=c.value)};this.setInputAreaSelection=
function(){if(k.isVisible(c))if(void 0!==c.selectionStart&&!C.isOpera)c.focus(),c.selectionStart=b.start,c.selectionEnd=b.end,c.scrollTop=b.scrollTop;else if(g.selection&&(!g.activeElement||g.activeElement===c)){c.focus();var a=c.createTextRange();a.moveStart("character",-c.value.length);a.moveEnd("character",-c.value.length);a.moveEnd("character",b.end);a.moveStart("character",b.start);a.select()}};this.setInputAreaSelectionStartEnd=function(){if(!a.ieCachedRange&&(c.selectionStart||0===c.selectionStart))b.start=
c.selectionStart,b.end=c.selectionEnd;else if(g.selection){b.text=k.fixEolChars(c.value);var e=a.ieCachedRange||g.selection.createRange(),h=k.fixEolChars(e.text),d="\u0007"+h+"\u0007";e.text=d;var l=k.fixEolChars(c.value);e.moveStart("character",-d.length);e.text=h;b.start=l.indexOf("\u0007");b.end=l.lastIndexOf("\u0007")-1;if(d=b.text.length-k.fixEolChars(c.value).length){for(e.moveStart("character",-h.length);d--;)h+="\n",b.end+=1;e.text=h}a.ieCachedRange&&(b.scrollTop=a.ieCachedScrollTop);a.ieCachedRange=
null;this.setInputAreaSelection()}};this.restore=function(){void 0!=b.text&&b.text!=c.value&&(c.value=b.text);this.setInputAreaSelection();c.scrollTop=b.scrollTop};this.getChunks=function(){var a=new n;a.before=k.fixEolChars(b.text.substring(0,b.start));a.startTag="";a.selection=k.fixEolChars(b.text.substring(b.start,b.end));a.endTag="";a.after=k.fixEolChars(b.text.substring(b.end));a.scrollTop=b.scrollTop;return a};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;this.start=
a.before.length;this.end=a.before.length+a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()}function p(a,e,b){var c,f,h,d=function(){var a=0;window.innerHeight?a=window.pageYOffset:g.documentElement&&g.documentElement.scrollTop?a=g.documentElement.scrollTop:g.body&&(a=g.body.scrollTop);return a},l=function(){if(e.preview){var b=e.input.value;if(!b||b!=h){h=b;var c=(new Date).getTime(),b=a.makeHtml(b);f=(new Date).getTime()-c;J(b)}}},r=function(){c&&(clearTimeout(c),
c=void 0);var a=0,a=f;3E3<a&&(a=3E3);c=setTimeout(l,a)},x=function(a){return a.scrollHeight<=a.clientHeight?1:a.scrollTop/(a.scrollHeight-a.clientHeight)};this.refresh=function(a){a?(h="",l()):r()};this.processingTime=function(){return f};var H=!0,E=function(a){var b=e.preview,c=b.parentNode,d=b.nextSibling;c.removeChild(b);b.innerHTML=a;d?c.insertBefore(b,d):c.appendChild(b)},m=function(a){e.preview.innerHTML=a},I,s=function(a){if(I)return I(a);try{m(a),I=m}catch(b){I=E,I(a)}},J=function(a){var c=
B.getTop(e.input)-d();e.preview&&(s(a),b());e.preview&&(e.preview.scrollTop=(e.preview.scrollHeight-e.preview.clientHeight)*x(e.preview));if(H)H=!1;else{var h=B.getTop(e.input)-d();C.isIE?setTimeout(function(){window.scrollBy(0,h-c)},0):window.scrollBy(0,h-c)}};(function(a,b){k.addEvent(a,"input",b);a.onpaste=b;a.ondrop=b;k.addEvent(a,"keypress",b);k.addEvent(a,"keydown",b)})(e.input,r);l();e.preview&&(e.preview.scrollTop=0)}function t(a,e,b,c,f,h,d){function l(a){E.focus();if(a.textOp){b&&b.setCommandMode();
var d=new w(e);if(!d)return;var h=d.getChunks(),m=function(){E.focus();h&&d.setChunks(h);d.restore();c.refresh()};a.textOp(h,m)||m()}a.execute&&a.execute(b)}function r(a,b){var c=a.getElementsByTagName("span")[0];b?(c.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){c.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){c.style.backgroundPosition=this.XShift+" 0px"},C.isIE&&(a.onmousedown=function(){g.activeElement&&g.activeElement!==e.input||(e.ieCachedRange=document.selection.createRange(),
e.ieCachedScrollTop=e.input.scrollTop)}),a.isHelp||(a.onclick=function(){if(this.onmouseout)this.onmouseout();l(this);return!1})):(c.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){})}function x(a){"string"===typeof a&&(a=f[a]);return function(){a.apply(f,arguments)}}function H(){b&&(r(m.undo,b.canUndo()),r(m.redo,b.canRedo()))}var E=e.input,m={};(function(){var b=e.buttonBar,c=document.createElement("ul");c.id="wmd-button-row"+a;c.className="wmd-button-row";
var c=b.appendChild(c),l=0,b=function(b,d,e,h){var m=document.createElement("li");m.className="wmd-button";m.style.left=l+"px";l+=25;var f=document.createElement("span");m.id=b+a;m.appendChild(f);m.title=d;m.XShift=e;h&&(m.textOp=h);r(m,!0);c.appendChild(m);return m},f=function(b){var d=document.createElement("li");d.className="wmd-spacer wmd-spacer"+b;d.id="wmd-spacer"+b+a;c.appendChild(d);l+=25};m.bold=b("wmd-bold-button",d("bold"),"0px",x("doBold"));m.italic=b("wmd-italic-button",d("italic"),"-20px",
x("doItalic"));f(1);m.link=b("wmd-link-button",d("link"),"-40px",x(function(a,b){return this.doLinkOrImage(a,b,!1)}));m.quote=b("wmd-quote-button",d("quote"),"-60px",x("doBlockquote"));m.code=b("wmd-code-button",d("code"),"-80px",x("doCode"));m.image=b("wmd-image-button",d("image"),"-100px",x(function(a,b){return this.doLinkOrImage(a,b,!0)}));f(2);m.olist=b("wmd-olist-button",d("olist"),"-120px",x(function(a,b){this.doList(a,b,!0)}));m.ulist=b("wmd-ulist-button",d("ulist"),"-140px",x(function(a,b){this.doList(a,
b,!1)}));m.heading=b("wmd-heading-button",d("heading"),"-160px",x("doHeading"));m.hr=b("wmd-hr-button",d("hr"),"-180px",x("doHorizontalRule"));f(3);m.undo=b("wmd-undo-button",d("undo"),"-200px",null);m.undo.execute=function(a){a&&a.undo()};f=/win/.test(F.platform.toLowerCase())?d("redo"):d("redomac");m.redo=b("wmd-redo-button",f,"-220px",null);m.redo.execute=function(a){a&&a.redo()};h&&(b=document.createElement("li"),f=document.createElement("span"),b.appendChild(f),b.className="wmd-button wmd-help-button",
b.id="wmd-help-button"+a,b.XShift="-240px",b.isHelp=!0,b.style.right="0px",b.title=d("help"),b.onclick=h.handler,r(b,!0),c.appendChild(b),m.help=b);H()})();var I="keydown";C.isOpera&&(I="keypress");k.addEvent(E,I,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":l(m.bold);break;case "i":l(m.italic);break;case "l":l(m.link);break;case "q":l(m.quote);break;case "k":l(m.code);break;case "g":l(m.image);break;case "o":l(m.olist);
break;case "u":l(m.ulist);break;case "h":l(m.heading);break;case "r":l(m.hr);break;case "y":l(m.redo);break;case "z":a.shiftKey?l(m.redo):l(m.undo);break;default:return}a.preventDefault&&a.preventDefault();window.event&&(window.event.returnValue=!1)}});k.addEvent(E,"keyup",function(a){!a.shiftKey||a.ctrlKey||a.metaKey||13!==(a.charCode||a.keyCode)||(a={},a.textOp=x("doAutoindent"),l(a))});C.isIE&&k.addEvent(E,"keydown",function(a){if(27===a.keyCode)return!1});this.setUndoRedoButtonStates=H}function v(a,
e){this.hooks=a;this.getString=e}function u(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,b,c){b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")});b=decodeURIComponent(b);b=encodeURI(b).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g,"%2b")});c&&(c=c.trim?c.trim():c.replace(/^\s*/,"").replace(/\s*$/,""),c=c.replace(/"/g,"quot;").replace(/\(/g,"\x26#40;").replace(/\)/g,"\x26#41;").replace(/</g,"\x26lt;").replace(/>/g,
"\x26gt;"));return c?b+' "'+c+'"':b})}var k={},B={},y={},g=window.document,q=window.RegExp,F=window.navigator,C={isIE:/msie/.test(F.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(F.userAgent.toLowerCase())||/msie 5/.test(F.userAgent.toLowerCase()),isOpera:/opera/.test(F.userAgent.toLowerCase())},G={bold:"Strong \x3cstrong\x3e Ctrl+B",boldexample:"strong text",italic:"Emphasis \x3cem\x3e Ctrl+I",italicexample:"emphasized text",link:"Hyperlink \x3ca\x3e Ctrl+L",linkdescription:"enter link description here",
linkdialog:'\x3cp\x3e\x3cb\x3eInsert Hyperlink\x3c/b\x3e\x3c/p\x3e\x3cp\x3ehttp://example.com/ "optional title"\x3c/p\x3e',quote:"Blockquote \x3cblockquote\x3e Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample \x3cpre\x3e\x3ccode\x3e Ctrl+K",codeexample:"enter code here",image:"Image \x3cimg\x3e Ctrl+G",imagedescription:"enter image description here",imagedialog:'\x3cp\x3e\x3cb\x3eInsert Image\x3c/b\x3e\x3c/p\x3e\x3cp\x3ehttp://example.com/images/diagram.jpg "optional title"\x3cbr\x3e\x3cbr\x3e'+
function(a){return"Need "+a.startAnchor+"free image hosting?"+a.endAnchor}({startAnchor:"\x3ca href\x3d'http://www.google.com/search?q\x3dfree+image+hosting' target\x3d'_blank'\x3e",endAnchor:"\x3c/a\x3e"})+"\x3c/p\x3e",olist:"Numbered List \x3col\x3e Ctrl+O",ulist:"Bulleted List \x3cul\x3e Ctrl+U",litem:"List item",heading:"Heading \x3ch1\x3e/\x3ch2\x3e Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule \x3chr\x3e Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",
help:"Markdown Editing Help"};Markdown.Editor=function(a,e,b){b=b||{};"function"===typeof b.handler&&(b={helpButton:b});b.strings=b.strings||{};b.helpButton&&(b.strings.help=b.strings.help||b.helpButton.title);var c=function(a){return b.strings[a]||G[a]};e=e||"";var f=this.hooks=new Markdown.HookCollection;f.addNoop("onPreviewRefresh");f.addNoop("postBlockquoteCreation");f.addFalse("insertImageDialog");this.getConverter=function(){return a};var h=this,d;this.run=function(){if(!d){d=new D(e);var l=
new v(f,c),r=new p(a,d,function(){f.onPreviewRefresh()}),x,k;/\?noundo/.test(g.location.href)||(x=new z(function(){r.refresh();k&&k.setUndoRedoButtonStates()},d),this.textOperation=function(a){x.setCommandMode();a();h.refreshPreview()});k=new t(e,d,x,r,l,b.helpButton,c);k.setUndoRedoButtonStates();(h.refreshPreview=function(){r.refresh(!0)})()}}};n.prototype.findTags=function(a,e){var b=this,c;a&&(c=k.extendRegExp(a,"","$"),this.before=this.before.replace(c,function(a){b.startTag+=a;return""}),c=
k.extendRegExp(a,"^",""),this.selection=this.selection.replace(c,function(a){b.startTag+=a;return""}));e&&(c=k.extendRegExp(e,"","$"),this.selection=this.selection.replace(c,function(a){b.endTag=a+b.endTag;return""}),c=k.extendRegExp(e,"^",""),this.after=this.after.replace(c,function(a){b.endTag=a+b.endTag;return""}))};n.prototype.trimWhitespace=function(a){var e,b=this;a?a=e="":(a=function(a){b.before+=a;return""},e=function(a){b.after=a+b.after;return""});this.selection=this.selection.replace(/^(\s*)/,
a).replace(/(\s*)$/,e)};n.prototype.skipLines=function(a,e,b){void 0===a&&(a=1);void 0===e&&(e=1);a++;e++;var c,f;navigator.userAgent.match(/Chrome/)&&"X".match(/()./);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=q.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag+=q.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=q.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=q.$1;if(this.before){for(c=f="";a--;)c+="\\n?",f+="\n";b&&(c="\\n*");
this.before=this.before.replace(new q(c+"$",""),f)}if(this.after){for(c=f="";e--;)c+="\\n?",f+="\n";b&&(c="\\n*");this.after=this.after.replace(new q(c,""),f)}};k.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");if(a.currentStyle)return"none"!==a.currentStyle.display};k.addEvent=function(a,e,b){a.attachEvent?a.attachEvent("on"+e,b):a.addEventListener(e,b,!1)};k.removeEvent=function(a,e,b){a.detachEvent?a.detachEvent("on"+e,
b):a.removeEventListener(e,b,!1)};k.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};k.extendRegExp=function(a,e,b){if(null===e||void 0===e)e="";if(null===b||void 0===b)b="";a=a.toString();var c;a=a.replace(/\/([gim]*)$/,function(a,b){c=b;return""});a=a.replace(/(^\/|\/$)/g,"");return new q(e+a+b,c)};B.getTop=function(a,e){var b=a.offsetTop;if(!e)for(;a=a.offsetParent;)b+=a.offsetTop;return b};B.getHeight=function(a){return a.offsetHeight||a.scrollHeight};B.getWidth=
function(a){return a.offsetWidth||a.scrollWidth};B.getPageSize=function(){var a,e,b,c;self.innerHeight&&self.scrollMaxY?(a=g.body.scrollWidth,e=self.innerHeight+self.scrollMaxY):g.body.scrollHeight>g.body.offsetHeight?(a=g.body.scrollWidth,e=g.body.scrollHeight):(a=g.body.offsetWidth,e=g.body.offsetHeight);self.innerHeight?(b=self.innerWidth,c=self.innerHeight):g.documentElement&&g.documentElement.clientHeight?(b=g.documentElement.clientWidth,c=g.documentElement.clientHeight):g.body&&(b=g.body.clientWidth,
c=g.body.clientHeight);a=Math.max(a,b);e=Math.max(e,c);return[a,e,b,c]};y.createBackground=function(){var a=g.createElement("div"),e=a.style;a.className="wmd-prompt-background";e.position="absolute";e.top="0";e.zIndex="1000";C.isIE?e.filter="alpha(opacity\x3d50)":e.opacity="0.5";var b=B.getPageSize();e.height=b[1]+"px";C.isIE?(e.left=g.documentElement.scrollLeft,e.width=g.documentElement.clientWidth):(e.left="0",e.width="100%");g.body.appendChild(a);return a};y.prompt=function(a,e,b){var c,f;void 0===
e&&(e="");var h=function(a){if(27===(a.charCode||a.keyCode))return a.stopPropagation&&a.stopPropagation(),d(!0),!1},d=function(a){k.removeEvent(g.body,"keyup",h);var d=f.value;a?d=null:(d=d.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(d)||(d="http://"+d));c.parentNode.removeChild(c);b(d);return!1},l=function(){c=g.createElement("div");c.className="wmd-prompt-dialog";c.style.padding="10px;";c.style.position="fixed";c.style.width="400px";c.style.zIndex="1001";var b=g.createElement("div");
b.innerHTML=a;b.style.padding="5px";c.appendChild(b);var b=g.createElement("form"),l=b.style;b.onsubmit=function(){return d(!1)};l.padding="0";l.margin="0";l.cssFloat="left";l.width="100%";l.textAlign="center";l.position="relative";c.appendChild(b);f=g.createElement("input");f.type="text";f.value=e;l=f.style;l.display="block";l.width="80%";l.marginLeft=l.marginRight="auto";b.appendChild(f);var H=g.createElement("input");H.type="button";H.onclick=function(){return d(!1)};H.value="OK";l=H.style;l.margin=
"10px";l.display="inline";l.width="7em";var E=g.createElement("input");E.type="button";E.onclick=function(){return d(!0)};E.value="Cancel";l=E.style;l.margin="10px";l.display="inline";l.width="7em";b.appendChild(H);b.appendChild(E);k.addEvent(g.body,"keyup",h);c.style.top="50%";c.style.left="50%";c.style.display="block";C.isIE_5or6&&(c.style.position="absolute",c.style.top=g.documentElement.scrollTop+200+"px",c.style.left="50%");g.body.appendChild(c);c.style.marginTop=-(B.getHeight(c)/2)+"px";c.style.marginLeft=
-(B.getWidth(c)/2)+"px"};setTimeout(function(){l();var a=e.length;if(void 0!==f.selectionStart)f.selectionStart=0,f.selectionEnd=a;else if(f.createTextRange){var b=f.createTextRange();b.collapse(!1);b.moveStart("character",-a);b.moveEnd("character",a);b.select()}f.focus()},0)};var A=v.prototype;A.prefixes="(?:\\s{4,}|\\s*\x3e|\\s*-\\s+|\\s*\\d+\\.|\x3d|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";A.unwrap=function(a){var e=new q("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(e,
"$1 $2")};A.wrap=function(a,e){this.unwrap(a);var b=new q("(.{1,"+e+"})( +|$\\n?)","gm"),c=this;a.selection=a.selection.replace(b,function(a,b){return(new q("^"+c.prefixes,"")).test(a)?a:b+"\n"});a.selection=a.selection.replace(/\s+$/,"")};A.doBold=function(a,e){return this.doBorI(a,e,2,this.getString("boldexample"))};A.doItalic=function(a,e){return this.doBorI(a,e,1,this.getString("italicexample"))};A.doBorI=function(a,e,b,c){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");var f=
/(\**$)/.exec(a.before)[0];e=/(^\**)/.exec(a.after)[0];f=Math.min(f.length,e.length);f>=b&&(2!=f||1!=b)?(a.before=a.before.replace(q("[*]{"+b+"}$",""),""),a.after=a.after.replace(q("^[*]{"+b+"}",""),"")):!a.selection&&e?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+e+q.$1):(a.selection||e||(a.selection=c),b=1>=b?"*":"**",a.before+=b,a.after=b+a.after)};A.stripLinkDefs=function(a,e){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,
function(a,c,f,h,d){e[c]=a.replace(/\s*$/,"");return h?(e[c]=a.replace(/["(](.+?)[")]$/,""),h+d):""})};A.addLinkDef=function(a,e){var b=0,c={};a.before=this.stripLinkDefs(a.before,c);a.selection=this.stripLinkDefs(a.selection,c);a.after=this.stripLinkDefs(a.after,c);var f="",h=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,d=function(a){b++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+b+"]:");f+="\n"+a},l=function(a,e,f,m,r,s){f=f.replace(h,l);return c[r]?(d(c[r]),e+f+m+b+s):a};a.before=
a.before.replace(h,l);e?d(e):a.selection=a.selection.replace(h,l);var r=b;a.after=a.after.replace(h,l);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+f;return r};A.doLinkOrImage=function(a,e,b){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var c;if(1<a.endTag.length&&0<a.startTag.length)a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null);else if(a.selection=a.startTag+a.selection+
a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))this.addLinkDef(a,null);else{var f=this,h=function(d){c.parentNode.removeChild(c);null!==d&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),d=" [999]: "+u(d),d=f.addLinkDef(a,d),a.startTag=b?"![":"[",a.endTag="]["+d+"]",a.selection||(a.selection=b?f.getString("imagedescription"):f.getString("linkdescription")));e()};c=y.createBackground();b?this.hooks.insertImageDialog(h)||y.prompt(this.getString("imagedialog"),
"http://",h):y.prompt(this.getString("linkdialog"),"http://",h);return!0}};A.doAutoindent=function(a,e){var b=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");a.selection||/^[ \t]*(?:\n|$)/.test(a.after)||(a.after=a.after.replace(/^[^\n]*/,function(b){a.selection=b;return""}),b=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&this.doList&&this.doList(a);
/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&this.doBlockquote&&this.doBlockquote(a);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&this.doCode&&this.doCode(a);b&&(a.after=a.selection+a.after,a.selection="")};A.doBlockquote=function(a,e){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,c,d,e){a.before+=c;a.after=e+a.after;return d});a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){a.selection=c+a.selection;return""});a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||
this.getString("quoteexample");var b="",c="",f;if(a.before){for(var h=a.before.replace(/\n$/,"").split("\n"),d=!1,l=0;l<h.length;l++){var r=!1;f=h[l];d=d&&0<f.length;/^>/.test(f)?(r=!0,!d&&1<f.length&&(d=!0)):r=/^[ \t]*$/.test(f)?!0:d;r?b+=f+"\n":(c+=b+f,b="\n")}/(^|\n)>/.test(b)||(c+=b,b="")}a.startTag=b;a.before=c;a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){a.endTag=b;return""});b=function(b){var c=b?"\x3e ":
"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}));a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,70),a.selection=a.selection.replace(/^/gm,"\x3e "),b(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),b(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&
(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n")));a.selection=this.hooks.postBlockquoteCreation(a.selection);/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){a.startTag+=c;return""}))};A.doCode=function(a,e){var b=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){a.selection=b+a.selection;
return""});var c=b=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(b=0);/^\n(\t|[ ]{4,})/.test(a.after)&&(c=0);a.skipLines(b,c);a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(a.startTag="    ",a.selection=this.getString("codeexample"))}else a.trimWhitespace(),a.findTags(/`/,/`/),a.startTag||a.endTag?a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):
a.startTag=a.endTag="":(a.startTag=a.endTag="`",a.selection||(a.selection=this.getString("codeexample")))};A.doList=function(a,e,b){e=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var c="-",f=1,h=function(){var a;b?(a=" "+f+". ",f++):a=" "+c+" ";return a},d=function(a){void 0===b&&(b=/^\s*\d/.test(a));return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(a){return h()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);!a.before||/\n$/.test(a.before)||
/^\n/.test(a.startTag)||(a.before+=a.startTag,a.startTag="");if(a.startTag){var l=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(a);a.skipLines();l&&(a.after=a.after.replace(e,d));if(b==l)return}var r=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(a){/^\s*([*+-])/.test(a)&&(c=q.$1);r=/[^\n]\n\n[^\n]/.test(a)?1:0;return d(a)});a.selection||(a.selection=
this.getString("litem"));var l=h(),g=1;a.after=a.after.replace(e,function(a){g=/[^\n]\n\n[^\n]/.test(a)?1:0;return d(a)});a.trimWhitespace(!0);a.skipLines(r,g,!0);a.startTag=l;e=l.replace(/./g," ");this.wrap(a,72-e.length);a.selection=a.selection.replace(/\n/g,"\n"+e)};A.doHeading=function(a,e){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var b=0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&(b=q.lastMatch.length);a.startTag=
a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(b=1);/-+/.test(a.endTag)&&(b=2);a.startTag=a.endTag="";a.skipLines(1,1);b=0==b?2:b-1;if(0<b){var b=2<=b?"-":"\x3d",c=a.selection.length;72<c&&(c=72);for(a.endTag="\n";c--;)a.endTag+=b}}else a.startTag="## ",a.selection=this.getString("headingexample"),a.endTag=" ##"};A.doHorizontalRule=function(a,e){a.startTag="----------\n";a.selection="";a.skipLines(2,1,!0)}})();
(function(){function n(){for(var a=0;a<A.length;a++)A[a].refreshPreview()}function D(a){var b=a.match(/^\s*>\s*!/mg);if(b&&b.length==a.split("\n").length){var c=!1;a=a.replace(/(.*) (\w)/,function(a,b,d){c=!0;return b+"\n\x3e "+d});c||(a=a.replace(/^(\s*>\s*)!/m,"$1\x26#33;"))}return a}function z(a){var b=/^\s*?[^\s!]/m,c=/^\s*?!/gm;return a=a.replace(/\<blockquote\>[\n\s]*?\<p\>[\n\s]*?(![\s\S]*?)\<\/p\>[\n\s]*?\<\/blockquote\>/g,function(a,d,e,h){if(b.test(d))return a;a=a.replace(d,d.replace(c,
""));return a=a.replace("\x3cblockquote\x3e",'\x3cblockquote class\x3d"spoiler"\x3e')})}function w(a){if(!window.tagRendererRaw)return a;var b,c;return a=a.replace(StackExchange.options.site.nonAsciiTags?/\[(meta-)?tag:([a-z0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF#+.-]+)\]/gi:/\[(meta-)?tag:([a-z0-9#+.-]+)\]/gi,function(d,e,h,l){if(!G&&e)return d;if(!b){for(var f=a,r=[],g=/<(a|code)[^>]*>/ig,k;null!=(k=g.exec(f));){r.push(k.index);k=RegExp("\x3c/"+k[1]+"\x3e","ig");k.lastIndex=g.lastIndex;if(null==
k.exec(f))break;r.push(k.lastIndex);g.lastIndex=k.lastIndex}b=r;c=b.length}f=!1;for(r=0;r<c&&!(b[r]>l);r++)f=!f;if(f)return d;d=null;G&&!e&&(d=C);return tagRendererRaw(sanitizeAndSplitTags(h)[0],d)})}function p(a){var c,d;"undefined"==typeof b&&(b=StackExchange.options.styleCode);b&&(c=k(a),d=k(c+a),a=y(a,c,d));a=t(a);b&&(a=g(a,c,d));return a}function t(a){return a.replace(/<[^>]*>?/gi,v)}function v(a){return a.match(c)||a.match(f)||a.match(h)?a:""}function u(a){if(""==a)return"";var b=/<\/?\w+[^>]*(\s|$|>)/g,
c=a.toLowerCase().match(b),d=(c||[]).length;if(0==d)return a;for(var e,h,l,f=[],r=[],g=!1,k=0;k<d;k++)if(e=c[k].replace(/<\/?(\w+).*/,"$1"),!(f[k]||-1<"\x3cp\x3e\x3cimg\x3e\x3cbr\x3e\x3cli\x3e\x3chr\x3e".search("\x3c"+e+"\x3e"))){h=c[k];l=-1;if(!/^<\//.test(h))for(h=k+1;h<d;h++)if(!f[h]&&c[h]=="\x3c/"+e+"\x3e"){l=h;break}-1==l?g=r[k]=!0:f[l]=!0}if(!g)return a;k=0;return a=a.replace(b,function(a){a=r[k]?"":a;k++;return a})}function k(a){a=(a.match(/~/g)||[]).length;return Array(a+2).join("~")}function B(a){if(/^lang-/.test(a))return a;
var b="c_"+a,c=d[b];if(c)return c;if(l[b])return null;l[b]=!0;b=r.length;0<b&&RegExp("^"+r[b-1]).test(a)?r[b-1]=a:r.push(a);x.trigger();return null}function y(a,b,c){a=a.replace(H,function(a,c,d){return b+c+b+d});return a.replace(E,function(a,b){return c+b+c})}function g(a,b,c){a=a.replace(RegExp(b+"([a-z0-9#+.-]+)"+b+"(\\s*?\x3cpre)","gi"),function(a,b,c){return(a=B(b))?c+" class\x3d'"+a+" prettyprint-override'":c});var d;return a.replace(RegExp("("+c+"([a-z0-9#+.-]+)"+c+")|(\x3cpre\x3e\x3ccode\x3e)",
"gi"),function(a,b,c,e){return b?(d=c,""):d?(b=B(d))?"\x3cpre class\x3d'"+b+" prettyprint-override'\x3e\x3ccode\x3e":a:a})}function q(a){function b(){e.animate({height:h.height()-l})}function c(a){if(h)a();else if(!k){k=!0;var d=x.offset();l=d.top-$("#wmd-button-row"+g).offset().top-$("#wmd-button-row"+g).outerHeight()-5;f=$("#wmd-help-button"+g);var m=f.offset().left+f.outerWidth(),d=d.left,s=x.outerWidth()+d,s=Math.max(m,s);r={right:m-s,width:s-d,top:$("#wmd-button-row"+g).outerHeight()+5};f.addClass("active-help");
e=$("\x3cdiv style\x3d'clear:both' /\x3e").insertBefore(x);h=$('\x3cdiv id\x3d"mdhelp'+g+'" class\x3d"mdhelp"\x3e\x3cul id\x3d"mdhelp-tabs'+g+'" class\x3d"mdhelp-tabs"\x3e\x3cli /\x3e\x3c/ul\x3e\x3c/div\x3e').find("li").addSpinner().end().css(r).insertAfter(f);b();$.get("/posts/markdown-help",{postfix:g}).done(function(c){h.remove();h=$(c).insertAfter(f).css(r);$("#mdhelp-tabs"+g).delegate("li:not(:last-child)","click",function(a){a=$(this).hasClass("selected");h.find(".mdhelp-tab").hide();$("#mdhelp-tabs"+
g+" li").removeClass("selected");if(!a&&($("#"+$(this).attr("data-tab")).show(),$(this).addClass("selected"),a=$(this).attr("data-buttons"))){a=a.split(",");for(var c=0;c<a.length;c++){var d=$("#wmd-"+a[c]+"-button"+g);d.is(":animated")||d.animate({top:-15},400).animate({top:0},400).animate({top:-8},300).animate({top:0},300).animate({top:-4},200).animate({top:0},200).animate({top:-2},100).animate({top:0},100).animate({top:-1},50).animate({top:0},50)}}b()});k=!1;a()})}}function d(){q=!0;c(function(){f.addClass("active-help");
h.show();b()})}var e,h,l,f,r,k=!1,g=(a||{}).postfix||"",x=$("#wmd-input"+g),q=!1;this.toggle=function(){h&&h.is(":visible")?(h.hide(),e.animate({height:0}),f.removeClass("active-help")):d()};this.showOnce=function(){q||d()}}function F(a){function b(a){return"facebook.stackoverflow.com"===a?"stackoverflow.com":a}function c(b){window.apiCallbacks[b]||(window.apiCallbacks[b]=function(c){if(c)if(c.error_message)/^No site found/.test(c.error_message)&&(x["s_"+b]=!0);else if(c.items){c=c.items;for(var d=
c.length,e=0;e<d;e++){var h=c[e];f[b+"|"+h.question_id]=h.title}a&&a()}});return'apiCallbacks["'+b+'"]'}function d(a,c){if(b(a)===l)return!0;var e=q[a];e||(e=q[a]={count:0,ids:{}});if(e.ids[c])return!0;if(e.count>=p)return!1;e.count++;return e.ids[c]=!0}var e=/<a href="((\S+)\/q(?:uestions)?\/(\d+)(?:|\/\S*?))">\1<\/a>/g,h=window.location.hostname.toLowerCase(),l=b(h),f={},r={},g={},k=StackExchange.helpers.DelayedReaction(function(){var a=!1,d;for(d in g)if(g.hasOwnProperty(d)){var e=c(d),h;30<g[d].length?
h=g[d].splice(0,30).join(";"):(h=g[d].join(";"),delete g[d]);a=!0;$.ajax({url:"http://api.stackexchange.com/2.0/questions/"+h+"?pagesize\x3d30\x26key\x3d6AU78DZ)GcdjNjAszYmTLQ((\x26filter\x3d!6G7RPxWUNTleV\x26site\x3d"+b(d),crossDomain:!0,jsonpCallback:e,dataType:"jsonp"});break}a&&k.trigger()},1E3,{sliding:!0}),x={};window.apiCallbacks={};var q={},p=/^meta\./.test(l)?40:10;return function(a){q={};return a.replace(e,function(a,c,e,h){e=e.toLowerCase().replace(/^http:\/\//,"");if(/[^a-z0-9.]/.test(e)||
!d(e,h))return a;var m=f[e+"|"+h];if(m)h=m;else{if(m=!r[e+"|"+h]){m=b(e);if(m===l)m=!1;else if(x["s_"+m])m=!0;else var s=/^meta\./.test(l),m=l==="meta."+m||!s&&"meta."+l===m||s&&m===StackExchange.options.networkMetaHostname||l===StackExchange.options.networkMetaHostname?!1:!0;m=!m}m&&(r[e+"|"+h]=!0,(m=g[e])||(m=g[e]=[]),m.push(h),k.trigger());h=null}return h?'\x3ca href\x3d"'+c+'"\x3e'+h+"\x3c/a\x3e":a})}}if(!StackExchange.MarkdownEditor){var C,G,A=[],a=F(n),e=$.Callbacks();StackExchange.MarkdownEditor=
function(b){var c=b.postfix||"";(G=StackExchange.options.site.isMetaSite)&&(C=StackExchange.options.site.parentUrl||"//www.stackoverflow.com");var d=new Markdown.Converter,h=d.hooks;h.addNoop("preSafe");h.chain("postConversion",a);h.chain("postConversion",function(a){return h.preSafe(a)});h.chain("postConversion",p);h.chain("postConversion",u);h.chain("postConversion",z);h.chain("postConversion",w);var l=new q({postfix:c}),f={helpButton:{handler:l.toggle}};b.noCode&&(f.strings={code:"Preformatted text \x3cpre\x3e\x3ccode\x3e Ctrl-K",
codeexample:"enter preformatted text here"});d=new Markdown.Editor(d,c,f);d.hooks.chain("postBlockquoteCreation",D);StackExchange.options.disableImageUploads||d.hooks.set("insertImageDialog",StackExchange.imageUploader.uploadImageDialog);e.fire(d,b.postfix);var g=$("#wmd-preview"+c);d.hooks.chain("onPreviewRefresh",function(){g.trigger("wmdrefresh")});A.push(d);d.run();if(b.immediatelyShowMarkdownHelp)l.showOnce(b);else if(b.autoShowMarkdownHelp)$("#wmd-input"+c).one("focus",function(){l.showOnce(b)});
d.disableSubmission=function(){$("#submit-button"+c).attr("disabled","disabled");StackExchange.navPrevention.stop()};return d};StackExchange.MarkdownEditor.creationCallbacks=e;StackExchange.MarkdownEditor.refreshAllPreviews=n;var b;StackExchange.MarkdownEditor.sanitizeHtml=t;var c=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,f=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,
h=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;StackExchange.MarkdownEditor.balanceTags=u;var d={},l={},r=[],x=StackExchange.helpers.DelayedReaction(function(){0!=r.length&&($.ajax("/api/tags/"+encodeURIComponent(r.join(";"))+"/syntax-highlight",{cache:!0}).done(function(a){var b=!1,c;for(c in a)a.hasOwnProperty(c)&&(d["c_"+c]=a[c],b=!0);b&&(StackExchange.MarkdownEditor.refreshAllPreviews(),
styleCode())}),r=[])},2E3,{sliding:!0}),H=/\x3c!-- language: ([a-z0-9#+\-.]+) --\x3e(\s*?<pre>\s*?<code>)/gi,E=/\x3c!-- language-all: ([a-z0-9#+\-.]+) --\x3e/gi}})();
StackExchange.editor=function(){var n=function(n){n=n||{};var z=n.postfix||"",w=n.heartbeatType,p=n.bindNavPrevention,t=$("#post-form"+z),v=$("#wmd-input"+z),u;u=$("#title, #edit-comment, #m-address, .edit-comment");z=u.add(".tag-editor input");t.submit(function(){u.each(function(){StackExchange.helpers.hideHelpOverlay($(this))});StackExchange.helpers.disableSubmitButton(t);StackExchange.navPrevention.stop();return!0});$(".original-question").not(".processed").TextAreaResizer();v.not(".processed").TextAreaResizer();
v.typeWatch({highlight:!1,wait:5E3,captureLength:5,callback:styleCode});var k=new StackExchange.MarkdownEditor(n);if(w){var B=n.discardSelector?$(n.discardSelector):null;StackExchange.cardiologist.addHeart(w,v,k,B,n.postId)}if("ask"==w||"answer"==w){var y=v.add(z),g=function(){StackExchange.helpers.loadTicks(t);y.unbind("keydown",g);return!0};y.bind("keydown",g)}p&&(p="edit"==w||"ask"==w?v.add("#title").add("#tagnames"):v,StackExchange.navPrevention.init(p));t.find(".wmd-preview").click(function(g){2!=
g.which&&$(this).siblings().find("textarea").focus()});StackExchange.helpers.bindHelpOverlayEvents(u);0==$("#ask-page-has-errors").length&&$("#title").is("input")&&$("#title").focus();if(n.oncreated)n.oncreated(k);if(n.discardSelector&&("ask"==w||"answer"==w||"moderatormessage"==w)){var q=$(n.discardSelector);q.click(function(g){g.preventDefault();if(confirm("Are you sure you want to discard your draft?"))return $("#title").val("").blur(),$("#question-suggestions").empty(),$("#wmd-input-42").val(""),
$("#wmd-preview-42").html(""),$("#answer-from-ask").is(":visible")&&$("#answer-from-ask").is(":checked")&&$("#answer-from-ask").click(),g=$("#tagnames"),0<g.length&&g[0].func_clear&&(g[0].func_clear(),g.blur()),v.val("").blur(),k.refreshPreview(),$.post("/post/discard-draft",{fkey:StackExchange.options.user.fkey,postType:w},function(){$("#draft-saved").hide();$("#draft-discarded").show();var g=null,g=function(){$("#draft-discarded").hide();$("#title").unbind("keypress",g);v.unbind("keypress",g)};
$("#title").bind("keypress",g);v.bind("keypress",g)}),q.hide(),!1})}};return{init:n,initIfShown:function(D){var z=(D||{}).postfix||"";0==$("#wmd-preview"+z).length||"-42"===z&&0!==$("#answer-from-ask").length||0!==$("#show-editor-button"+z).length?StackExchange.editor.finallyInit=function(){n(D)}:(n(D),StackExchange.editor.finallyInit||(StackExchange.editor.finallyInit=function(){}))}}}();
StackExchange.cardiologist=function(){function n(a){a="number"===typeof a?a:1E3*(B+y);F&&(a=Math.max(a,6E3-((new Date).getTime()-F)));C&&clearTimeout(C);C=setTimeout(D,a)}function D(){C=null;if(!v.length){var a;v=[];t&&!t.isDisabled&&30>t.beatCount&&v.push(t);for(var e=0;e<p.length;e++)a=p[e],a!=t&&!a.isDisabled&&30>a.beatCount&&v.push(a);B=Math.max(15,Math.min(45,60/(v.length||1)))}v.length?(a=v.shift(),a.checkActive()?a.beat():n()):n()}function z(){}function w(a){var e=[];$.get("/questions/"+a,
function(b){b=$(b);b.find("div.answer").each(function(){var a=this.id.substring(7);0==$("#answer-"+a).length&&e.push(this.id)});if(0<e.length){var c="#"+e.join(",#");b=b.find(c);c=$("div.answer:last");0==c.length&&(c=$("#answers-header"));b.hide();c.after(b);b.fadeIn("slow");c=$("div.answer").length;$(".subheader h2").text(c+" Answer"+(1<c?"s":""));StackExchange.vote.init(a);StackExchange.comments.init({post:b})}StackExchange.notify.close(q);g=!1},"html")}var p=[],t,v=[],u,k,B=45,y=0,g=!1,q=-2,F,
C,G={ask:function(a){if(a.relatedQuestions){var e=$("#how-to-format"),b=a.relatedQuestions!=k;b&&e.hide();e.empty().append("\x3ch4\x3eSimilar Questions\x3c/h4\x3e"+a.relatedQuestions);b&&showFadingHelpText(e);k=a.relatedQuestions}a.suggestedTags&&StackExchange.tagSuggestions&&StackExchange.tagSuggestions.suggest(a.suggestedTags)},answer:function(a,e){if(a&&!g)if(a.disableEditor){var b=function(a){return"This question has been "+a.message+" - no more answers will be accepted."}({message:a.message});
StackExchange.notify.show(b,q);g=!0}else b=parseInt(a.message),0<b&&(b=function(a){return 1==a.count?a.count+" new answer has been posted - "+a.startAnchor+"load new answers."+a.endAnchor:a.count+" new answers have been posted - "+a.startAnchor+"load new answers."+a.endAnchor}({count:b,startAnchor:'\x3ca id\x3d"load-new-answers"\x3e',endAnchor:"\x3c/a\x3e"}),StackExchange.notify.show(b,q),g=!0,$("#load-new-answers").click(function(){w(e.postId)}))},edit:function(a){a&&a.message&&StackExchange.notify.getMessageText(q)!=
$("\x3cspan /\x3e").html(a.message).text()&&(StackExchange.notify.close(q),StackExchange.notify.show(a.message,q))},moderatormessage:function(a){}};z.prototype={activate:function(){t=this;this.isActive||(this.isActive=!0,this.beatCount=0,p.push(this),1===p.length&&n())},checkActive:function(){return!this.isActive||this.isDisabled?!1:this.jTextarea.closest("body").length?!0:(delete this.jTextarea,this.isDisabled=!0,!1)},beat:function(a){var e=this,b={type:"POST",url:"/posts/"+this.postId+"/editor-heartbeat/"+
this.type,dataType:"json",data:{}};a||(b.success=function(a){e.success(a)},b.error=function(){e.error()},b.complete=function(){e.complete()});if(this.shouldSendDraft()){var c={text:this.jTextarea.val()};"ask"===this.type&&(c.title=$("#title").val(),c.tagnames=$("#tagnames").val(),c.answertext=$("#wmd-input-42").val());u&&u.heart===this&&u.title===c.title&&u.tagnames===c.tagnames&&u.text===c.text&&u.answertext===c.answertext||(b.data=c,u={heart:this,title:c.title,tagnames:c.tagnames,text:c.text,answertext:c.answertext})}if(a&&
!("text"in b.data))return $.Deferred().resolve().promise();this.revisionGuid&&(b.data.clientRevisionGuid=this.revisionGuid);"answer"===this.type&&(a=$("#answers-header .answers-subheader h2").text().replace(/ answers?/i,"")||"0",b.data.clientCount=a);F=(new Date).getTime();return $.ajax(b).promise()},shouldSendDraft:function(){return"edit"!==this.type&&t===this},success:function(a){G[this.type](a,this);a.disableEditor&&(this.editor.disableSubmission(),this.isDisabled=!0);a.draftSaved&&A(this.jTextarea,
this.discardDraftLink);this.beatCount++;y=0},error:function(){$("#draft-saved").hide();t===this&&v.unshift(this);y=(new Date).getTime()%100/10},complete:function(){n()}};var A=function(a,e){var b=$("#draft-saved"),c=function(){b.text("draft saved").fadeIn("fast")};b.is(":visible")?b.fadeOut("fast",c):c();e&&e.removeClass("dno").show();var f=function(b){if(115!=b.which||!b.ctrlKey||b.shiftKey||b.altKey)a.unbind("keypress",f),$("#draft-saved").fadeOut("fast")};a.bind("keypress",f);$("#draft-discarded").hide()};
return{addHeart:function(a,e,b,c,f){var h=new z,d;h.type=a;h.jTextarea=e;h.discardDraftLink=c;switch(a){case "ask":d=0;break;case "answer":d=$("#post-id").val()||location.href.match(/\/questions\/(\d+)/i)[1];break;case "edit":d=f||$("#post-id").val()||e.closest(".question, .answer").find(".vote input").val();a=e.closest(".inline-post");c=null;0<a.length&&(c=a[0].action.split("/").pop());c||(c=$("#client-revision-guid").val());h.revisionGuid=c;break;case "moderatormessage":d=+$("#moderator-message-to-user").attr("data-userid")}h.postId=
d;h.editor=b;e.keypress(function(){h.activate()})},ensureDraftSaved:function(a,e){t&&t.checkActive()?t.beat(e).done(a):a()},beatASAP:function(){n(1)},notifiedOfNewAnswer:function(){g=!0},isHeartBeating:function(){if(null==p)return!1;for(var a=0;a<p.length;a++)if(!0==p[a].checkActive())return!0;return!1}}}();
StackExchange.navPrevention=function(){var n,D,z=function(){var p=!1;n.each(function(n){p=p||$(this).val()!==D[n]});return p},w=function(p){window.onbeforeunload=p?function(){if(n&&z())return p}:null},p=function(n){w("You have started writing or editing a post.")};return{init:function(t){n=t.one("keypress",p);D=[];t.each(function(){D.push($(this).val())})},start:function(){n&&p()},stop:function(){n&&(n.unbind("keypress",p),w(null),n=null)},confirm:function(p){return n&&z()?confirm(p):!0}}}();
(function(n){function D(k){p=n(k.data.el);p.blur();v=k.clientY+document.documentElement.scrollTop;t=p.height()-v;p.css("opacity",0.25);n(document).mousemove(z).mouseup(w);return!1}function z(k){var n=k.clientY+document.documentElement.scrollTop,y=t+n;v>=n&&(y-=5);v=n;y=Math.max(u,y);p.height(y+"px");y<u&&w(k);return!1}function w(k){n(document).unbind("mousemove",z).unbind("mouseup",w);p.css("opacity",1);p.focus();t=p=null;v=0}var p,t,v=0,u=32;n.fn.TextAreaResizer=function(){return this.each(function(){p=
n(this).addClass("processed");t=null;n(this).parent().append(n('\x3cdiv class\x3d"grippie"\x3e\x3c/div\x3e').bind("mousedown",{el:this},D));var k=n("div.grippie",n(this).parent())[0];k.style.marginRight=k.offsetWidth-n(this)[0].offsetWidth+"px"})}})(jQuery);"use strict";
StackExchange.imageUploader=function(){var n={};return{uploadImageDialog:function(D,z){var w="upload-iframe-"+(new Date).getTime();"undefined"===typeof z&&(z="/upload/image");var p=window.FileReader&&window.FormData,t=p&&"ondrop"in window,v=p&&"onpaste"in document.body&&window.Clipboard,p="/render/image-upload?uploadUrl\x3d{0}\x26canDragDrop\x3d{1}\x26canPaste\x3d{2}".formatUnicorn(encodeURIComponent(z),t?"true":"false",v?"true":"false"),u=$('\x3cdiv class\x3d"popup" id\x3d"image-upload" style\x3d"z-index:1010; width: 420px;" tabindex\x3d"-1"\x3e\x3c/div\x3e').addClass("async-load").data("load-url",
p),k,B,y,g=function(a){if(27===(a.charCode||a.keyCode))return q(null),!1},q=function(a){u&&u.fadeOutAndRemove();$("body").unbind("keyup",g);$("body").unbind("paste");void 0!==a&&D(a);B&&B.fadeOutAndRemove();return!1},F=function(a){q();B=$('\x3cdiv class\x3d"popup" id\x3d"image-upload" style\x3d"z-index:1010;"\x3e\x3c/div\x3e').addClass("async-load").data("load-url","/render/image-upload/preview");B.appendTo("#header").center().fadeIn("fast");$("body").bind("keyup",g);B.asyncLoad({callback:function(){B.find("#image-preview").attr("src",
a);d(B);StackExchange.helpers.bindMovablePopups();f()},cache:n})},C=function(a){a=a||window.event;a.preventDefault&&a.preventDefault();k.style.backgroundColor="white";y=a.dataTransfer.files[0];a=new window.FileReader;a.onloadend=G;a.readAsDataURL(y);return!1},G=function(a){F(a.target.result)},A=function(a){a=a.originalEvent||window.event;if(a.clipboardData&&(a=a.clipboardData.items))for(var b=0;b<a.length;b++)if(-1!==a[b].type.indexOf("image")){y=a[b].getAsFile();var c=(window.URL||window.webkitURL).createObjectURL(y);
F(c)}},a=function(){return!1},e=function(){return!1},b=function(){h(B);if(window.FormData){var a=new window.FormData;a.append("uploadedImage",y);a.append("fkey",StackExchange.options.user.fkey);$.ajax({url:z,data:a,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(a){$("#"+w).contents().find("html").html(a)}})}},c=function(){k=document.getElementById("image-upload");t&&(k.ondrop=C,k.ondragover=e,k.ondragleave=a);v&&$("body").bind("paste",A);u.find(".popup-close").click(function(){q(null)});
u.find(":radio").change(function(){var a=u.find("#filename-input"),b=u.find("#url-wrapper");a.toggle();b.toggle();$("#upload-message").css({color:"inherit",fontWeight:"inherit"}).hide().text("");b.is(":visible")&&u.find("#url-input").focus()});u.find("form").submit(function(){h(u);var a=u.find(":radio:checked").val(),b=u.find("#filename-input"),c=u.find("#url-wrapper"),d;if("web"==a){var e=b.next();b.detach();d=function(){b.insertBefore(e)}}else{var f=c.next();c.detach();d=function(){c.insertBefore(f)}}this.target=
w;window.closeDialog=q;window.displayUploadError=function(a){$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(a);d();d=null};return!0});u.find("#filename-input").focus()},f=function(){B.find(".popup-close").click(function(){q(null)});$("#cancel-upload").click(function(){q(null)});$("#confirm-upload").click(b);window.closeDialog=q;window.displayUploadError=function(a){$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(a)}},h=function(a){a=a.find("#upload-message");
a.text(a.data("uploading-text")).addSpinner()},d=function(a){$('\x3ciframe style\x3d"display: none;" src\x3d"about:blank" /\x3e').attr("id",w).attr("name",w).appendTo(a)};u.appendTo("#header").center().fadeIn("fast").promise().done(function(){u.asyncLoad({callback:function(){d(u);StackExchange.helpers.bindMovablePopups();StackExchange.helpers.bindHelpOverlayEvents($("#url-input"));c()},cache:n})});$("body").bind("keyup",g);return!0}}}();
StackExchange.postValidation=function(){function n(a,b,c){var e=a.find('input[type\x3d"submit"]:visible'),f=e.length&&e.is(":enabled");f&&e.attr("disabled",!0);z(a);w(a,b,c);t(a);v(a);u(a);var g=function(){1!=b||a.find(A).length?(p(a),f&&e.attr("disabled",!1)):setTimeout(g,250)};g()}function D(){for(var a=0;a<c.length;a++)clearTimeout(c[a]);c=[]}function z(a){var b=a.find(C);b.length&&b.blur(function(){c.push(setTimeout(function(){var c=b.val(),e=$.trim(c);if(0==e.length)q(a,b);else{var f=b.data("min-length");
f&&e.length<f?g(b,[function(a){return 1==a.minLength?"Title must be at least "+a.minLength+" character.":"Title must be at least "+a.minLength+" characters."}({minLength:f})],k()):(f=b.data("max-length"))&&e.length>f?g(b,[function(a){return 1==a.maxLength?"Title cannot be longer than "+a.maxLength+" character.":"Title cannot be longer than "+a.maxLength+" characters."}({maxLength:f})],k()):$.ajax({type:"POST",url:"/posts/validate-title",data:{title:c},success:function(c){c.success?q(a,b):g(b,c.errors.Title,
k())},error:function(){q(a,b)}})}},f))})}function w(a,b,e){var r=a.find(G);r.length&&r.blur(function(){c.push(setTimeout(function(){var c=r.val(),f=$.trim(c);0==f.length?q(a,r):5==b?(c=r.data("min-length"))&&f.length<c?g(r,[function(a){return"Wiki Body must be at least "+a.minLength+" characters. You entered "+a.actual+"."}({minLength:c,actual:f.length})],k()):q(a,r):1!=b&&2!=b||$.ajax({type:"POST",url:"/posts/validate-body",data:{body:c,oldBody:r.prop("defaultValue"),isQuestion:1==b,isSuggestedEdit:e},
success:function(b){b.success?q(a,r):g(r,b.errors.Body,k())},error:function(){q(a,r)}})},f))})}function p(a){var b=a.find(A);if(b.length){var e=b.parent().find("input#tagnames");e.blur(function(){c.push(setTimeout(function(){var c=e.val();0==$.trim(c).length?q(a,b):$.ajax({type:"POST",url:"/posts/validate-tags",data:{tags:c,oldTags:e.prop("defaultValue")},success:function(c){c.success?q(a,b):g(b,c.errors.Tags,k())},error:function(){q(a,b)}})},f))})}}function t(b){var d=b.find(a);d.length&&d.blur(function(){c.push(setTimeout(function(){var a=
d.val(),a=$.trim(a);if(0==a.length)q(b,d);else{var c=d.data("min-length");c&&a.length<c?g(d,[function(a){return 1==a.minLength?"Your edit summary must be at least "+a.minLength+" character.":"Your edit summary must be at least "+a.minLength+" characters."}({minLength:c})],k()):(c=d.data("max-length"))&&a.length>c?g(d,[function(a){return 1==a.maxLength?"Your edit summary cannot be longer than "+a.maxLength+" character.":"Your edit summary cannot be longer than "+a.maxLength+" characters."}({maxLength:c})],
k()):q(b,d)}},f))})}function v(a){var b=a.find(e);b.length&&b.blur(function(){c.push(setTimeout(function(){var c=b.val(),c=$.trim(c);if(0==c.length)q(a,b);else{var e=b.data("min-length");e&&c.length<e?g(b,[function(a){return"Wiki Excerpt must be at least "+a.minLength+" characters; you entered "+a.actual+"."}({minLength:e,actual:c.length})],k()):(e=b.data("max-length"))&&c.length>e?g(b,[function(a){return"Wiki Excerpt cannot be longer than "+a.maxLength+" characters; you entered "+a.actual+"."}({maxLength:e,
actual:c.length})],k()):q(a,b)}},f))})}function u(a){var d=a.find(b);d.length&&d.blur(function(){c.push(setTimeout(function(){var b=d.val();0==$.trim(b).length?q(a,d):/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,20}$/i.test(b)?q(a,d):g(d,["This email does not appear to be valid."],B())},f))})}function k(){var a=$("#sidebar, .sidebar").first().width()||270;return{position:{my:"left top",at:"right center"},css:{"max-width":a,"min-width":a},closeOthers:!1}}function B(){return{position:{my:"left top",at:"right center"},
css:{"min-width":$("#sidebar, .sidebar").first().width()||270},closeOthers:!1}}function y(c,d,f,r){if(c){var n=function(){var f=0;g(d.find(C),c.Title,k())?f++:q(d,d.find(C));g(d.find(G),c.Body,k())?f++:q(d,d.find(G));g(d.find(A),c.Tags,k())?f++:q(d,d.find(A));g(d.find(a),c.EditComment,k())?f++:q(d,d.find(a));g(d.find(e),c.Excerpt,k())?f++:q(d,d.find(e));g(d.find(b),c.Email,B())?f++:q(d,d.find(b));var l=d.find(".general-error"),n=c.General&&0<c.General.length;if(n||0<f)if(l.length||(d.find('input[type\x3d"submit"]:visible').before('\x3cdiv class\x3d"general-error-container"\x3e\x3cdiv class\x3d"general-error"\x3e\x3c/div\x3e\x3cbr class\x3d"cbt" /\x3e\x3c/div\x3e'),
l=d.find(".general-error")),n)g(l,c.General,{position:"inline",css:{"float":"left","margin-bottom":"10px"},closeOthers:!1,dismissable:!1});else{q(d,l);switch(r){case "question":f=function(a){return 1==a.specificErrorCount?"Your question couldn't be submitted. Please see the error above.":"Your question couldn't be submitted. Please see the errors above."}({specificErrorCount:f});break;case "answer":f=function(a){return 1==a.specificErrorCount?"Your answer couldn't be submitted. Please see the error above.":
"Your answer couldn't be submitted. Please see the errors above."}({specificErrorCount:f});break;case "edit":f=function(a){return 1==a.specificErrorCount?"Your edit couldn't be submitted. Please see the error above.":"Your edit couldn't be submitted. Please see the errors above."}({specificErrorCount:f});break;case "tags":f=function(a){return 1==a.specificErrorCount?"Your tags couldn't be submitted. Please see the error above.":"Your tags couldn't be submitted. Please see the errors above."}({specificErrorCount:f});
break;default:f=function(a){return 1==a.specificErrorCount?"Your post couldn't be submitted. Please see the error above.":"Your post couldn't be submitted. Please see the errors above."}({specificErrorCount:f})}l.text(f)}else d.find(".general-error-container").remove();var p;F()&&($("#sidebar").animate({opacity:0.4},500),p=setInterval(function(){F()||($("#sidebar").animate({opacity:1},500),clearInterval(p))},500));var t;d.find(".validation-error").each(function(){var a=$(this).offset().top;if(!t||
a<t)t=a});l=function(){for(var a=0;3>a;a++)d.find(".message").animate({left:"+\x3d5px"},100).animate({left:"-\x3d5px"},100)};t?(f=$(".review-bar").length,t=Math.max(0,t-(f?125:30)),$("html, body").animate({scrollTop:t},l)):l()},p=function(){1!=f||d.find(A).length?n():setTimeout(p,250)};p()}}function g(a,b,c){if(b&&0!=b.length&&a.length&&$("html").has(a).length)b=1==b.length?b[0]:"\x3cul\x3e\x3cli\x3e"+b.join("\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e";else return!1;if(b&&0<b.length){var e=a.data("error-popup");
if(e&&e.is(":visible")){if(a.data("error-message")==b)return!0;e.fadeOutAndRemove()}c=StackExchange.helpers.showMessage(a,b,c);c.find("a").attr("target","_blank");a.addClass("validation-error");a.data("error-popup",c);a.data("error-message",b);c.click(D);return!0}return!1}function q(a,b){if(!b||0==b.length)return!1;var c=b.data("error-popup");c&&c.is(":visible")&&c.fadeOutAndRemove();b.removeClass("validation-error");b.removeData("error-popup");b.removeData("error-message");a.find(".validation-error").length||
a.find(".general-error-container").remove();return!0}function F(){var a=!1,b=$("#sidebar, .sidebar").first();if(!b.length)return!1;var c=b.offset().left;$(".message").each(function(){var b=$(this);if(b.offset().left+b.outerWidth()>c)return a=!0,!1});return a}var C="input#title",G="textarea.wmd-input:first",A=".tag-editor",a="input[id^\x3dedit-comment]",e="textarea#excerpt",b="input#m-address",c=[],f=250;return{initOnBlur:n,initOnBlurAndSubmit:function(b,c,e,f,p){n(b,c,f);var q,t=function(a){if(a.success)if(p)p(a);
else{var f=window.location.href.split("#")[0],g=a.redirectTo.split("#")[0];0==g.indexOf("/")&&(g=window.location.protocol+"//"+window.location.hostname+g);q=!0;window.location=a.redirectTo;f.toLowerCase()==g.toLowerCase()&&window.location.reload(!0)}else a.captchaHtml?StackExchange.captcha.init(a.captchaHtml,t):a.errors?y(a.errors,b,c,e):b.find('input[type\x3d"submit"]:visible').parent().showErrorMessage(a.message)};b.submit(function(){if(b.find("#answer-from-ask").is(":checked"))return!0;var c=b.find(a);
if("[Edit removed during grace period]"==$.trim(c.val()))return g(c,["Comment reserved for system use. Please use an appropriate comment."],k()),!1;D();StackExchange.navPrevention&&StackExchange.navPrevention.stop();b.find('input[type\x3d"submit"]:visible').parent().addSpinner();StackExchange.helpers.disableSubmitButton(b);setTimeout(function(){$.ajax({type:"POST",dataType:"json",data:b.serialize(),url:b.attr("action"),success:t,error:function(){var a;switch(e){case "question":a="An error occurred submitting the question.";
break;case "answer":a="An error occurred submitting the answer.";break;case "edit":a="An error occurred submitting the edit.";break;case "tags":a="An error occurred submitting the tags.";break;default:a="An error occurred submitting the post."}b.find('input[type\x3d"submit"]:visible').parent().showErrorMessage(a)},complete:function(){StackExchange.helpers.removeSpinner();q||StackExchange.helpers.enableSubmitButton(b)}})},0);return!1})},showErrorsAfterSubmission:y,getSidebarPopupOptions:k}}();