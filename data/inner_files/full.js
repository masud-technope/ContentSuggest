'use strict';(function(m){function g(){}function k(e,f){if(l)return f.indexOf(e);for(var d=f.length;d--;)if(f[d]===e)return d;return-1}var f=g.prototype,e=[],l=e.indexOf?!0:!1;f.getListeners=function(e){var f=this._events||(this._events={});return f[e]||(f[e]=[])};f.addListener=function(e,f){var d=this.getListeners(e);-1===k(f,d)&&d.push(f);return this};f.removeListener=function(e,f){var d=this.getListeners(e),h=k(f,d);-1!==h&&(d.splice(h,1),0===d.length&&(this._events[e]=null));return this};f.addListeners=
function(e,f){return this.manipulateListeners(!1,e,f)};f.removeListeners=function(e,f){return this.manipulateListeners(!0,e,f)};f.manipulateListeners=function(e,f,d){var h,l,c=e?this.removeListener:this.addListener;e=e?this.removeListeners:this.addListeners;if("object"===typeof f)for(h in f)f.hasOwnProperty(h)&&(l=f[h])&&("function"===typeof l?c.call(this,h,l):e.call(this,h,l));else for(h=d.length;h--;)c.call(this,f,d[h]);return this};f.removeEvent=function(e){e?this._events[e]=null:this._events=
null;return this};f.emitEvent=function(f,l){for(var d=this.getListeners(f),h=d.length;h--;)!0===d[h].apply(null,l||e)&&this.removeListener(f,d[h]);return this};"function"===typeof define&&define.amd?define(function(){return g}):m.EventEmitter=g})(this);
StackExchange.realtime=function(){function m(){if(null!=s&&1==s.readyState)for(var a=0,b=z.length;a<b;a++)g("sending "+z[a]),s.send(z[a])}function g(a){StackExchange.options.enableLogging&&console.log("realtime: "+a)}function k(){r.addListener("hb",function(a){s.send(a)})}function f(a){z.push(a);m()}function e(a,b){1!=$("#vote-accepted-"+a.answerid).length&&($(".vote-accepted-on").remove(),b||$('.vote input[value\x3d"'+a.answerid+'"]').parent().append($("\x3cspan\x3e",{"class":"vote-accepted-on",
title:"The question owner accepted this as the best answer",text:"accepted"})))}function l(a){if(0==$("#comment-"+a.commentid).length){var b=$("#comments-link-"+a.id);a=$("tbody","#comments-"+a.id);var c=a.data("remaining-comments-count")||0,h=!(b.data("anon")||b.data("reg"));c++;b.data("comments-count",c);b.attr("title","expand to show all comments on this post, or add one of your own");var d=function(a){return 1==a.commentsCount?"add / show \x3cb\x3e"+a.commentsCount+"\x3c/b\x3e more comment":"add / show \x3cb\x3e"+
a.commentsCount+"\x3c/b\x3e more comments"}({commentsCount:c}),e=function(a){return 1==a.commentsCount?"show \x3cb\x3e"+a.commentsCount+"\x3c/b\x3e more comment":"show \x3cb\x3e"+a.commentsCount+"\x3c/b\x3e more comments"}({commentsCount:c});b.removeClass("disabled-link");a.data("remaining-comments-count",c);h?b.html(d):b.html(e);b.show().fadeTo("fast",0.7).fadeTo("fast",1)}}function q(a){var b=$("#hlinks .reputation-score, .links-container .reputation");b.text()!=a.score&&(0==$(":animated").length&&
b.fadeTo("fast",0.8).fadeTo("fast",1),b.text(a).attr("title",function(a){return"your reputation: "+a.reputation}({reputation:a})),b.trigger("reputationchange"))}function n(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(a){if(a&&a.count){a=a.count;var b=$(".suggested-edits-count");b.text()!=a&&(0==$(":animated").length&&b.fadeTo("fast",0.5).fadeTo("fast",1),b.text(a))}}})}function d(){$("#new-answer-activity").remove();
$("#answers-header").prepend(t)}function h(a){var b=$(".question[data-questionid\x3d"+a.id+"], .answer[data-answerid\x3d"+a.id+"]"),c=$('\x3cdiv class\x3d"new-post-activity" data-postid\x3d"'+a.id+'"\x3ean edit has been made to this post; click to load\x3c/div\x3e');0<b.find(".new-post-activity[data-postid\x3d"+a.id+"]").length||b.prepend(c.click(function(){$(".new-post-activity[data-postid\x3d"+a.id+"]").remove();0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title\x3dtrue".formatUnicorn({postIdsSemiColonDelimited:a.id}),
x(b.find(".postcell, .answercell"),a));$(document).trigger("refreshEdit",a.id)}))}function p(b,c,h){null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.isIgnored(b.body)||(b.fetch&&$.ajax({url:"/posts/"+b.id+"/"+h}).done(function(a){b.body=a;A[b.id]={id:b.id,body:b.body,index:(new Date).getTime(),siteid:b.siteid}}),A[b.id]={id:b.id,body:b.body,index:(new Date).getTime(),siteid:b.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(F),0<$(".tag-sponsorship").length&&
$("#question-mini-list, #questions").css("margin-top","0px"),c&&a())}function c(a,b){return a.index<b.index?-1:a.index>b.index?1:0}function a(){var a=[],h;for(h in A)A.hasOwnProperty(h)&&a.push(A[h]);a=a.sort(c);for(h=0;h<a.length;h++){var d=a[h];$("#question-summary-"+d.id).remove();$(d.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}b(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,C);styleCode();w();$(".new-post-activity").remove();A=
{}}function b(a){var b=document.title.replace(/^\(\d*\*?\) /,"");0<a&&(b="("+a+") "+b);window.setTimeout(function(){$(document).attr("title",b)},200)}function w(){for(var a=$("span.relativetime, span.relativetime-clean"),b=0;b<a.length;b++)if(a[b].title){var c=u(a[b].title);c&&(a[b].innerHTML=c)}}function u(a){if(null!=a&&20==a.length){a=a.substr(0,10)+"T"+a.substr(11,10);a=new Date(a);a=((new Date).getTime()-a.getTime())/1E3+StackExchange.options.serverTimeOffsetSec;var b=Math.floor(a/86400);if(!(isNaN(b)||
0>b||31<=b))return 0==b&&(2>a&&"just now"||60>a&&(D?function(a){return a.seconds+"s ago"}({seconds:Math.floor(a)}):function(a){return a.seconds+" secs ago"}({seconds:Math.floor(a)}))||120>a&&(D?"1m ago":"1 min ago")||3600>a&&(D?function(a){return a.minutes+"m ago"}({minutes:Math.floor(a/60)}):function(a){return a.minutes+" mins ago"}({minutes:Math.floor(a/60)}))||7200>a&&(D?"1h ago":"1 hour ago")||86400>a&&(D?function(a){return a.hours+"h ago"}({hours:Math.floor(a/3600)}):function(a){return 1==a.hours?
a.hours+" hour ago":a.hours+" hours ago"}({hours:Math.floor(a/3600)})))}}var s,A={},y=[],B=0,z=[],E=10,v=!1,D=!1,C,r=new EventEmitter,t=function(){var a=Object.keys(y).length;0==a&&$("#new-answer-activity").remove();return $('\x3cdiv id\x3d"new-answer-activity"\x3e'+function(a){return 1==a.count?a.count+" new answer to this question":a.count+" new answers to this question"}({count:a})+"\x3c/div\x3e").click(function(){StackExchange.realtime.expandAnswers()})},x=function(a,b){return function(c){var h=
$(c).filter(".question, .answer"),d=h.find(".postcell, .answercell"),e=a.closest(".question"),f=0<e.length,l=$("h1 a.question-hyperlink"),w=h.data("title"),k=f&&$.trim(l.text())!=w,g=$(".question-status"),p=function(a,b){return function(){return $.Deferred(function(c){null==b||b()?a.animate({opacity:0},150).promise().done(function(){c.resolve()}):c.resolve()})}},h=p(l,function(){return k}),n=p(a),p=p(g);$.when(h(),n(),p()).done(function(){k&&l.text(w).animate({opacity:1},150);var b=function(a,b){return new $.Deferred(function(c){b.css({opacity:0});
a.replaceWith(b);b.animate({opacity:1},150,function(){c.resolve()})})};b(a,d).done(function(){styleCode();StackExchange.question.bindSuggestedEditPopupLinks();f&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var h=$(c).filter(".question-status");h.length?(g.length||(g=$("\x3cdiv\x3e").addClass("question-status").insertAfter(e)),b(g,h)):g.remove()});window.history.pushState(b,"new post","#"+b.id)}},F=function(){var a=Object.keys(A).length;b(a);return $('\x3cdiv class\x3d"new-post-activity"\x3e'+
function(a){return 1==a.count?a.count+" question with new activity":a.count+" questions with new activity"}({count:a})+"\x3c/div\x3e").click(function(){StackExchange.realtime.expandActiveQuestions()})};return{init:function(a){var b=a.split(","),b=b[B%b.length];null!=b&&0!=b.indexOf("ws://")&&0!=b.indexOf("wss://")&&(b=("https:"===document.location.protocol?"wss://":"ws://")+b);if("WebSocket"in window||"MozWebSocket"in window){if(s)try{g("closing WebSocket"),s.close()}catch(c){}s||(g("opening WebSocket to: "+
b),s="WebSocket"in window?new WebSocket(b):new MozWebSocket(b),s.onopen=function(){v||(v=!0);B=0;g("WebSocket opened");m();k();setInterval(w,6E4)},s.onmessage=function(a){a=$.parseJSON(a.data);r.emitEvent(a.action,[a.data])},s.onclose=function(){s=null;g("WebSocket closed");5>B&&0<E&&(B++,E--,g("reconnect attempt:"+B+" max retries:"+E),setTimeout(function(){StackExchange.realtime.init(a)},(new Date).getTime()%50/20*1E3))},s.onerror=function(){g("WebSocket failed");s=null})}},expandActiveQuestions:a,
expandAnswers:function(){$("#tabs").show();$("#new-answer-activity").remove();var a=$("#answers #answers-header"),b=a.find(".answers-subheader h2"),c=parseInt(b.text())+y.length;isNaN(c)&&(c=y.length);b.text(function(a){return 1==a.answerCount?a.answerCount+" Answer":a.answerCount+" Answers"}({answerCount:c}));$.ajax({url:"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".formatUnicorn({postIdsSemiColonDelimited:y.join(";")})}).done(function(b){var c=$('\x3cdiv class\x3d"dno" /\x3e').append(b);
c.insertAfter(a).fadeIn(400,function(){c.removeClass("dno");styleCode();StackExchange.vote.init($(".question").data("questionid"));c.find(".answer").each(function(){StackExchange.comments.init({post:$(this)})})})});StackExchange.question.bindSuggestedEditPopupLinks();w();y=[]},subscribeToActiveQuestions:function(a,b,c,h,d,e,l){a=a+"-"+b;C=c;D=e;f(a);r.addListener(a,function(a){a=$.parseJSON(a);if(null!=d)for(var c=0;c<d.length;c++)if(-1==$.inArray(d[c],a.tags))return;p(a,h,b);null!=l&&l(a)})},subscribeToInboxNotifications:function(){if(null!=
StackExchange.options.user.accountId){var a=StackExchange.options.user.accountId+"-inbox";f(a);r.addListener(a,function(a){$(".unreadCount").remove();var b=$("\x3ca\x3e",{"class":"unreadCount",title:"unread messages in your inbox",text:a}).insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:b.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(a)})}},subscribeToQuestion:function(a,b){var c=a+"-question-"+b;f(c);r.addListener(c,function(a){a=$.parseJSON(a);if(a.acctid!=StackExchange.options.user.accountId)switch(a.a){case "score":var b=
$('.vote input[value\x3d"'+a.id+'"]').siblings(".vote-count-post");b.text()!=a.score&&(b.text(a.score),0==$(":animated").length&&b.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":l(a);break;case "answer-add":0==$("#answer-"+a.answerid).length&&(y.push(a.answerid),StackExchange.cardiologist&&(StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(d,5E3).trigger():d(),StackExchange.cardiologist.notifiedOfNewAnswer()));
break;case "accept":e(a);break;case "unaccept":e(a,!0);break;case "post-edit":h(a)}})},unsubscribeToQuestion:function(a,b){var c=a+"-question-"+b;g("unsubscribing "+c);var h=$.inArray(c,z);-1!=h&&(z.splice(h,1),null!=s&&1==s.readyState&&s.send("-"+c))},subscribeToReputationNotifications:function(a){null!=StackExchange.options.user.accountId&&(a=a+"-"+StackExchange.options.user.userId+"-reputation",f(a),r.addListener(a,function(a){q(a)}))},subscribeToSuggestedEdits:function(a){a+="-suggested-edits-count-update";
f(a);r.addListener(a,function(){n()})},updateRelativeDates:w,subscribeToReviewDashboard:function(a){a+="-review-dashboard-update";f(a);r.addListener(a,function(a){a=$.parseJSON(a);var b=$('.dashboard-activity[data-review-task\x3d"'+a.i+'"]');0==b.find('.dashboard-user[data-user\x3d"'+a.u+'"]').length&&(b.find(".dashboard-user:nth-child(6)").remove(),b.css("overflow","hidden"),b.children().css({left:"-44px"}),b.prepend(a.html).children().animate({left:0},function(){b.css("overflow","visible")}))})},
subscribeToTopBarNotifications:function(a){null!=StackExchange.options.user.accountId&&(a=StackExchange.options.user.accountId+"-topbar",f(a),r.addListener(a,function(a){StackExchange.topbar.handleRealtimeMessage(a)}))}}}();"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(m){if(gauth.enabled()){var g=document.domain;"meta."==g.substr(0,5)&&(g=g.substr(4,g.length-4));var k=$.cookie("gauth");if(null==k)$.cookie("gauth",null,{path:"/",domain:g}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=g.charAt(0)&&(g="."+g);$.cookie("gauth",null,{path:"/",domain:g});$.cookie("gauth",null,{path:"/",domain:document.domain});var f=k.indexOf(":"),g=k.substr(0,f),k=k.substr(f+1),e=m+"/auth/global/write?authToken\x3d"+
encodeURIComponent(g)+"\x26nonce\x3d"+encodeURIComponent(k);$(document).ready(function(){$("#footer").append("\x3ciframe style\x3d'display:none' src\x3d'"+e+"'\x3e\x3c/iframe\x3e")})}}},checkStackAuth:function(m){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var g=function(k){if(k.origin==m)if("No Local Storage"==k.data)gauth.noGAuthStorage();else if("No Session"==k.data)gauth.noGAuthSession();else{var f=k.data.substr(0,k.data.indexOf(","));k=k.data.substr(k.data.indexOf(",")+
1);$.post("/users/login/global",{authToken:f,nonce:k},function(e,f,k){gauth.globallyAuthed(e)},"json")}};window.attachEvent?window.attachEvent("onmessage",g):window.addEventListener("message",g,!1);$.post("/users/login/global/request","",function(k,f,e){var l=m+"/auth/global/read?request\x3d"+encodeURIComponent(k.token)+"\x26nonce\x3d"+encodeURIComponent(k.nonce);$(document).ready(function(){$("#footer").append("\x3ciframe id\x3d'global-auth-frame' style\x3d'display:none' src\x3d'"+l+"'\x3e\x3c/iframe\x3e")})},
"json")}},enabled:function(){$.cookie("enabledCheck","1");if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(m){if(m&&m.Message){var g=m.Message;m.MessageType&&"WelcomeBack"===m.MessageType&&(g=function(e){return"Welcome back "+e.userLink+", you've been logged in."}({userLink:m.UserLink}));m=g+" ";var k,f=!1,g=""+window.location,e=g.indexOf("returnurl\x3d");
if(-1!=e){var l=g.indexOf("\x26",e);-1==l&&(l=g.length);k=decodeURIComponent(g.substring(e+10,l));k=/^(?:http:\/\/|\/)/.test(k)?k.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=g.indexOf("/users/login")&&(f=!0,k=k||"/");m=f?m+"\x3cbr\x3eYou are being redirected...":m+(k?function(e){return'\x3ca href\x3d"'+e.url+'"\x3eClick here\x3c/a\x3e to return to your last location.'}({url:"javascript:window.location\x3d'"+k+"'"}):function(e){return'\x3ca href\x3d"'+e.url+'"\x3eClick here\x3c/a\x3e to refresh the page.'}({url:"javascript:location.reload(true)"}));
StackExchange.helpers.showFancyOverlay({message:m,showClose:!f,complete:function(){f&&(window.location=k)}})}}}}(),genuwine=function(){var m,g="",k,f,e=[],l=function(){return $(".genu").hasClass("genu-on")},q=function(){var b=$(".genu"),c=$("#seWrapper");if(0==c.length||0<k||f){d();var c=$("#seWrapper"),l;0<k?(l=$("#seTabInbox"),u(l)):f?(l=$("#seTabNotices"),h(l)):(l=$("#seTabHot"),a(l));l.addClass("seCurrent")}if(l=b.hasClass("genu-on")){$(".unreadCountTab").remove();$("#portalLink .itemBoxNew").removeClass("itemBoxNew");
c.fadeOut("fast");for(c=0;c<e.length;c++)e[c]();e=[];0<f&&$("#portalLink .unreadCount").text(""+f).addClass("newNotices").show().click(q)}else c.fadeIn("fast"),$("#portalLink .unreadCount").hide();b.toggleClass("genu-on",!l);-1==k&&$(b).ready(function(){$("#seTabInbox").hide()});n($("#seTabInbox"),$("#seTabNotices"))},n=function(a,b){StackExchange.options.site.isNoticesTabEnabled&&f&&0==b.find(".unreadCountTab").length&&b.prepend('\x3cspan class\x3d"unreadCountTab newNotices"\x3e'+f+"\x3c/span\x3e");
0<k&&0==a.find(".unreadCountTab").length&&a.prepend('\x3cspan class\x3d"unreadCountTab"\x3e'+k+"\x3c/span\x3e")},d=function(){$("#seWrapper").remove();var b='\x3cdiv id\x3d"seWrapper" class\x3d"seWrapper" style\x3d"position:absolute; display:none;"\x3e\x3cdiv class\x3d"seIntro"\x3e\x3ca href\x3d"'+g+'"\x3eStack Exchange\x3c/a\x3e is a network of free, community-driven Q\x26A sites.\x3c/div\x3e\x3cdiv class\x3d"seNav"\x3e\x3cul class\x3d"seNavLinks"\x3e\x3cli\x3e\x3ca id\x3d"seTabHot"\x3eHot Questions\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca id\x3d"seTabSites"\x3eAll Sites\x3c/a\x3e\x3c/li\x3e'+
(StackExchange.options.user.isAnonymous?"":'\x3cli\x3e\x3ca id\x3d"seTabInbox"\x3eInbox\x3c/a\x3e\x3c/li\x3e')+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'\x3cli\x3e\x3ca id\x3d"seTabNotices"\x3eNotifications\x3c/a\x3e\x3c/li\x3e':"")+'\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"seContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"seFooter"\x3e\x3ca id\x3d"seClose"\x3eclose\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e',d=$("#hlinks"),d=d.height()+d.offset().top+5;$(b).appendTo("#portalLink").css({top:d}).find("ul.seNavLinks a").click(function(){var b=
$(this);$(".seNavLinks a").removeClass("seCurrent");b.addClass("seCurrent");switch(b.attr("id")){case "seTabHot":a(b);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&c(b);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":u(b);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();
$("#seContainerInbox").fadeIn("fast");break;case "seTabNotices":h(b),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){q()})},h=function(a){0==$("#seContainerNotices").length&&B(a,"/notices/genuwine","json",p,!0)},p=function(a,b){for(var c='\x3cdiv id\x3d"seContainerNotices" style\x3d"display:none"\x3e',h=0;h<b.length;h++){var d=b[h],l=d.text,w=d.is_unread,k=d.site_url,g=d.icon,p=d.hasOwnProperty("type")?
' data-type\x3d"'+d.type.toString()+'"':"";null!=d.switch_type&&(p=p+' data-sw-type\x3d"'+d.switch_type.toString()+'" data-sw-site\x3d"'+d.site_id.toString()+'"');c+='\x3cdiv class\x3d"noticeBox'+(w?" itemBoxNew":"")+'"'+p+'\x3e\x3ca href\x3d"'+k+'" class\x3d"siteLinkFavicon"\x3e\x3cimg src\x3d"'+g+'"\x3e\x3c/a\x3e\x3cdiv class\x3d"siteInfo"\x3e\x3cp\x3e'+l+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"}z(a,c+"\x3c/div\x3e","notifications_popup.click");e.push(function(){f=0;n($("#seTabInbox"),$("#seTabNotices"))});
f=0},c=function(a){B(a,g+"/genuwine/sites?callback\x3d?\x26host\x3d"+document.location.host+(m?"\x26accountId\x3d"+m:""),"jsonp",w)},a=function(a){0==$("#seContainerHot").length&&B(a,g+"/genuwine?callback\x3d?","jsonp",b)},b=function(a,b){for(var c=$("\x3cdiv/\x3e"),h='\x3cdiv id\x3d"seContainerHot" style\x3d"display:none"\x3e',d=0;d<b.length;d++)var e=b[d],f=e.SiteId,l='href\x3d"http://'+f+"/q/"+e.Id+'?hq\x3d1"',w=parseInt(e.DisplayScore,10),h=h+('\x3cdiv class\x3d"itemBox" data-sw-type\x3d"2" data-sw-name\x3d"'+
f+'"\x3e\x3ca '+l+' class\x3d"seNumAnswer"\x3e'+w+'\x3c/a\x3e\x3cdiv class\x3d"siteInfo"\x3e\x3cp\x3e\x3ca '+l+"\x3e"+c.text(e.Title).html()+'\x3c/a\x3e\x3c/p\x3e\x3ca href\x3d"http://'+f+'" class\x3d"siteLink"\x3e'+f+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e");z(a,h+"\x3c/div\x3e")},c=function(a){B(a,g+"/genuwine/sites?callback\x3d?\x26host\x3d"+document.location.host+(m?"\x26accountId\x3d"+m:""),"jsonp",w)},w=function(a,b){for(var c='\x3cdiv id\x3d"seContainerSites" style\x3d"display:none"\x3e',h=0;h<
b.length;h++)var d=b[h],e=d.Name,f='href\x3d"http://'+d.Id+'?as\x3d1"',c=c+('\x3cdiv class\x3d"itemBox" data-sw-type\x3d"3" data-sw-name\x3d"'+d.Id+'"\x3e\x3ca '+f+' class\x3d"siteFavicon"\x3e\x3cimg src\x3d"'+d.FaviconUrl+'" alt\x3d"'+e+'"\x3e\x3c/a\x3e\x3cdiv class\x3d"siteInfo"\x3e\x3cp\x3e\x3ca '+f+"\x3e"+e+"\x3c/a\x3e\x3c/p\x3e\x3ca "+f+' class\x3d"siteLink"\x3e'+d.Description+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e");z(a,c+"\x3c/div\x3e")},u=function(a){-1!=k&&(0==$("#seContainerInbox").length||
0<k)&&s(a)},s=function(a){B(a,"/inbox/genuwine","json",A,!0)},A=function(a,b){for(var c='\x3cdiv id\x3d"seContainerInbox" style\x3d"display:none"\x3e',h=0;h<b.length;h++){var d=b[h],f='href\x3d"'+d.Url+'"',l='title\x3d"'+d.CreationDate+'"',w=d.Count,p=d.IsNew?" itemBoxNew":"",g=d.hasOwnProperty("ItemType")?' data-type\x3d"'+d.ItemType.toString()+'"':"";null!=d.SiteId&&(g=g+' data-sw-type\x3d"7" data-sw-site\x3d"'+d.SiteId.toString()+'"');c+='\x3cdiv class\x3d"itemBox'+p+'"'+g+"\x3e\x3ca "+f+' class\x3d"siteLinkFavicon"\x3e\x3cimg src\x3d"'+
d.FaviconUrl+'" alt\x3d"'+d.SiteUrl+'"\x3e\x3c/a\x3e\x3cdiv class\x3d"siteInfo"\x3e';"careers message"==d.Type?c+="\x3cp\x3e\x3ca "+f+' style\x3d"font-weight:normal"\x3e\x3cb\x3e'+d.Title+"\x3c/b\x3e wants to contact you on \x3cb\x3eStack Overflow Careers\x3c/b\x3e\x3c/a\x3e\x3c/p\x3e":"invitation"==d.Type?(l=d.Count,c+="\x3cp\x3e\x3ca "+f+' style\x3d"font-weight:normal"\x3e\x3cb\x3e'+l+"\x3c/b\x3e "+("invitation"+(1<l?"s":""))+" awarded on \x3cb\x3eStack Overflow Careers\x3c/b\x3e\x3c/a\x3e\x3c/p\x3e"):
c+="\x3cp\x3e"+(1<w?w+" ":"")+d.Type+" on \x3ca "+f+" "+l+"\x3e"+d.Title+"\x3c/a\x3e\x3c/p\x3e";c+='\x3cp class\x3d"inboxSummary"\x3e'+(d.Summary||"")+"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"}m&&5<=b.length&&(c+='\x3cdiv class\x3d"itemMoreContainer"\x3e\x3cdiv class\x3d"seIntro"\x3e\x3ca href\x3d"http://stackexchange.com/users/'+m+'?tab\x3dinbox"\x3emore inbox messages \x26hellip;\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');z(a,c+"\x3c/div\x3e","inbox_popup.click");e.push(function(){k=0;n($("#seTabInbox"),$("#seTabNotices"))});
k=0},y={},B=function(a,b,c,d,h){var e=a.attr("id");if(y[e])E();else{y[e]=!0;E();var f=function(){y[e]=!1;StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:b,dataType:c,success:function(b){y[e]=!1;b&&(0<b.length||h)?d(a,b):f()},error:f,complete:function(){$("#seWrapper .seContainer").removeSpinner()}})}},z=function(a,b,c){b=$(b);b.prependTo("#seWrapper .seContainer");b.find(".itemBox a, .noticeBox a").click(function(){var a=
$(this).closest(".itemBox, .noticeBox");c&&c.length&&StackExchange.gps.track(c,{item_type:a.data("type")});var b=a.data("sw-type"),d=a.data("sw-site"),a=a.data("sw-name");null==b||null==d&&null==a||StackExchange.gps.track("site.switch",d?{item_type:b,target_site:d}:{item_type:b,target_name:a})});a.hasClass("seCurrent")&&b.fadeIn("fast")},E=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner("#seWrapper .seContainer",{position:"relative",left:"10px",top:"10px"})},v=function(){var a=
$("#portalLink .unreadCount"),b=a.css("margin-top");a.css({marginTop:-20,opacity:0}).show().animate({marginTop:b,opacity:1},2E3)},D=function(){var a=$("#portalLink .unreadCount"),b=a.data("events");b&&b.click||0<a.length&&a.click(q)};return{isVisible:l,click:q,setUnreadCount:function(a){k=a;var b=$("#seTabInbox");0<a?($("#portalLink .unreadCount").text(k),b.hasClass("seCurrent")&&l()&&s(b),v()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");D()},
animateInbox:v,init:function(a,b,c){var d=$(".genu");1<=d.length&&(d[0].onclick=null);m=a;g=d.attr("href");k=b;f=c;0<k||!StackExchange.options.site.isNoticesTabEnabled||(99<f&&(f=99),0<f&&$("#portalLink .unreadCount").text(""+f).addClass("newNotices"),D());d.removeAttr("href").click(q);D();$(document).click(function(a){l()&&!$.contains($("#portalLink")[0],a.target)&&q()})}}}();
StackExchange.topbar=function(){function m(a){StackExchange.options.enableLogging&&console.log("topbar: "+a)}function g(){for(var a=0;a<p.length;a++)p[a].toggle(!1)}var k=klass({name:"",url:"",cssClass:"",button:null,$dialog:null,$loadingPlaceholder:null,$preloadedDialog:null,hasRead:!1}).statics({$corral:$(".js-topbar-dialog-corral")}).methods({isLoading:function(){return null!=this.$loadingPlaceholder},isLoaded:function(){return null!=this.$dialog},isVisible:function(){var a=this.$dialog||this.$loadingPlaceholder;
return null!=a&&a.is(":visible")},toggle:function(a,b){if("boolean"!=typeof a)throw Error("showOrHide is a required parameter");if(!a){if(this.isLoading()){this.showOrHide(!1);return}if(!this.isLoaded())return}this.isLoaded()||this.isLoading()?(a||b||!this.hasRead||this.markAsRead(),this.showOrHide(a)):this.$preloadedDialog?this.loadChildContent():this.loadDialog();if(a)for(var c=0;c<p.length;c++)this.button!=p[c]&&p[c].toggle(!1,b)},showOrHide:function(a){var b=this.$dialog||this.$loadingPlaceholder;
b&&b.toggle(a);a&&this.$dialog&&(this.hasRead=!0)},loadChildContent:function(){var a=this.$preloadedDialog.find(".child-content");this.$dialog=this.$preloadedDialog;this.positionDialogUnderButton();this.showOrHide(!0);if(this.url){$("\x3cdiv\x3e",{"class":"child-content-loading"}).addSpinner().appendTo(a);var b=this;this.fetchUrl().done(function(c){a.html(c);b.afterLoad()})}},loadDialog:function(){if(!this.isLoading()){this.$loadingPlaceholder=this.getLoadingPlaceholder().appendTo(k.$corral);this.positionDialogUnderButton();
this.showOrHide(!0);var a=this;this.fetchUrl().done(function(b){a.$dialog=$(b).appendTo(k.$corral);a.afterLoad();b=a.$loadingPlaceholder.is(":visible");a.positionDialogUnderButton();a.showOrHide(b)}).always(function(){a.$loadingPlaceholder.remove();a.$loadingPlaceholder=null})}},afterLoad:function(){StackExchange.gps.bindTrackClicks(this.$dialog)},getLoadingPlaceholder:function(){var a=$("\x3cdiv/\x3e").append(StackExchange.helpers.getSpinnerImg()).html();return $(['\x3cdiv class\x3d"topbar-dialog ',
this.cssClass,' dno"\x3e\x3cdiv class\x3d"header"\x3e',a,'\x3c/div\x3e\x3cdiv class\x3d"modal-content"/\x3e\x3c/div\x3e'].join(""))},positionDialogUnderButton:function(){var a=this.button.$button.outerHeight(),b=this.button.$button.offset().left-p[0].$button.offset().left;(this.$dialog||this.$loadingPlaceholder).css({top:a,left:b})},fetchUrl:function(){m("fetching "+this.url);return $.ajax({type:"GET",url:this.url,dataType:"html"})},markAsRead:function(){this.button.markAsRead();this.isLoaded()&&
this.$dialog.find(".unread-item").removeClass("unread-item")},handleRealtimeMessage:function(a){this.clearLoadedDialog()},clearLoadedDialog:function(){this.isLoaded()&&(this.$dialog.remove(),this.$dialog=null,this.hasRead=!1)}}),f=klass({name:"",selector:"",dialog:null,$button:null,onClass:"",unreadCountPrefix:"",queuedUnreadCount:0,showsOnMouseOver:!1}).methods({initialize:function(){this.dialog.name=name;this.dialog.button=this;c.push(this.dialog);var a=this;this.$button=$(this.selector);this.$button.click(function(){a.toggle();
return!1});this.showsOnMouseOver&&this.$button.mouseover(function(b){a.showOnMouseOver()});this.onClass="topbar-icon-on"+(this.onClass?" ":"")+this.onClass},toggle:function(a,b){a="boolean"==typeof a?a:!this.$button.hasClass(this.onClass);this.$button.toggleClass(this.onClass,a);this.dialog.toggle(a,b)},showOnMouseOver:function(){for(var a=!1,b=0;b<p.length;b++){var c=p[b];if(c!=this&&c.showsOnMouseOver&&c.isOn()){a=!0;break}}a&&this.toggle(!0,!0)},isOn:function(){return this.$button.hasClass(this.onClass)},
markAsRead:function(){this.$button.find(".unread-count").fadeOut();var a=this.$button.data("unread-class");a&&this.$button.removeClass(a);this.dequeuePendingUnreadCount()},dequeuePendingUnreadCount:function(){this.queuedUnreadCount&&(this.setUnreadCount(this.queuedUnreadCount),this.queuedUnreadCount=0,this.dialog.clearLoadedDialog())},setUnreadCount:function(a){void 0!==a&&(0>=a?(this.queuedUnreadCount=0,this.isOn()||this.markAsRead()):0<a&&(this.isOn()?this.queuedUnreadCount=a:(this.$button.find(".unread-count").text(this.unreadCountPrefix+
a).fadeIn(),this.addUnreadClass(),this.dialog.clearLoadedDialog())))},addUnreadClass:function(){var a=this.$button.data("unread-class");a&&this.$button.addClass(a)},handleRealtimeMessage:function(a){}}),e=k.extend({url:"/topbar/site-switcher/site-list",cssClass:"siteSwitcher-dialog",$searchItems:null,$pinnedSiteSearchItems:null,isPreloaded:!0,$preloadedDialog:k.$corral.find(".siteSwitcher-dialog")}).methods({afterLoad:function(){this.$dialog.find("#js-site-filter-txt").typeWatch({highlight:!1,wait:250,
captureLength:-1,callback:$.proxy(this.filterSites,this)});this.$searchItems=this.$dialog.find(".js-other-sites li").clone().map(function(){return{title:$(".site-icon",this).attr("title").toLowerCase(),description:$(".site-desc",this).text().toLowerCase(),hostname:$("a",this).first().attr("href"),li:this}});!StackExchange.options.user.isAnonymous&&$(".pinned-site-editor-container").length&&($(".js-found-sites").css({top:$("#your-communities-header").offset().top+$("#your-communities-header").outerHeight()+
$("#js-site-search-txt").outerHeight()-28,width:$("#js-site-search-txt").outerWidth()}),$(".js-found-sites").hide(),this.$dialog.find("#js-site-search-txt").typeWatch({highlight:!1,wait:100,captureLength:-1,callback:$.proxy(this.findSitesToPin,this)}),this.$dialog.find("#edit-pinned-sites").click($.proxy(this.editPinnedSites,this)),this.$dialog.find("#cancel-pinned-sites").click({forceListRefresh:$("#save-pinned-sites-btn").is(":enabled")},this.cancelSiteListEdits),this.$dialog.find("#pin-site-btn").click($.proxy(this.pinSite,
this)),this.$dialog.on("click",".remove-pinned-site-link",function(){$(this).parent().remove();$("#save-pinned-sites-btn").enable();$("#reset-pinned-sites").show();return!1}),this.$dialog.find("#save-pinned-sites-btn").click($.proxy(this.savePinnedSites,this)),this.$dialog.find("#reset-pinned-sites").click($.proxy(this.resetPinnedSites,this)));this.supr()},pinSite:function(){$("#pin-site-btn").disable();var a=$("#js-site-search-txt").val(),b=$.grep(this.$pinnedSiteSearchItems,function(b,c){return b.sitename===
a});if(b.length)if(b=b[0],-1<$(".pinned-site-link").map(function(a,b){return $(b).data("id")}).toArray().indexOf(b.siteid))$("#pin-site-btn").enable();else{var c=this;$.ajax({type:"GET",url:"/topbar/site-switcher/pin-site",data:{siteId:b.siteid},dataType:"html"}).done(function(a){a=$(a);a.hide();$(".pinned-site-list").append(a);a.fadeIn("slow");$("#js-site-search-txt").val("");$("#save-pinned-sites-btn").enable();c.toggleSiteListResetLink(!0)}).fail(function(){$("#pin-site-btn").parent().showErrorMessage("Something bad happened; please try again");
$("#pin-site-btn").enable()})}else $("#pin-site-btn").enable()},savePinnedSites:function(){var a=$(".pinned-site-list li .pinned-site-link").map(function(a,b){return $(b).data("id")}).toArray(),b=!$("#reset-pinned-sites").is(":visible")||!a.length;this.toggleSiteListResetLink(!b);$.ajax({type:"POST",url:"/topbar/site-switcher/save-pinned-sites",data:{siteIds:b?[]:a,fkey:StackExchange.options.user.fkey},dataType:"html",traditional:!0}).done($.proxy(function(a){$(".my-sites").html(a);this.cancelSiteListEdits(!1);
$(".pinned-site-list").data("custom-list",!b);StackExchange.using("gps",function(){StackExchange.gps.track("site_switcher.edit",{})})},this)).fail(function(){$("#save-pinned-sites-btn").parent().showErrorMessage("Something bad happened; please try again")});return!1},resetPinnedSites:function(){var a=this;$.ajax({type:"GET",url:"/topbar/site-switcher/default-active-sites",dataType:"html"}).done(function(b){$(".pinned-site-list").html(b);$("#save-pinned-sites-btn").enable();a.toggleSiteListResetLink(!1)}).error(function(){$("#reset-pinned-sites").parent().showErrorMessage("Something bad happened; please try again")});
return!1},doSearch:function(a,b,c){b=b.toLowerCase();var d=[];$.each(a,function(a,c){var h={index:a,li:c.li,item:c},e=c.title.indexOf(b);c.title==b?h.priority=1:0==e?h.priority=2:-1<e?h.priority=3:-1<c.description.indexOf(b)?h.priority=4:-1<c.hostname.indexOf(b)&&(h.priority=5);h.priority&&d.push(h)});a=d.sort(function(a,b){return a.priority-b.priority||a.index-b.index});c&&StackExchange.using("gps",function(){StackExchange.gps.track("sitesearch.submit",{term:b,numresults:d.length},!1)});return a},
_findSitesToPin:function(a){var b=$(".js-found-sites"),c=this.$pinnedSiteSearchItems;b.empty();if(""===a)b.hide(),$("#pin-site-btn").disable();else if(c=this.doSearch(c,a,!1),c.length){b.show();$("#pin-site-btn").enable();var d=$(".pinned-site-link").map(function(a,b){return $(b).data("id")}).toArray();$.each(c,function(a,c){var h=$('\x3cli class\x3d"pinned-site-candidate"\x3e'+c.item.sitename+"\x3c/li\x3e");-1<d.indexOf(c.item.siteid)?h.addClass("already-pinned-site"):h.click(function(){var a=$(this).text();
$("#js-site-search-txt").val(a);$(".js-found-sites").hide();return!1});h.appendTo(b)})}},findSitesToPin:function(a){if(this.$pinnedSiteSearchItems)this._findSitesToPin(a);else{var b=this;$.ajax({type:"GET",url:"/topbar/site-switcher/all-pinnable-sites",dataType:"json"}).done(function(c){b.$pinnedSiteSearchItems=c;b._findSitesToPin(a)})}},filterSites:function(a){var b=$(".js-other-sites"),c=this.$searchItems;b.empty();""!=a&&(c=this.doSearch(c,a,!0));b.append(c.map(function(a){return this&&this.li||
a.li}))},editPinnedSites:function(){$(".header").not("#your-communities-header").css("opacity",0.2);$(".modal-content").not("#your-communities-section").css("opacity",0.2);$(".my-sites").hide();$(".pinned-site-editor-container").show();$("#edit-pinned-sites").hide();$("#cancel-pinned-sites").show();var a=$(".pinned-site-list");if(""===a.html().trim()){var b=$("\x3cdiv/\x3e").append(StackExchange.helpers.getSpinnerImg()).html();a.append('\x3cli style\x3d"text-align:center;"\x3e'+b+"\x3c/li\x3e");$.ajax({type:"GET",
url:"/topbar/site-switcher/current-pinned-sites",dataType:"html"}).done(function(b){a.html(b)}).fail(function(){a.showErrorMessage("Something bad happened; please try again")}).always(function(){a.find(".ajax-loader").remove()})}this.toggleSiteListResetLink("true"===a.data("custom-list").toString().toLowerCase());if(!window.jQuery.ui){var c=this;$.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js",function(){$("\x3clink\x3e").attr({rel:"stylesheet",type:"text/css",media:"all",
href:"//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/themes/smoothness/jquery-ui.css"}).appendTo("head");$(".sortable").sortable({axis:"y",update:function(){$("#save-pinned-sites-btn").enable();c.toggleSiteListResetLink(!0)}});$(".sortable").disableSelection()})}return!1},toggleSiteListResetLink:function(a){$("#reset-pinned-sites").toggle(a)},cancelSiteListEdits:function(a){$(".header").not("#your-communities-header").css("opacity",1);$(".modal-content").not("#your-communities-section").css("opacity",
1);$(".my-sites").show();$("#edit-pinned-sites").show();$(".pinned-site-editor-container").hide();$("#cancel-pinned-sites").hide();$("#save-pinned-sites-btn").disable();a&&($(".pinned-site-list").empty(),$(".js-found-sites").hide(),$("#js-site-search-txt").val(""),$("#pin-site-btn").disable());return!1}}),l=f.extend({name:"SiteSwitcher",selector:".js-site-switcher-button",dialog:new e,showsOnMouseOver:!0,onClass:"icon-site-switcher-on"}),e=k.extend({url:"/topbar/inbox",cssClass:"inbox-dialog"}),q=
f.extend({name:"Inbox",selector:".js-inbox-button",dialog:new e,showsOnMouseOver:!0}).methods({handleRealtimeMessage:function(a){this.setUnreadCount(a.UnreadInboxCount)}}),e=k.extend({url:"/topbar/achievements",cssClass:"achievements-dialog"}).methods({afterLoad:function(){this.alignRep();this.bindDateGroupToggles();this.displayUtcTime();this.supr()},alignRep:function(){var a=this.$dialog.find(".js-items .js-faux-column"),b=0;a.filter(".js-rep-change").each(function(){var a=$.trim($(this).text()).length;
a>b&&(b=a)});0<b&&a.width(6*b)},bindDateGroupToggles:function(){this.$dialog.find(".js-date-group-toggle").click(function(){var a=$(this),b=a.closest(".js-date-group"),c=b.find(".js-items"),b=b.find(".rep-site-container");a.find(".date-group-toggle").toggleClass("toggle-hidden");c.add(b).fadeToggle("fast")});this.$dialog.find(".rep-site-container").on("click",function(a){a.stopImmediatePropagation()})},displayUtcTime:function(){var a=this.$dialog,b=function(){var b=new Date;b.setTime(b.getTime()+
1E3*StackExchange.options.serverTimeOffsetSec);var c=b.getUTCHours(),b=b.getUTCMinutes();10>c&&(c="0"+c);10>b&&(b="0"+b);a.find(".js-utc-time").text(c+":"+b)};b();setInterval(b,6E4)}}),n=f.extend({name:"Achievements",selector:".js-achievements-button",dialog:new e,unreadCountPrefix:"+",showsOnMouseOver:!0}).methods({handleRealtimeMessage:function(a){0===(a.UnreadRepCount||0)&&0<a.UnreadNonRepCount?this.addUnreadClass():this.setUnreadCount(a.UnreadRepCount)}}),e=k.extend({cssClass:"help-dialog"}).methods({loadDialog:function(){this.$dialog=
$(".js-help-dialog").appendTo(k.$corral);this.positionDialogUnderButton();this.showOrHide(!0)}}),d=f.extend({name:"Help",selector:".js-help-button",dialog:new e}),e=k.extend({url:"/topbar/mod-inbox",cssClass:"modInbox-dialog"}).methods({}),h=f.extend({name:"ModInbox",selector:".js-mod-inbox-button",dialog:new e}),p=[],c=[];return{init:function(){1.5<=window.devicePixelRatio&&$(".js-avatar-me").attr("src",function(a,b){return b.replace("?s\x3d24","?s\x3d48")});p.push(new l);p.push(new q);p.push(new n);
p.push(new d);StackExchange.options.user.isModerator&&p.push(new h);$(document).click(function(a){var b;a:{for(b=0;b<p.length;b++){var c=p[b].$button;if(c&&c[0]==a.target){b=!0;break a}}b=!1}b||$.contains(k.$corral[0],a.target)||g()})},hideAll:g,handleRealtimeMessage:function(a){var b;if(a&&(b=JSON.parse(a))){m("realtime message - "+a);for(var c in b)for(a=0;a<p.length;a++)if(c==p[a].name){p[a].handleRealtimeMessage(b[c]);break}}}}}();
StackExchange.notify=function(){function m(d,h){var e=$("#dismissed-messages");e.val(e.val()+"~"+d+(h?" "+h:"")+"~")}function g(d,h){var e=$("#dismissed-messages").val();return e?RegExp("~"+d+(h?" "+h:"")+"~").test(e):!1}function k(d,h,e){var c=parseInt($("body").css("margin-top").match(/\d+/));d=h*c/d;e?$("body:not(.no-message-slide)").animate({marginTop:d+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",d+"px")}var f=0,e=function(d,h){var e=$("#notify-"+d+(h?"-"+h:""));-1==
d?$.cookie("m","0",{expires:90,path:"/"}):-1<d&&$.post("/messages/mark-as-read",{messagetypeid:d,id:h?h:null});m(d,h);f--;e.fadeOut("fast",function(){k(f+1,f,!0);e.remove()})},l=function(d){f++;if(g(d.messageTypeId,d.id))return!1;var h="";d.messageTypeId&&(h=' id\x3d"notify-'+d.messageTypeId+(d.id?"-"+d.id:"")+'"');h="\x3cdiv"+h+' style\x3d"display:none"\x3e\x3cspan class\x3d"notify-close"\x3e'+$("\x3ca\x3e\x26times;\x3c/a\x3e").attr("title","dismiss this notification").outerHTML()+'\x3c/span\x3e\x3cspan class\x3d"notify-text"\x3e'+
d.text+"\x3c/span\x3e";if(d.showProfile)var l=encodeURIComponent("/users/"+d.userId+"?tab\x3dbadges\x26sort\x3drecent"),h=h+(" "+function(c){return'See your \x3ca href\x3d"'+c.url+'"\x3eprofile\x3c/a\x3e.'}({url:"/messages/mark-as-read?messagetypeid\x3d"+d.messageTypeId+"\x26returnurl\x3d"+l}));h=$(h+"\x3c/div\x3e");h.find(".notify-close").click(function(){d.close&&d.close();e(d.messageTypeId,d.id)});$("#notify-container").append(h);return!0},q=function(){$("#notify-container div").fadeIn("slow")},
n=function(d,h){var e=$('\x3cdiv class\x3d"link-more"\x3e').append($("\x3ca\x3e").text(function(c){return 1==c.numNotifications?"view "+c.numNotifications+" more notification":"view "+c.numNotifications+" more notifications"}({numNotifications:d})));$("#notify-container").append(e);e.click(function(){e.detach();for(var c=0;c<h.length;c++)l(h[c]);q()})};return{showMessages:function(d,h){for(var e=0,c=h?2:d.length,a=0;a<c&&a<d.length;a++)l(d[a])&&e++;k(f,e,!1);q();h&&e<d.length&&(c=d.slice(c),n(d.length-
e,c))},show:function(d,h){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");l({text:d,messageTypeId:h});q()},close:e,getMessageText:function(d){return $("#notify-"+d+" .notify-text").text()}}}();
function moveScroller(){var m=$("#scroller").width(),g=function(){var k=$(window).scrollTop(),f=$("#scroller-anchor").offset().top,e=$("#scroller");k>f?e.height()>$(window).height()?e.css({position:"fixed",top:"",bottom:"0px",width:m}):e.css({position:"fixed",top:"0px",bottom:"",width:m}):k<=f&&e.css({position:"relative",top:"",bottom:""})};$(window).scroll(g).resize(g);g()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var m=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),m=!0);if(!$(this).hasClass("prettyprint")){var g;g=$(this);var k=$("#prettify-lang").text();""!=k?(g.addClass(k),g=!0):g=!1;g&&($(this).addClass("prettyprint"),m=!0)}});m&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(m){function g(d,h){var f=$("\x3cdiv id\x3d'"+m.id+"'/\x3e").html(h),c=$("\x3cdiv /\x3e").css({overflow:"hidden",position:"absolute","z-index":1002,width:1,height:1,top:0,left:0}).append(f).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(f.attr("id"));var a=m.showing(d,f),b={left:a.left};a.hasOwnProperty("bottom")?(b.bottom=a.bottom,b.top="auto"):b.top=a.top;var l;m.shown&&(l=function(){m.shown(d,f)});c.css(b).animate({height:f.outerHeight()+8,width:f.outerWidth()+
8},300,l);k=function(){c.stop().remove();m.removed&&m.removed(d,f);k=e=null};e=StackExchange.helpers.DelayedReaction(k,5);b=c;a.additional&&(b=b.add(a.additional));b.hover(e.cancel,e.trigger)}var k,f,e,l,q={},n=StackExchange.helpers.DelayedReaction(function(d,h){if(!l&&d){var e;m.cache&&"c_"+d in q?e=$.Deferred().resolve(q["c_"+d]):(e=$.ajax({type:"GET",url:d,dataType:"html"}),m.cache&&e.done(function(c){q["c_"+d]=c}));e.done(function(c){k&&k();""!=c&&g(h,c)})}},500);$(document).delegate(m.selector,
{mouseenter:function(){if(e&&this===f)e.cancel();else return f=this,n.trigger(m.getUrl(this),this),l=!1},mouseleave:function(){l=!0;n.cancel();e&&e.trigger()}})};
StackExchange.tagmenu=function(){function m(e){e=$(e);var f=e.attr("href");if(!f||"/"!=f.charAt(0))return null;f=e.text();if(-1<f.indexOf("*"))return null;e.attr("title","");return"/tags/"+encodeURIComponent(f)+"/subscriber-info"}function g(e,f){var k=$(e),g=k.offset(),d=k.outerHeight(),k={left:g.left},h=g.top+d,d=g.left+f.outerWidth();f.height()+h>$(window).height()+$(window).scrollTop()?k.bottom=$(window).height()-g.top-8:k.top=h;g=Math.max(1024,$(window).width());d>g&&(k.left-=d-g);return k}var k,
f;return{init:function(e){k=e;f||(f=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag,.no-tag-menu)",id:"tag-menu",getUrl:m,showing:g,shown:function(e,f){k&&k(f,$(e).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function m(f,k){var g=$(f).find("img:first"),d=g.offset(),h=g.height(),p=g.width(),c=Math.max(p,h),a=64*h/c,c=64*p/c,b=k.find("img:first").css({width:c,height:a}),m=b.offset();b.css("visibility","hidden");e=g.clone().css({position:"absolute",zIndex:1003,left:d.left,top:d.top,width:p,height:h}).appendTo("body");var u=function(){b[0].complete?(b.css("visibility","visible"),e.fadeOutAndRemove()):setTimeout(u,100)};e.animate({width:c,height:a,top:d.top+m.top},200,u);
k.trigger("userhovershowing",f);return{top:d.top,left:d.left-m.left,additional:e}}function g(e,f){f.trigger("userhovershown")}function k(f,g){$(f).trigger("userhoverremoved");e.remove()}var f,e;return{init:function(){function e(f){f=$(f).closest(".user-hover").find(".user-details a").attr("href");return(f=/\/users\/([^/]+).*$/.exec(f))?"/users/user-info/"+f[1]:null}f||(f=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",
getUrl:e,cache:!0,id:"user-menu",showing:m,shown:g,removed:k}))}}}();
StackExchange.chatAd=function(){function m(){var a=$(".question .post-taglist .post-tag");return a.length?a.map(function(a,b){return $(b).text()}).get().join(" "):null}function g(a){return 10>a?"0"+a:a}function k(a){var b=new Date;b.setTime(1E3*a);return[b.getUTCFullYear(),"-",g(b.getUTCMonth()+1),"-",g(b.getUTCDate())," ",g(b.getUTCHours()),":",g(b.getUTCMinutes()),":",g(b.getUTCSeconds()),"Z"].join("")}function f(a){var b=Math.floor((new Date).getTime()/1E3)-a,c=b%60,d=Math.floor(b/60),h=Math.floor(b/
3600);if(1>b)return"just now";if(60>b)return function(a){return 1==a.seconds?a.seconds+" sec ago":a.seconds+" secs ago"}({seconds:c});if(3600>b)return function(a){return 1==a.minutes?a.minutes+" min ago":a.minutes+" mins ago"}({minutes:d});if(86400>b)return function(a){return 1==a.hours?a.hours+" hour ago":a.hours+" hours ago"}({hours:h});b=Math.floor(b/86400);if(1==b)return"yesterday";if(2>=b)return function(a){return a.days+" days ago"}({days:b});a=new Date(1E3*a);return function(a){return a.month+
" "+a.date+" at "+a.hours+":"+a.minutes}({month:u[a.getMonth()],date:a.getDate(),hours:a.getHours(),minutes:g(a.getMinutes())})}function e(a){var b=$("\x3cdiv /\x3e");b.text(a);return b.html().replace('"',"\x26quot;")}function l(){$.get(c,null,function(a,b,c){h(a,b,c)})}function q(a){if("!"==a.charAt(0)){a=a.substr(1);if(/^https?:\/\/i.stack.imgur.com\//.test(a)){var b=/\?/.test(a)?"\x26":"?";a+=b+"g\x26s\x3d32"}return a}return"https://www.gravatar.com/avatar/"+a+"?s\x3d23\x26d\x3didenticon\x26r\x3dPG"}
function n(a){for(var b=$('\x3cdiv class\x3d"ad502-users" /\x3e'),c=0;c<a.length&&7>c;c++){var d=a[c],h=d.name;d.lastPost&&(h+=": "+f(d.lastPost));var e=$('\x3ca href\x3d"'+(p+"/users/"+d.id)+'" /\x3e');$("\x3cimg height\x3d'23' width\x3d'23' /\x3e").attr("title",h).attr("src",q(d.emailhash)).appendTo(e);b.append(e)}return b}function d(a){var b=a.user;return(a=a.userid)?'\x3ca href\x3d"'+p+"/users/"+a+'"\x3e'+e(b)+"\x3c/a\x3e":e(b)}function h(c,h,g){h=$("#ad502-rooms");if(!c.error){h.html("");g=c.rooms;
for(var m=0;m<g.length&&2>m;m++){var u=g[m],q=p+"/rooms/"+u.id,v=$('\x3cdiv class\x3d"ad502-room"\x3e\x3c/div\x3e');v.append($('\x3ch3 class\x3d"ad502-room-h3"\x3e\x3cspan class\x3d"ad502-room-title" title\x3d"'+e(u.name)+'"\x3e\x3ca href\x3d"'+q+'"\x3e'+e(u.name)+"\x3c/a\x3e\x3c/span\x3e\x3c/h3\x3e"));u.messages&&0<u.messages.length&&v.append($('\x3cspan title\x3d"'+k(u.lastPost)+'" class\x3d"ad502-last-message"\x3e'+f(u.lastPost)+" - "+d(u.messages[0])+"\x3c/span\x3e\x3cbr\x3e"));u.singleImage?
v.append($('\x3cdiv class\x3d"ad502-users"\x3e\x3cimg src\x3d"'+p+"/rooms/users/"+u.id+'.jpeg" /\x3e\x3c/div\x3e')):v.append(n(u.users));h.append(v)}1<c.activeUsers?$("#h-chat-link").text(function(a){return a.num+" People Chatting"}({num:c.activeUsers})):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",function(a){return 1==a.users&&1==a.rooms?a.users+" user active in "+a.rooms+" room the last 60 minutes":1==a.users?a.users+" user active in "+a.rooms+" rooms the last 60 minutes":
1==a.rooms?a.users+" users active in "+a.rooms+" room the last 60 minutes":a.users+" users active in "+a.rooms+" rooms the last 60 minutes"}({users:c.activeUsers,rooms:c.activeRooms}))}a<=w&&window.setTimeout(l,1E3*a);a+=b}var p,c,a=180,b=30,w=480,u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");/^\/questions\/\d+/i.test(window.location.pathname)&&(w=0);return{init:function(a){p=a.chatUrl;c=a.reloadUrl;if(a.tagBased){var b=m();if(!b)return;c+=(/\?/.test(c)?"\x26":"?")+"tags\x3d"+encodeURIComponent(b)}null===
a.preloadData?l():h(a.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var m={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(g){for(var k in m)m.hasOwnProperty(k)&&(g=g.replace(RegExp("["+k+"]","g"),m[k]));return g}}();
function sanitizeAndSplitTags(m,g){m=$.trim(m).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");for(var k=m.split(/[\s|,;]+/),f=[],e=0;e<k.length;e++){var l=k[e].toLowerCase();StackExchange.options.site.nonAsciiTags||(l=StackExchange.helpers.noDiacritics(l));l=l.replace(/_/g,"-");l=l.replace(RegExp("[^a-z0-9.#+"+(g?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");l=l.replace(/^[#+-]+/,"");l=l.replace(/[.-]+$/,"");0<l.length&&-1==$.inArray(l,f)&&"or"!=l&&"and"!=l&&f.push(l)}return f}
StackExchange.question=function(){function m(){$(window).off("hashchange.highlightDestination").on("hashchange.highlightDestination",function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?h(a[2],a[3]):p($(".answer[data-answerid\x3d"+a[1]+"]")))}).trigger("hashchange.highlightDestination")}var g=function(a,b){return a?function(a){return"share link to this question on "+a.socialNetwork}({socialNetwork:b}):function(a){return"share link to this answer on "+
a.socialNetwork}({socialNetwork:b})},k=function(a,b,c,d,h,e){return $("\x3ca\x3e",{id:"share-"+d+"-"+a,"class":"share-"+d,title:g(b,c),text:h,"data-svc":e})},f=function(a,b){var c=null!=a;a||(a=$("div.question div.post-menu a.short-link"));var d=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))d.find(".close-share-tip").click();else{a.addClass("share-link");var h=a.attr("id").substring(10),e=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",
f=a.closest("div.question").length,l="http://"+document.location.host+a.attr("href"),e=("answer"==e?"Answer:":"")+$("#question-header a").text(),g='\x3cdiv class\x3d"share-tip" style\x3d"display:none"\x3e'+(f?"share a link to this question":"share a link to this answer")+'\x3cinput type\x3d"text" style\x3d"display:block; width:292px;" value\x3d"'+l+'"\x3e';StackExchange.options.site.enableSocialMediaInSharePopup&&(g+=$("\x3cdiv\x3e",{id:"share-icons"}).append(k(h,f,"Google+","gp","share [g+]",1)).append(k(h,
f,"Facebook","fb","share [fb]",2)).append(k(h,f,"Twitter","tw","share [tw]",3)).prop("outerHTML"));StackExchange.gps.track("share.show",{location:f?1:2});var m=$(g+'\x3ca class\x3d"close-share-tip" style\x3d"float:right"\x3eclose\x3c/a\x3e\x3c/div\x3e');StackExchange.options.site.enableSocialMediaInSharePopup&&(l=encodeURIComponent(l),e=encodeURIComponent(e),StackExchange.share.gplus($("#share-gp-"+h,m),l,e,"2"),StackExchange.share.facebook($("#share-fb-"+h,m),l,e,"2"),StackExchange.share.twitter($("#share-tw-"+
h,m),l,e,"2"),$("#share-icons a",m).click(function(){m.fadeOutAndRemove();StackExchange.gps.track("share.click",{location:f?1:2,service:$(this).data("svc")})}));b&&m.find(".close-share-tip").before('\x3ca id\x3d"link-post-'+h+'" style\x3d"float:left"\x3ecite\x3c/a\x3e');m.appendTo(d).fadeIn(c?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){m.fadeOutAndRemove()}).end().find("input[type\x3dtext]").select()}},e=function(a){var b=$("#post-form h2:first"),
c=b.wrap("\x3cdiv /\x3e").parent(),d=c.wrap("\x3cdiv /\x3e").parent(),h=$("\x3cdiv /\x3e").prependTo(d),e=d.height(),f=$("\x3cdiv /\x3e");a=$(a);var l=parseInt(b.css("margin-bottom")),g=$("#content"),k=$("#wmd-input").outerWidth(),m=g.offset().left>b.offset().left-5&&"visible"!=g.css("overflow-x");f.css({height:0,overflowY:"hidden"}).appendTo(c).append(a);d.css({height:e,position:"relative"});c.css({position:"absolute",bottom:-l,width:k});h.addClass("answer-help-background").css({position:"absolute",
bottom:-l,height:0,width:k});m&&(h.css("left",0),c.animate({paddingLeft:5},1E3));f.animate({height:a.height()+l+10},1E3);h.animate({height:a.height()+l+10+e},1E3);$("\x3cdiv style\x3d'float:right;margin-top:10px;'\x3e\x3ca href\x3d'#'\x3eok\x3c/a\x3e\x3c/div\x3e").hide().prependTo(c).fadeIn(1E3).find("a").one("click",function(a){var d=$(this).parent();setTimeout(function(){d.remove()},1);f.animate({height:0},1E3,function(){f.add(h).remove();b.unwrap().unwrap()});h.animate({height:0},1E3);m&&c.animate({paddingLeft:0},
1E3);a.preventDefault()})},l=function(){$.get("/posts/answer-help").then(e)},q,n,d,h=function(a,b){var c="#comment-"+a,d=$(c);d.length?p(d):StackExchange.comments.loadAll($("#comments-link-"+b)).done(function(){p($(c))})},p=function(a){var b=d;a.css({backgroundColor:q}).animate({backgroundColor:b},2E3,"linear",function(){$(this).css("background-color","")});a.is(".comment")&&a[0].scrollIntoView(!0)},c=function(a){a=a||{};$(".post-menu a.short-link").live("click",function(b){if(!b.ctrlKey&&!b.metaKey)return f($(this),
a.showCitation),!1})};return{initTitleSearch:function(a,b,c){var d=document.title,h=0,e,f;a.attr("autocomplete","off");var l=function(l){var g=a.val();if(!(""==g||g==e&&!0!==l||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var k=g.split(" "),m=0,n=0;n<k.length;n++)0<$.trim(k[n]).length&&m++;k=(new Date).getTime();n=(k-h)/1E3;if(!0===l||!(3>m||5>n)||a.hasClass("edit-field-overlayed"))h=k,e=g,c&&(document.title=g?g+" - "+c:d),b.empty(),StackExchange.helpers.addSpinner(b),
f&&f.fadeOutAndRemove(),$.ajax({url:"/search/titles",dataType:"json",data:{title:g},success:function(a){a&&(StackExchange.ifUsing("postValidation",function(){if(a.notification){var c=StackExchange.postValidation.getSidebarPopupOptions();c.type="info";f=StackExchange.helpers.showMessage(b,a.notification,c)}}),a.content&&(b.html(a.content),setTimeout(function(){b.find(".answer-link a").attr("target","_blank")},1)))},complete:function(){StackExchange.helpers.removeSpinner(b)}})}},g=!1;b.mouseenter(function(){g=
!0}).mouseleave(function(){g=!1});a.keyup(l).blur(function(){var a=function(){h=0;l()};if(g)b.one("mouseleave",a);else a()});return function(a){h=0;l(a)}},showShareTip:f,getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");return a},initShareLinks:c,canViewVoteCounts:function(){return n},init:function(a){n=a.canViewVoteCounts;StackExchange.question.fullInit?StackExchange.question.fullInit(a):StackExchange.question.bindAnonymousVoteDisclaimers();
StackExchange.comments.init({autoShowCommentHelp:a.autoShowCommentHelp});c(a);if(a.showAnswerHelp)$("#wmd-input").one("focus",l);a.showCitation&&$("div.share-tip a[id^\x3d'link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});d=a.backgroundColor;q=a.highlightColor;m()}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function m(g){var k=$(this),f=k.closest("div.vote"),e=k.prop("className"),l=/vote-up/.test(e),m=/vote-down/.test(e),n=/star/.test(e),e=k.closest(".answer").length;g.preventDefault();if(l||m)if(g=f.find("input").val(),StackExchange.options.isMobile)StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+g+"?voteTypeId\x3d"+(l?2:3)),l="Thank you for your feedback.\x3cbr /\x3e"+(e?function(d){return"Please "+d.startAnchor+"log in or register"+
d.endAnchor+" to vote for this answer."}({startAnchor:'\x3ca href\x3d"/users/login?returnurl\x3d'+escape(document.location)+'"\x3e',endAnchor:"\x3c/a\x3e"}):function(d){return"Please "+d.startAnchor+"log in or register"+d.endAnchor+" to vote for this question."}({startAnchor:'\x3ca href\x3d"/users/login?returnurl\x3d'+escape(document.location)+'"\x3e',endAnchor:"\x3c/a\x3e"})),StackExchange.helpers.showMessage(k,l,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}});
else{if(k="anon-vote-popup-"+g,!f.is(":working")&&!$("."+k).length){f.data("working",!0);$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var d=$('\x3cdiv class\x3d"anon-vote-popup popup"\x3e'+function(d){return"Sending feedback"+d.nbsp}({nbsp:"\x26nbsp;"})+"\x3c/div\x3e").addClass(k).addSpinner();d.appendTo("body").center().fadeIn("fast");StackExchange.using("gps",function(){StackExchange.gps.track("vote_popup.show")});$.ajax({type:"POST",url:"/posts/popup/anon-vote/"+
g+"?voteTypeId\x3d"+(l?2:3),dataType:"html",success:function(h){d.html(h)},error:function(){d.remove()},complete:function(){f.data("working",!1)}})}}else n&&($(".anon-vote-popup").fadeOutAndRemove(),l=e?function(d){return"Please "+d.startAnchor+"log in or register"+d.endAnchor+" to favorite this answer."}({startAnchor:'\x3ca href\x3d"/users/login?returnurl\x3d'+escape(document.location)+'"\x3e',endAnchor:"\x3c/a\x3e"}):function(d){return"Please "+d.startAnchor+"log in or register"+d.endAnchor+" to favorite this question."}({startAnchor:'\x3ca href\x3d"/users/login?returnurl\x3d'+
escape(document.location)+'"\x3e',endAnchor:"\x3c/a\x3e"}),StackExchange.helpers.showMessage(k,l,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}}))}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var g=$(this);g.data("bound-anonymous")||(g.data("bound-anonymous",!0),g.click(m))});StackExchange.question.bindFetchAcceptedAnswerDates()};
StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var m=$(this);if(!m.is(":working")){m.working(!0);var g=m.closest(".answer").data("answerid");g?$.get("/posts/"+g+"/accepted-answer-date",function(g){m.attr("title",g)}):m.attr("title","")}})};
StackExchange.comments=function(){function m(e,d){this.postId=e;this.jDiv=d;this.jtBody=d.find(" \x3e table \x3e tbody");this.jCommentsLink=$("#comments-link-"+e)}function g(e){var d=(e.constructor===$?e:$(e)).closest(".question, .answer, div[id^\x3d'post-']").find(".comments");e=d.attr("id").replace(/^comments-/,"");if(l[e])return l[e];d=new m(e,d);return l[e]=d}function k(e){var d=$(this),h=0==d.closest(".question, .answer, div[id^\x3d'post-']").find(".comments").find(" \x3e table \x3e tbody").data("remaining-comments-count"),
l=d.hasClass("disabled-link"),c=d.data("rep");h&&d.data("anon")&&(StackExchange.options.isMobile?StackExchange.helpers.showMessage(d,function(a){return"Commenting requires an account with "+a.rep+" reputation"}({rep:c}),{type:"info",position:{dimissible:!0,my:"left top",at:"right center"}}):f(d.attr("id").replace("comments-link-","")));h&&d.data("reg")&&StackExchange.helpers.showMessage(d,function(a){return"You must have "+a.linkStart+a.rep+" reputation"+a.linkEnd+" to comment"}({rep:c,linkStart:"\x3ca href\x3d'/help/privileges/comment'\x3e",
linkEnd:"\x3c/a\x3e"}),{type:"info",position:{dimissible:!0,my:"left top",at:"right center"}});(d.data("anon")||d.data("reg"))&&StackExchange.using("gps",function(){StackExchange.gps.track("comment_popup.show")});l||(e.preventDefault(),g(this).addShow(!1))}function f(e){var d="anon-vote-popup-"+e;if(!$("."+d).length){$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var h=$('\x3cdiv class\x3d"anon-vote-popup popup"\x3e'+function(d){return"Loading"+d.nbsp}({nbsp:"\x26nbsp;"})+
"\x3c/div\x3e").addClass(d).addSpinner();h.appendTo("body").center().fadeIn("fast");$.ajax({type:"POST",url:"/posts/popup/anon-comment/"+e,dataType:"html",success:function(d){h.html(d)},error:function(){h.remove()}})}}function e(){if(0!=$(".question[data-questionid]").length){var e=StackExchange.question.getQuestionId();$(".comment .comment-date \x3e span").each(function(){var d=$(this),h=d.closest(".answer"),f=h&&h.length?h.data("answerid"):0,h=d.closest(".comment").attr("id").substr(8),f=f?f:e,
h="#comment"+h+"_"+f;0<location.href.indexOf("/questions/")?d.wrap('\x3ca class\x3d"comment-link" href\x3d"{hash}"\x3e\x3c/a\x3e'.formatUnicorn({hash:h})):d.wrap('\x3ca class\x3d"comment-link" href\x3d"/q/{pid}/{hash}"\x3e\x3c/a\x3e'.formatUnicorn({hash:h,pid:f}))})}}var l={},q=function(){};m.prototype={checkDiscussion:q,ensureInput:q,saveEditingComments:q,restoreEditingComments:q,commentsShown:function(){this.jtBody.data("remaining-comments-count",0)},addShow:function(e){var d=this,h=this.loadAllComments().done(function(){d.checkDiscussion()}),
f=this.ensureInput();f&&!e&&f.focus();h.done(function(){f&&0<f.length&&d.jCommentsLink.hide()})},ajax:function(e,d,h,f){h&&!f&&StackExchange.helpers.addSpinner(h,{"margin-left":"10px"});var c=this;return $.ajax(e).fail(function(a){var b=a.responseText;if(!b||0<=b.indexOf("\x3chtml"))b=d||"An error occured";StackExchange.helpers.showErrorMessage(h||c.jDiv,b,{transient:409==a.status});h&&!f&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(f,
d){this.saveEditingComments(d);this.jtBody.html(f);this.restoreEditingComments();if(!0==this.jDiv.data("localized")){var h=this.jtBody.data("addlink-html");this.jCommentsLink.html($("\x3cdiv/\x3e").html(h).text());this.jtBody.data("addlink-disabled")&&!this.jCommentsLink.hasClass("disabled-link")&&this.jCommentsLink.addClass("disabled-link")}else this.jCommentsLink=$("#comments-link-"+this.postId),this.jCommentsLink.is(":visible")&&!d&&(h=$("#hidden-comments-link-"+this.postId).removeClass("dno").attr("id",
"comments-link-"+this.postId).show(),h.length&&(this.jCommentsLink.replaceWith(h),this.jCommentsLink=h));"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);e();this.commentsShown()},loadAllComments:function(e,d){this.jDiv.removeClass("dno");var f=0==this.jtBody.data("remaining-comments-count");if(!e&&f)return $.Deferred().resolve().promise();var l=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments"+(d||""),dataType:"html"},"An error occurred while fetching comments").done(function(c){l.showComments(c)}).promise()}};
return{init:function(f){f=f&&f.post||document;l={};$(f).off("click","a[id^\x3d'comments-link-']",k).on("click","a[id^\x3d'comments-link-']",k);f==document&&e()},loadAll:function(e,d){return g(e).loadAllComments(!0,d)},extendPostUi:function(e){for(var d in e)e.hasOwnProperty(d)&&(m.prototype[d]=e[d])},uiForPost:g}}();
StackExchange.share=function(){function m(g,f,e){window.open(g,f,e)||(window.location.href=g)}function g(g,f,e){f+="\x3d"+("undefined"!==typeof e?e:"1");e=g.indexOf("?");var l=g.indexOf("#");return-1==e?-1==l?g+"?"+f:g.substring(0,l)+"?"+f+g.substring(l):-1==l?g+"\x26"+f:g.substring(0,l)+"\x26"+f+g.substring(l)}return{gplus:function(k,f,e,l){f=g(f,"sgp",l);k.click(function(){m("https://plus.google.com/share?url\x3d"+f,"sharegplus","toolbar\x3d1,status\x3d1,resizable\x3d1,scrollbars\x3d1,width\x3d600,height\x3d500")})},
twitter:function(k,f,e,l){f=g(f,"stw",l);k.click(function(){m("http://twitter.com/share?url\x3d"+f+"\x26ref\x3dtwitbtn\x26text\x3d"+e,"sharetwitter","toolbar\x3d1,status\x3d1,resizable\x3d1,scrollbars\x3d1,width\x3d800,height\x3d526")})},facebook:function(k,f,e,l){f=g(f,"sfb",l);k.click(function(){m("http://www.facebook.com/sharer.php?u\x3d"+f+"\x26ref\x3dfbshare\x26t\x3d"+e,"sharefacebook","toolbar\x3d1,status\x3d1,resizable\x3d1,scrollbars\x3d1,width\x3d626,height\x3d436")})}}}();
function initTagRenderer(m,g){window.tagRenderer||(window.tagRendererRaw=function(k,f,e){f=f||"";e=e||"a";var l="";f||(m&&-1<$.inArray(k,m)?l="required-tag":g&&-1<$.inArray(k,g)&&(l="moderator-tag"));l=$("\x3c"+e+"\x3e").addClass("post-tag").addClass(l).text(k);"a"===e.toLowerCase()&&l.attr({rel:"tag",href:f+"/questions/tagged/"+encodeURIComponent(k),title:function(e){return"show questions tagged '"+e.tag+"'"}({tag:k})});return l.outerHTML()},window.tagRenderer=function(g,f,e){return $(tagRendererRaw(g,
f,e))})}function showFadingHelpText(m){m.wrap('\x3cdiv class\x3d"dno" /\x3e').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var m={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},g=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),k=function(f){return $(f).parent().hasClass("tag-editor")?m["tag-editor"]:m[$(f).attr("id")]};g.focus(function(){var f=k(this);g.each(function(){var e=k(this);e!=f&&$(e).hide()});var e=$(f);e.is(":visible")||showFadingHelpText(e)})}
$.fn.extend({postId:function(){var m=this.first();m.hasClass("answer")&&m.hasClass("question")||(m=m.closest(".answer, .question"));return parseInt(m.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function m(f){f=$('\x3cdiv id\x3d"lightbox-panel" class\x3d"popup newsletter-popup" style\x3d"display:block"\x3e\x3c/div\x3e').append($("\x3cdiv /\x3e",{"class":"popup-close"}).append("\x3ca\x3e\x26times;\x3c/a\x3e",{title:"close this popup (or hit Esc)"})).append(f);$('\x3cdiv id\x3d"lightbox"\x3e\x3c/div\x3e').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");f.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}
function g(){var f=StackExchange.options.site.name,f=$(['\x3cdiv style\x3d"text-align: left;"\x3e\x3ch2 style\x3d"margin-bottom: 15px;"\x3e',function(e){return"Subscribe to the "+e.site+" weekly newsletter"}({site:f}),'\x3c/h2\x3e\x3cp\x3e\x3cstrong\x3e\x3ca href\x3d"/users/login?returnurl\x3d/newsletter/signup/redirect"\x3e',function(e){return"Create an account on "+e.site+e.endAnchor+" or "+e.loginAnchor+"log in"+e.endAnchor+" if you already have one."}({site:f,loginAnchor:'\x3ca href\x3d"/users/login?returnurl\x3d/newsletter/signup/redirect"\x3e',
endAnchor:"\x3c/a\x3e"}),'\x3c/strong\x3e\x3c/p\x3e\x3cform\x3e\x3clabel for\x3d"newsletter-email-input"\x3eOr, send newsletter emails to:\x3c/label\x3e ',$("\x3cinput\x3e",{type:"text",id:"newsletter-email-input",maxlength:"100",title:"your email address"}).prop("outerHTML")," ",$("\x3cinput\x3e",{type:"submit",id:"newsletter-email-submit",value:"Subcribe"}).prop("outerHtml"),"\x3c/form\x3e",$("#newsletter-ad .privacy-policy-agreement").parent().html(),"\x3c/div\x3e"].join(""));f.find("form").submit(function(){var e=
$(this),f=e.find("#newsletter-email-input"),g=e.find("#newsletter-email-submit"),k=$.trim(f.val());if(0==k.length)return!1;StackExchange.helpers.addSpinner(e);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:k},success:function(d){"confirmed"!=d.status||d.error?"unconfirmed"!=d.status||d.error?e.showErrorMessage(d.error||function(d){return"there was a problem signing up for the newsletter"+d.br+"please try again later"}({br:"\x3cbr /\x3e"})):(f.attr("disabled",!0),g.replaceWith('\x3cspan style\x3d"line-height: 120%; text-align: center;"\x3e\x3cstrong\x3eSubscribed!\x3c/strong\x3e\x3c/span\x3e'),
e.append("\x3cbr /\x3e\x3cbr/\x3e\x3cp\x3e\x3cem\x3ePlease click the link in the confirmation email to activate your subscription.\x3c/em\x3e\x3c/p\x3e"),$("#newsletter-signup-container").replaceWith('\x3cspan style\x3d"line-height: 120%;"\x3e\x3cstrong\x3eSuccess!\x3c/strong\x3e Please click the link in the confirmation email to activate your subscription.\x3c/span\x3e')):(f.attr("disabled",!0),g.replaceWith('\x3cspan style\x3d"line-height: 120%; text-align: center;"\x3e\x3cstrong\x3eSubscribed!\x3c/strong\x3e\x3c/span\x3e'),
$("#newsletter-signup-container").replaceWith('\x3cdiv style\x3d"line-height: 200%; text-align: center;"\x3e\x3cstrong\x3eSubscribed!\x3c/strong\x3e\x3c/div\x3e'))},error:function(d,f,g){e.showErrorMessage(function(c){return"there was a problem signing up for the newsletter"+c.br+"please try again later"}({br:"\x3cbr /\x3e"}))},complete:function(){StackExchange.helpers.removeSpinner(e)}});return!1});m(f)}function k(){var f=window.location.pathname.toLowerCase(),e="unknown";"/"==f?e="homepage":"/questions"==
f?e="questionlist":0==f.indexOf("/users/edit")?e="userprofile":0==f.indexOf("/questions/tagged/")?e="questionlist_bytag":/^\/questions\/\d+/.test(f)&&(e="questionpage");return e}return{init:function(){StackExchange.using("gps",function(){StackExchange.gps.track("newsletter.show",{newsletter_type:k()},!0)});$("#newsletter-signup").click(function(){var f=$(this);if(StackExchange.options.user.isAnonymous)return g(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",
type:"POST",dataType:"json",success:function(e,g,k){e.url?window.location.href=e.url:"confirmed"==e.status?$("#newsletter-signup-container").replaceWith('\x3cdiv style\x3d"line-height: 200%; text-align: center;"\x3e\x3cstrong\x3eSubscribed!\x3c/strong\x3e\x3c/div\x3e'):"unconfirmed"==e.status?$("#newsletter-signup-container").replaceWith('\x3cspan style\x3d"line-height: 120%;"\x3e\x3cstrong\x3eSuccess!\x3c/strong\x3e Please click the link in the confirmation email to activate your subscription.\x3c/span\x3e'):
f.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({br:"\x3cbr /\x3e"}))},error:function(e,g,k){f.parent().showErrorMessage(function(e){return"there was a problem signing up for the newsletter"+e.br+"please try again later"}({br:"\x3cbr /\x3e"}))},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var f=$(window).height(),f=Math.min(600,
f-100),f=['\x3cdiv id\x3d"newsleter-preview-pane" style\x3d"overflow: hidden; width: 660px; height: ',f,'px;"\x3e\x3ciframe src\x3d"',$(this).attr("href"),'\x26suppressPromotion\x3dtrue" width\x3d"660" height\x3d"',f,'" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e'].join("");m(f);return!1})},loader:function(f,e){f=e||f;var g=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:f},success:function(e,f,d){$("#newsletter-ad").remove();g.empty().append($(e))},complete:function(){g.attr("class",
"").attr("style","")}});e||(window.sessionStorage.tNewsletter=f+"-continued")}}}();
(function(m,g,k,f){var e=!("selectionStart"in m("\x3cinput type\x3d'text' /\x3e")[0]);m.fn.caret=function(l,m){var n,d,h=this[0];if("object"===typeof l&&"number"===typeof l.start&&"number"===typeof l.end)n=l.start,d=l.end;else if("number"===typeof l&&"number"===typeof m)n=l,d=m;else if("string"===typeof l)-1<(n=h.value.indexOf(l))?d=n+l[g]:n=null;else if("[object RegExp]"===Object.prototype.toString.call(l)){var p=l.exec(h.value);null!=p&&(n=p.index,d=n+p[0][g])}if("undefined"!=typeof n)return e?
(p=this[0].createTextRange(),p.collapse(!0),p.moveStart("character",n),p.moveEnd("character",d-n),p.select()):(this[0].selectionStart=n,this[0].selectionEnd=d),this[0].focus(),this;if(e)if(d=document.selection,"textarea"!=this[0].tagName.toLowerCase()){p=this.val();n=d[k]()[f]();n.moveEnd("character",p[g]);var c=""==n.text?p[g]:p.lastIndexOf(n.text);n=d[k]()[f]();n.moveStart("character",-p[g]);var a=n.text[g]}else n=d[k](),d=n[f](),d.moveToElementText(this[0]),d.setEndPoint("EndToEnd",n),c=d.text[g]-
n.text[g],a=c+n.text[g];else c=h.selectionStart,a=h.selectionEnd;n=h.value.substring(c,a);return{start:c,end:a,text:n,replace:function(b){return h.value.substring(0,c)+b+h.value.substring(a,h.value[g])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(m,g){function k(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var f=$(['\x3cdiv id\x3d"lightbox-panel" class\x3d"popup captcha-popup" style\x3d"display: block; text-align: left;"\x3e\x3cdiv class\x3d"popup-close"\x3e',$("\x3ca\x3e",{title:"close this popup (or hit Esc)",text:"\u00d7"}).prop("outerHTML"),"\x3c/div\x3e",m,"\x3c/div\x3e"].join("")),e=f.find("form:first");$('\x3cdiv id\x3d"lightbox"\x3e\x3c/div\x3e').appendTo($("body")).css("height",
$(document).height()).fadeIn("fast");f.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(k);$.getScript("https://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",lang:StackExchange.options.site.recaptchaAudioLang,custom_translations:{visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the text:",
instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",incorrect_try_again:"Incorrect. Try again.",image_alt_text:"reCAPTCHA challenge image",privacy_and_terms:"Privacy \x26 Terms"},callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(e);e.submit(function(){StackExchange.helpers.disableSubmitButton(e);e.find('input[type\x3d"submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",
data:e.serialize(),success:function(f){f.captchaError?(StackExchange.helpers.removeSpinner(),StackExchange.helpers.enableSubmitButton(e),e.find(".form-error").html(f.captchaError),Recaptcha.reload()):(k(),g(f))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(e);StackExchange.helpers.showErrorMessage(e,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();
StackExchange.gps=function(){function m(){if(!window.localStorage)return!1;try{window.localStorage["gps-probe"]="1";if("1"!=window.localStorage["gps-probe"])return!1;window.localStorage.removeItem("gps-probe")}catch(a){return!1}return!0}function g(a,b,c,d){$(a).find(b).each(function(a){$(this).addClass("js-gps-track").data("gps-track",c+"({ position:"+(a+1)+d+" })")})}function k(a){$(a||document).find(".js-gps-track").off("click.gps").one("click.gps",function(){var a=$.trim($(this).data("gps-track"));
if(a){for(var c=[],a=a.match(/([a-z._]+)(\([^)]+\))?/ig),d=0;d<a.length;d++){var f=a[d];if(0>f.indexOf("{"))c.push([f,{}]);else{for(var h=f.match(/([a-z._]+)\s*\(\s*\{([^}]+)\}\s*\)/i),f=h[1],h=$.trim(h[2]).match(/[^,]+/ig),g={},l=0;l<h.length;l++){var k=h[l],m=k.indexOf(":"),p=$.trim(k.substr(0,m)),k=$.trim(k.substr(m+1)),m=parseInt(k);g[p]=NaN!=m?m:k}c.push([f,g])}}for(a=0;a<c.length;a++)d=c[a],e(d[0],d[1],!0)}})}function f(a){var b;b=(b=localStorage[h])?JSON.parse(b):[];if(0<b.length){for(var c=
(new Date).getTime(),e=[],f=0;f<b.length&&20>e.length;f++){var g=b[f],l=c-g.now;0>l||36E5<l?n(g):e.push(g)}0<e.length?d(e,a):a&&a()}}function e(a,b,c,d){a={evt:a,properties:b||{},now:(new Date).getTime()};q(a);c?d&&d():f(d)}function l(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(a,b){q(b)}),delete StackExchange._gps_track)}function q(a){a&&StackExchange.options&&StackExchange.options.user&&(a.properties&&!a.properties.user_type&&(a.properties.user_type=StackExchange.options.user.user_type),
!a.ab&&StackExchange.options.user.ab&&(a.ab=StackExchange.options.user.ab));var b=localStorage[h];b?(b=JSON.parse(b),b.push(a),b=JSON.stringify(b)):b=JSON.stringify([a]);a="addToPending "+JSON.stringify(a);StackExchange.options.enableLogging&&console.log("gps: "+a);localStorage[h]=b}function n(a){var b=localStorage[h];if(b){b=JSON.parse(b);a=JSON.stringify(a);for(var c=-1,d=0;d<b.length;d++){var e=JSON.stringify(b[d]);if(a==e){c=d;break}}-1!=c&&(b.splice(c,1),0==b.length?localStorage.removeItem(h):
localStorage[h]=JSON.stringify(b))}}function d(a,b){$.isArray(a)||(a=[a]);for(var d=0;d<a.length;d++){var e=JSON.stringify(a[d]);c[e]&&(a.splice(d,1),d--)}for(d=0;d<a.length;d++)e=JSON.stringify(a[d]),c[e]=!0;d=JSON.stringify(a);StackExchange.options.enableLogging&&console.log("gps: sending "+d);$.ajax({type:"POST",url:"/gps/event",data:d,success:function(b,c,d){for(b=0;b<a.length;b++)n(a[b])},complete:function(){for(var d=0;d<a.length;d++){var e=JSON.stringify(a[d]);delete c[e]}b&&b()}})}var h="gps-pending",
p=!1,c={};return{init:function(a){if(p)return!0;p=!0;if(!a||!m())return StackExchange.gps.track=function(a,c,d,e){e&&e()},delete StackExchange._gps_track,!1;l();f();g(".tagged-questions-page, .questions-page, .tags-page",".js-gps-related-tags .post-tag","related_tags.click",", item_type:1");g(".question-page",".js-gps-related-questions .spacer","related_questions.click");g(".question-page .post-taglist",".post-tag","question_tags.click",", location:1");g(".question-page #sidebar .tagged",".post-tag",
"question_tags.click",", location:2");k();return!0},track:e,sendPending:f,bindTrackClicks:k}}();
StackExchange.openid=function(){function m(d){d&&StackExchange.gps.track("openid.click",{openid_provider:d,location:q},!0);StackExchange.gps.track("signup.start",{location:"question_page"},!0)}function g(d,e){var f=e.find(".option-extra-fields");f.hide();e.find(".yahoo-button").click(function(){f.hide();k(d,"yahoo")});var c=function(a){var b="."+a+"-option";f.show();f.find("\x3e div:not("+b+")").hide();f.find(b+", .extra-field-container").show();e.find(".extra-field").val("").focus();b=e.find(".extra-field-submit");
b.unbind("click");b.click(function(){k(d,a,e.find(".extra-field").val())})};e.find(".blogger-button").click(function(){c("blogger")});e.find(".aol-button").click(function(){c("aol")})}function k(d,e,f){e=n[e];f&&(e=e.replace("{username}",f));d.find(".use-facebook").val("false");d.find(".manual-openid").val(e);d.find(".submit-openid").click()}function f(d){d.find(".use-facebook").val("true");d.find(".manual-openid").val("");d.find(".submit-openid").click()}function e(d){return function(){StackExchange.using("editor",
function(){StackExchange.cardiologist.ensureDraftSaved(d)})}}function l(d,f,g,c){var a=d.find(".manual-openid").val();d.find(".use-facebook").val();e(function(){var b=(StackExchange.options.site.isChildMeta?StackExchange.options.site.parentUrl:"")+"/users/authenticate?returnurl\x3d"+encodeURIComponent(f),b=$('\x3cform method\x3d"post" action\x3d"'+b+'"\x3e\x3c/form\x3e');if(a){var d=$('\x3cinput type\x3d"hidden" name\x3d"openid_identifier" /\x3e');b.append(d);d.val(a)}else{var d=$('\x3cinput type\x3d"hidden" name\x3d"oauth_version" /\x3e'),
e=$('\x3cinput type\x3d"hidden" name\x3d"oauth_server" /\x3e');b.append(d);b.append(e);d.val("2.0");e.val("https://www.facebook.com/dialog/oauth")}b.append("\x3cinput type\x3d'hidden' name\x3d'fkey' value\x3d'"+StackExchange.options.user.fkey+"' /\x3e");g&&c&&($('\x3cinput type\x3d"hidden" name\x3d"anon_vote_type" /\x3e').val(g).appendTo(b),$('\x3cinput type\x3d"hidden" name\x3d"anon_vote_hash" /\x3e').val(c).appendTo(b));StackExchange.navPrevention.stop();b.hide().appendTo("body").submit()})()}var q=
"unknown",n={yahoo:"http://yahoo.com/",google:"https://www.google.com/accounts/o8/id",aol:"http://openid.aol.com/{username}",blogger:"http://{username}.blogspot.com/"};return{initPostLogin:function(d,h){var p=decodeURIComponent(h);0===p.indexOf("/questions/")&&(q="question_page");"/questions/ask"===p&&(q="question_ask");var c=$(d),a=c.find(".new-login-left"),b=c.find(".new-login-right"),n=a.find(".show-more-options");n.click(function(){n.hide();b.show();return!1});b.find(".hide-more-options").click(function(){n.show();
b.hide();return!1});c.removeClass("dno");g(c,b);a.find(".google-login").click(function(){m("Google");k(c,"google")});a.find(".facebook-login").click(function(){m("Facebook");f(c)});a.find(".stackexchange-login").click(e(function(){m("Stack Exchange");StackExchange.navPrevention.stop();window.location="/users/signup?returnUrl\x3d"+encodeURIComponent(p)}));c.find(".submit-openid").click(function(){l(c,p)})},initAnonPopup:function(d,e,g,c,a){var b=decodeURIComponent(e);q=g;d.find(".google-login").click(function(){m("Google");
k(d,"google")});d.find(".facebook-login").click(function(){m("Facebook");f(d)});d.find(".stackexchange-login").click(function(){m("Stack Exchange");window.location="/users/signup?returnUrl\x3d"+encodeURIComponent(b)});d.find(".submit-openid").click(function(){l(d,b,c,a)})}}}();StackExchange.loggedIn={};
var profileLink=function(){var m,g=!1,k,f,e=function(){return $(".profile-link")},l=function(a){a||(a=e());return a.hasClass("profile-link-on")},q=function(a,b){b.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},n=function(a){if(!a.data("loading")){a.data("loading",!0);var b=a.find(".profile-wrapper");b.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(b).fadeIn("fast");b.find(".profile-footer").click(profileLink.click);
d()},error:function(b,c,d){a.data("loading",!1)},complete:StackExchange.helpers.removeSpinner})}},d=function(){var a=new Date;a.setTime(a.getTime()+1E3*f);var b=a.getUTCHours(),a=a.getUTCMinutes();10>b&&(b="0"+b);10>a&&(a="0"+a);$(".profile-popup .popup-clock .popup-time").text(b+":"+a)},h=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){p.cancel()}}),p=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){h.cancel()}}),
c=function(a){a.hover(h.trigger,p.trigger)};return{init:function(a,b,d,h){var k=e(),m=$(".profile-triangle");k.attr("href");g=b;$(location).attr("pathname");f=h||0;m.click(profileLink.click);b||c(k.add(m));$(document).click(function(a){l(k)&&a.target!=k[0]&&a.target!=m[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=e();p.cancel();h.cancel();l(a)?profileLink.hide():profileLink.show()},show:function(a,b){a&&"number"!=typeof a||(a=e());b||(b=$(".profile-popup"));
if(!b.length){var f=a,h=$('\x3cdiv class\x3d"profile-popup" style\x3d"position:absolute; display:none;"\x3e\x3cdiv class\x3d"profile-wrapper"\x3e\x3c/div\x3e\x3c/div\x3e');h.insertBefore(f);g||c(h);b=h}l(a)||(b.fadeIn("fast"),n(b),q(!0,a),k=new Date);m||(m=setInterval(d,2E4),d())},hide:function(a,b){!k||500>(new Date).getTime()-k.getTime()||(a&&"number"!=typeof a||(a=e()),b||(b=$(".profile-popup")),l(a)&&(b.fadeOut("fast"),q(!1,a)),m&&(clearInterval(m),m=null))}}}();
StackExchange.tagPreferences=function(){function m(a,b,c){var d="";"undefined"!=typeof forUserId&&(d=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:b,forUserId:d},c)}var g=[],k=$('\x3ctable\x3e\x3ctr\x3e\x3ctd class\x3d"vt"\x3e\x3cinput type\x3d"text" id\x3d"interestingTag" name\x3d"interestingTag"\x3e\x3c/td\x3e                             \x3ctd class\x3d"vt"\x3e\x3cinput id\x3d"interestingAdd" type\x3d"button" value\x3d"Add"\x3e\x3c/td\x3e \x3c/tr\x3e\x3c/table\x3e'),
f=$('\x3ctable\x3e\x3ctr\x3e\x3ctd class\x3d"vt"\x3e\x3cinput type\x3d"text" id\x3d"ignoredTag" name\x3d"ignoredTag"\x3e\x3c/td\x3e                             \x3ctd class\x3d"vt"\x3e\x3cinput id\x3d"ignoredAdd" type\x3d"button" value\x3d"Add"\x3e\x3c/td\x3e \x3c/tr\x3e\x3c/table\x3e'),e=function(a,b){return a.map(function(a,b){return $(b).text()}).filter(function(a,c){if(!b)return!0;var d;/\*/.test(c)&&(d=RegExp(c.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<b.length;a++){var e=b[a];
if(c===e||d&&d.test(e))return!1}return!0}).map(function(a,b){var c;c=b.replace(/#/g,"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");c=/\*/.test(c)?"div.tags:regex(class, t-"+c.replace(/\*/g,".*")+")":"div.t-"+c;return c}).get().join(",")},l=function(a,b,c,e,f,h){for(var g=$(a).val(),l=sanitizeAndSplitTags(g,!0),k=!1,p=0;p<l.length;p++)0!=$.trim(l[p]).length&&($(b).children().each(function(){$(this).text()==l[p]&&($(this).fadeTo(500,0.1).fadeTo(500,1),k=!0)}),k||(g=$.URLEncode(l[p]),g=$("\x3ca\x3e").attr({id:l[p],
href:"/questions/tagged/"+g,"class":e,title:function(a){return"show questions tagged '"+a.tag+"'"}({tag:l[p]})}).text(l[p]),$(b).append(g),$(b).append(" "),q(c)),k=!1);$(a).val("");f&&$(a).focus();h||m(c,$(b).text());d()},q=function(a){a=20==a?"#interestingTags \x3e .post-tag:last":25==a?"#ignoredTags \x3e .post-tag:last":40==a?"#interestingTags \x3e .post-tag":45==a?"#ignoredTags \x3e .post-tag, #remainingIgnored \x3e .post-tag":"#interestingTags \x3e .post-tag, #ignoredTags \x3e .post-tag";$("\x3cspan\x3e").addClass("delete-tag").attr("title",
"remove this tag").appendTo($(a)).click(function(a){a=$(a.target).closest(".post-tag");var b=a.closest("div"),c=b.is("#ignoredTags")?25:b.is("#interestingTags")?20:-1;-1===c?console.log("removeTag: unknown container. Stopping execution. '"+b.text()+"'"):(a.remove(),m(c,b.text()),d());return!1})},n=function(){return $("#hideIgnoredTrue").is(":checked")?!0:$("#hideIgnoredFalse").is(":checked")?!1:$("#hideIgnored").is(":checked")},d=function(a,b){if(b)for(var c=0;c<b.length;c++)-1==g.indexOf(b[c])&&
g.push(b[c]);b=g;var c=$("#ignoredTags \x3e a, #remainingIgnored \x3e a"),d=$("#interestingTags \x3e a");if(!a||0!=c.length||0!=d.length){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");c=e(c,b);d=e(d,b);if(0<c.length){var f=n()?"tagged-ignored-hidden":"tagged-ignored";$(c).closest("div.question-summary").addClass(f)}0<d.length&&$(d).closest("div.question-summary").addClass("tagged-interesting")}},h=function(a,b){var e=$("#tag-menu"),f;"favorite"==
b&&(f=$("#ignoredTags a").filter(function(){return $(this).text()==a}),f.add(f.next()).remove(),$("#interestingTag").val(a),l("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==b&&(f=$("#interestingTags a").filter(function(){return $(this).text()==a}),f.add(f.next()).remove(),$("#ignoredTag").val(a),l("#ignoredTag","#ignoredTags",25,"post-tag",!1,!0));"clear"==b&&(f=$("#ignoredTags a").filter(function(){return $(this).text()==a}),f.add(f.next()).remove(),f=$("#interestingTags a").filter(function(){return $(this).text()==
a}),f.add(f.next()).remove(),d());StackExchange.helpers.addSpinner(e);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/favorite",data:{action:b,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(b){c(e.html($(""+b)),a)},error:function(a,b,c){},complete:StackExchange.helpers.removeSpinner})},p=function(a,b){var d=$("#tag-menu");StackExchange.helpers.addSpinner(d);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/subscription",data:{unsubscribe:b,fkey:StackExchange.options.user.fkey},
dataType:"html",success:function(b){c(d.html($(""+b)),a)},error:function(a,b,c){},complete:StackExchange.helpers.removeSpinner})},c=function(a,b){a.find(".tm-se-subscription").click(function(){p(b,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?h(b,"ignore"):$(this).hasClass("tm-favorite-clear")?h(b,"favorite"):$(this).hasClass("tm-favorite-ignore")&&h(b,"clear")})},a=function(a){a&&q(40);
$("#add-interesting").append(k);k.find("#interestingAdd").unbind("click").bind("click",function(){l("#interestingTag","#interestingTags",20,"post-tag user-tag",!0);$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")});s()},b=function(a){$("#tag-pref-prefs").removeClass("dno");a&&q(45);$("#add-ignored").append(f);f.find("#ignoredAdd").unbind("click").bind("click",function(){l("#ignoredTag","#ignoredTags",25,"post-tag user-tag",
!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")});s()},w=function(a){if($.contains(document.documentElement,a.target)&&!$(a.target).closest("#interesting-tags").length){a=0<$("#interestingTags \x3e .post-tag").length;var b=0<$("#ignoredTags \x3e .post-tag, #remainingIgnored \x3e .post-tag").length;a?($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")):
($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"));b?($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")):($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"));$("#interesting-tags .delete-tag").remove();y();$(document).off("click",
w)}},u=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno");a(!1)});$("#addIgnoredTag").on("click",function(){$(this).addClass("dno");b(!1)});$("#edit-interesting").on("click",function(){$(this).addClass("dno");$("#addInterestingTag").addClass("dno");$("#tag-subscriptions, #ignored-wrapper").removeClass("dno");$("#edit-ignored").length||b(!0);a(!0)});$("#edit-ignored").on("click",function(){$(this).addClass("dno");b(!0)});$("#showRemainingIgnored").on("click",function(){$("#showRemainingIgnored").addClass("dno");
$("#remainingIgnored").removeClass("dno")})},s=function(){$(document).on("click",w)},A=!1,y=function(){A&&$("#addIgnoredTag, #edit-ignored, #addInterestingTag, #edit-interesting, #showRemainingIgnored").trigger("click")};return{applyPrefs:d,isIgnored:function(a){var b=$("#ignoredTags \x3e a, #remainingIgnored \x3e a");if(n()&&(b=e(b,!0),0<b.length))return 0<$(a).find(b).length},forceEditMode:function(){A=!0},init:function(){StackExchange.tagmenu.init(c);0!=$("#interestingTags").length&&(u(),s(),$("#hideIgnored, #hideIgnoredTrue, #hideIgnoredFalse").click(function(){m(30,
n());d()}),y())}}}();
StackExchange.question.fullInit=function(m){window.votesCast=m.votesCast;StackExchange.vote.init(m.questionId);StackExchange.question.bindSuggestedEditPopupLinks();StackExchange.vote_bounty.init(m);if(/^#autocomment/.test(window.location.hash)){var g=$(".comments-link:first"),k="#comment-"+window.location.hash.substring(12),f=function(){var e=$(k),f=$("\x3cspan\x3e\x3cb\x3eTrivial answer converted to comment\x3c/b\x3e\x3c/span\x3e");e.find(".comment-date").append($("\x3cbr\x3e")).append(f);e.css({backgroundColor:m.highlightColor});
e.animate({backgroundColor:m.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(k)[0].scrollIntoView(!0)};m.totalCommentCount&&m.shownCommentCount&&m.totalCommentCount!=m.shownCommentCount?StackExchange.comments.loadAll(g).done(f):f()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function m(g){var k=g.parent(),f=g.attr("id").substring(13);g.data("working")||(g.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+f,dataType:"html",success:function(e){var f=$(['\x3cdiv id\x3d"lightbox-panel" class\x3d"popup popup-suggested-edit no-auto-close" style\x3d"display: block;"\x3e\x3cdiv class\x3d"popup-controls"\x3e\x3cdiv class\x3d"handle"\x3e\x3c/div\x3e\x3cdiv class\x3d"popup-close"\x3e\x3ca title\x3d"close this popup (or hit Esc)"\x3e\x26times;\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"suggested-edit-container"\x3e',
e,"\x3c/div\x3e\x3c/div\x3e"].join(""));e=$(window).height();f.find(".popup-suggested-edit").css({"max-height":e-100});var g=$('\x3cdiv id\x3d"lightbox" class\x3d"no-esc-remove"/\x3e').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");f.appendTo(k).css("height","600px").center().css("height","").fadeIn("fast");var m=function(){var d=$.Event("suggestedEditPopupClose");f.trigger(d);d.isDefaultPrevented()||(StackExchange.helpers.closePopups(f),StackExchange.helpers.closePopups(g))},
d=function(d){if(27==d.which)return m(),!1};e=function(){m();return!1};$(document).bind("keydown",d);g.mousedown(e);f.find(".popup-close").click(e);f.bind("popupClose",function(){$(document).unbind("keydown",d)});StackExchange.helpers.bindMovablePopups()},error:function(e,f,g){k.showErrorMessage(e.responseText&&200>e.responseText.length?e.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();g.removeData("working")}}))}$('div.post-menu a[id^\x3d"edit-pending-"]').each(function(){$(this).unbind("click").click(function(){m($(this));
return!1})})};
StackExchange.vote=function(){var m=StackExchange.helpers,g={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},k=function(a){a=a?a.closest("div.vote"):$("div.vote");var b=0<$("body.read-only").length,c=a.hasClass("vote-election-primary");a.find(".vote-up-off, .vote-down-off").each(function(){var a,d,e,f=$(this);if(b)a="Voting is disabled while the site is in readonly mode";else{a=f.hasClass("vote-up-off");
d=(a?h:p)(f);e=0<f.closest(".answer").length;if(c)return;a=(e?a?"This answer is useful":"This answer is not useful":a?"This question shows research effort; it is useful and clear":"This question does not show any research effort; it is unclear or not useful")+(StackExchange.loggedIn&&d?" (click again to undo)":"")}f.attr("title",a)})},f=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){q($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){n($(this))})},
e=function(a){$.each(a,function(){var a=$("div.vote:has(input[value\x3d"+this.PostId+"])");switch(this.VoteTypeId){case g.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case g.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case g.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js \x3e highlightExistingVotes has no case for "+this.VoteTypeId)}});votesCast=null},
l=function(a){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+a+"/votes",dataType:"json",success:e}):e(window.votesCast);f();k()},q=function(c){var d=c.parent().find(".vote-up-off"),e=c.parent().find(".vote-down-off"),f=h(d),l=p(e);b(c,f?-1:l?2:1);a(d,e);f||d.addClass("vote-up-on");w(c,f?g.undoMod:g.upMod)},n=function(c){var d=c.parent().find(".vote-up-off"),e=c.parent().find(".vote-down-off"),f=p(e),l=h(d);b(c,f?1:l?-2:-1);a(d,e);f||e.addClass("vote-down-on");w(c,f?g.undoMod:g.downMod)},
d=function(){return $("div.vote a[id^\x3d'vote-accepted-']")},h=function(a){return a.hasClass("vote-up-on")},p=function(a){return a.hasClass("vote-down-on")},c=function(a){return a.closest("div.vote").find("input[name\x3d_id_]").val()},a=function(a,b){a.removeClass("vote-up-on");b.removeClass("vote-down-on")},b=function(a,b){var c=a.siblings("span.vote-count-post"),d;if(0<c.find(".vote-count-separator").length){d=parseInt(c.children(":first").text(),10);var e=Math.abs(parseInt(c.children(":last").text(),
10));d-=e;x(c)}else d=parseInt(c.text(),10);c.text(d+b)},w=function(a,b){(a?a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click");var d;b!=g.undoMod&&"undefined"!=typeof evaluator&&(d=evaluator(a.siblings("span.vote-count-post"),b==g.upMod));var e=c(a);u(a,e,b,s,{ltu:a.closest("div.vote").find("input[name\x3d_ltu_]").val()},null,d)},u=function(a,b,c,d,e,f,h){var g=function(c){c.Warning?confirm(c.Message)?(k.ignoreWarnings="true",p()):f&&f():(d(a,b,c,h),f&&f())},
l=a.data("vote-stub");if(l)setTimeout(function(){g(l)},0);else{var k={fkey:StackExchange.options.user.fkey};if(e)for(var m in e)k[m]=e[m];var p=function(){$.ajax({type:"POST",url:"/posts/"+b+"/vote/"+c,data:k,dataType:"json",success:g,error:function(){a.parent().showErrorMessage("An error has occurred - please retry your request.");f&&f();h&&h.cancel()}})};p()}},s=function(b,c,d,e){if(d.Success){d.Message&&b.parent().showInfoMessage(d.Message);if(d.ShowShareTip){var h=$(b).closest(".question,.answer").find('div.post-menu a:contains("link")');
StackExchange.question.showShareTip(h)}e&&e.then(function(){e.run()});d.LastVoteTypeId==g.upMod?$(document).trigger("upVote",c):d.LastVoteTypeId==g.downMod?$(document).trigger("downVote",c):$(document).trigger("undoVote",c)}else window.console&&window.console.firebug&&(!d.Message||5>d.Message.length)?(b.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;\x3cbr\x3eplease refresh the page to see if your vote was processed.\x3cbr\x3e\x3cbr\x3eIf this persists, consider disabling FireBug for this site."),
e&&e.cancel()):(e&&e.cancel(),d.Message?b.parent().showErrorMessage(d.Message,{transient:!0}):b.parent().showErrorMessage("An error has occurred - please retry your request."),a(b,b),b.parent().find("span.vote-count-post").text(d.NewScore),d.LastVoteTypeId&&A(b,d.LastVoteTypeId));f(b.parent());k(b)},A=function(a,b){var c,d;b==g.upMod?(c=".vote-up-off",d="vote-up-on"):b==g.downMod&&(c=".vote-down-off",d="vote-down-on");c&&a.closest("div.vote").find(c).addClass(d)},y=function(){$(".star-off:not(.disabled)").live("click",
function(a){B($(this));a.preventDefault()})},B=function(a){if(!a.data("loading")){a.data("loading",!0);var b=c(a)||a.siblings("input[type\x3dhidden][name\x3d_id_]").val(),d=a.parent().find("div.favoritecount b"),e=parseInt("0"+d.text().replace(/^\s+|\s+$/g,""),10),f=function(){a.hasClass("star-on")?(a.removeClass("star-on"),d.removeClass("favoritecount-selected").text(0>=e--?"":e)):(a.addClass("star-on"),d.addClass("favoritecount-selected").text(++e))};f();u(a,b,g.favorite,function(b,c,d){a.data("loading",
!1);d.Success||(f(),a.parent().showErrorMessage(d.Message))})}},z=function(a,b){$("div.post-menu *[id^\x3d'delete-post-'], table.flagged-posts *[id^\x3d'delete-post-']").unbind("click").die("click").live("click",function(c){c.preventDefault();c=$(this);var d=c.attr("id").substring(12),e=-1<c.text().indexOf("undelete"),f=c.data(e?"undelete-prompt":"delete-prompt");f||(f=StackExchange.options.user.isModerator?"":e?"Vote to undelete this post?":"Vote to delete this post?");confirm(f)&&u(c,d,e?g.undeletion:
g.deletion,a||E,b)}).unbind("hover").die("hover").live("hover",function(){var a=$(this);if(a.hasClass("load-tooltip-on-hover")){a.removeClass("load-tooltip-on-hover");var b="/posts/"+a.attr("id").substring(12)+"/delete-tooltip";$.get(b,function(b){a.attr("title",b)})}})},E=function(a,b,c){var d=-1<a.text().indexOf("undelete");c&&c.Success?(a.html(c.Message),a.addClass("load-tooltip-on-hover"),0>c.NewScore?(a=0<$(".question:has(a[id\x3d'delete-post-"+b+"'])").length?".question, div.answer":"#answer-"+
b,a=$(a),d?document.location.reload(!0):($("div.question-status:has(span:contains('delete'))").show(),a.addClass("deleted-answer").find("a[id^\x3d'delete-post-']").addClass("deleted-post").end().find("div[id^\x3d'comments-']").addClass("comments-container-deleted").end().find("a[id^\x3d'comments-link-']").addClass("comments-link-deleted"))):a.parent().showInfoMessage(d?"Your undelete vote has been recorded":"Your delete vote has been recorded")):(d=c&&c.Message?c.Message:d?"A problem occurred during undeletion":
"A problem occurred during deletion",m.showErrorMessage(a.parent(),d))},v=function(){var a=$(this),b=a.attr("id").substring(14),c=d();a.is(":working")||(a.parent().addSpinner(),c.working(!0),u(a,b,g.acceptedByOwner,function(b,d,e){e.Success?(c.removeClass("vote-accepted-on"),parseInt(e.Message,10)==g.acceptedByOwner&&a.addClass("vote-accepted-on")):a.parent().showErrorMessage(e.Message,{transient:e.Transient});a.parent().removeSpinner();c.working(!1).trigger("update")}))},D=function(){var a=$(this),
b=a.hasClass("vote-accepted-on")?"unaccept":"accept";a.attr("title",a.data("title-"+b)).text(a.data("verb-"+b))},C=!1,r=function(a){return a.closest("div.vote").children('input[type\x3d"hidden"]').val()},t=function(a){if(!C){C=!0;var b=r(a);a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".formatUnicorn({postId:b}),dataType:"json",success:function(b){StackExchange.helpers.removeMessages();a.html('\x3cdiv style\x3d"color:green"\x3e'+b.up+'\x3c/div\x3e\x3cdiv class\x3d"vote-count-separator"\x3e\x3c/div\x3e\x3cdiv style\x3d"color:maroon"\x3e'+
b.down+"\x3c/div\x3e").unbind("click").data("bound",!1).css("cursor","default").attr("title",function(a){return a.upCount+" up / "+a.downCount+" down"}({upCount:Math.abs(+b.up),downCount:Math.abs(+b.down)}))},error:function(b,c,d){a.removeSpinner().parent().showErrorMessage(b.responseText&&100>b.responseText.length?b.responseText:"An error occurred during vote count fetch",{transient:409==b.status})},complete:function(){C=!1}})}},x=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").filter(function(){return r($(this))}).attr("title",
"View upvote and downvote totals").css("cursor","pointer").click(function(){t($(this))}).data("bound",!0)},F=function(a){l(a);$("div.post-menu a[id^\x3d'protect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(a){location.reload(!0)}});return!1});$("div.post-menu a[id^\x3d'unprotect-post-']").unbind("click").click(function(a){a.preventDefault();
a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(a){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();y()};return{init:function(a){StackExchange.options.user.isRegistered?F(a):StackExchange.question.bindAnonymousVoteDisclaimers();d().not(":data(bound)").on({click:v,update:D}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();
StackExchange.question.canViewVoteCounts()&&x();z()},up:q,down:n,vote_init:l,favorite_init:y,delete_init:z,bindFetchVoteCounts:x,highlightExistingVotes:e,submit:u,voteTypeIds:g,getPostId:c}}();
StackExchange.vote_closingAndFlagging=function(){function m(a){$("#popup-close-question").remove();var b=r.closest(".post-menu");0==b.length&&(b=r.parent());!1===r.data("isclosed")&&r.addSpinnerAfter({padding:"0 3px"});return $.ajax({type:"GET",url:"/flags/questions/{questionId}/close/popup".formatUnicorn({questionId:C}),dataType:"html"}).done(function(c){t=$(c).elementNodesOnly();t.appendTo(b);g();v&&v.closeShowPopup?v.closeShowPopup(t,r):a&&t.center().fadeIn("fast");StackExchange.helpers.bindMovablePopups()}).fail(function(a){a.responseText?
b.showErrorMessage(a.responseText,{transient:409==a.status}):b.showErrorMessage("Unable to load popup - please try again")}).always(function(){StackExchange.helpers.removeSpinner()})}function g(){t.find(".popup-close").click(function(){StackExchange.helpers.closePopups(".popup")});t.on("popupClose",function(){x&&x.remove()});t.find("input[type\x3dradio]").click(e);$("#close-question-form").submit(function(b){b.preventDefault();a();return!1});$(".retract-close-vote").click(function(){y($(this))});
$(".action-list a").attr("target","_blank");k();f()}function k(){var a=$(".close-as-duplicate-pane"),b=a.find("#search-text");a.on("show",function(){$("#search-text").focus();$("#close-question-form .popup-submit").enable($("#original-question-id").val())}).addClass("handles-submit-button-enabling");b.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){p(b)}})}function f(){var a=t.find(".off-topic-other-comment-container"),b=a.find("textarea"),c=a.closest("li").find("input[type\x3dradio]"),
d=$.trim(b.val());b.charCounter({target:a.find(".text-counter"),min:30,max:500,setIsValid:function(a){a=a&&$.trim(b.val())!=d;b.is(":focus")&&t.find(".popup-submit").enable(a)}});c.click(function(){a.show();b.focus();var c=b.val();b.val("").val(c)});b.focus(function(){c.is(":checked")||c.attr("checked","checked")})}function e(){var a=$(this),b=a.closest("li");if(!b.hasClass("action-selected")){var c=t.find(".popup-subpane").filter(function(){var b=a.data("subpane-name");return b&&b==$(this).data("subpane-name")}),
d=t.find(".popup-submit");c.length?(l(c,$(".popup-active-pane"),!0),c.hasClass("handles-submit-button-enabling")||d.disable()):(d.enable(),t.find(".popup-active-pane li.action-selected").removeClass("action-selected"),b.addClass("action-selected"))}}function l(a,b,c){t.find(".popup-active-pane").removeClass("popup-active-pane").hide();t.find(".popup-title").html(a.data("title"));c&&(c=b.data("breadcrumb")||b.data("title"),n(c,function(){l(b,a,!1);q(a)}));q(a);a.addClass("popup-active-pane").show().trigger("show").asyncLoad()}
function q(a){a.find("input[type\x3dradio]:checked").removeAttr("checked");a.find("li.action-selected").removeClass("action-selected");t.find(".popup-submit").disable()}function n(a,b){var c=$(".popup-title-container .popup-breadcrumbs"),d=$("\x3cspan\x3e").addClass("breadcrumb");$("\x3ca\x3e").text(a).click(function(){d.nextAll().andSelf().remove();b()}).appendTo(d);$("\x3cspan\x3e").addClass("arrow").html("\x26gt;").appendTo(d);d.appendTo(c)}function d(){n("Flagging",function(){t.hide();x.fadeIn("fast");
l(t.find("#pane-main"),t.find(".popup-active-pane"),!1)})}function h(a){a=a.find(".list-originals");0==a.children().length?a.hide():(a.show(),c(a,!0),styleCode(),a.find(".item").click(function(){var a=$(this).find(" .post-link \x3e a").addSpinner({"padding-left":"3px"}),b=$("#search-text").hideHelpOverlay().val(a.attr("href"));p(b,a);return!1}).hover(function(){$(this).toggleClass("hover")}))}function p(a,b){var d=a.closest(".popup-subpane"),e=d.find(".preview"),f=d.find(".list-container"),g=d.find(".search-errors").empty(),
l=$("#original-question-id"),k=d.closest("#popup-close-question").find(".popup-submit");k.disable();e.html("").hide();0!=$.trim(a.val()).length&&(b||d.find(".search-spinner").addSpinner(),$.ajax({type:"GET",url:"/posts/popup/close/search-originals/"+$("#popup-close-question").data("questionid"),data:{q:a.val()},dataType:"html"}).done(function(a){a=$(a).elementNodesOnly().mathjax();if(a.hasClass("show-original"))f.hide(),c(a),e.empty().append(a).show(),a.find(".question .show-title a").attr("target",
"_blank"),a.find(".post-tag").addClass("user-tag"),l.val(a.find(".question").data("questionid")),k.enable();else if(a.hasClass("list-originals"))f.empty().append(a).show(),h(f);else throw"these are not the results you were looking for";}).fail(function(a){g.text(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred while searching; please try again");k.disable();l.val("");d.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()}))}
function c(a,b){var c=$(".close-as-duplicate-pane .original-display").find(".navi-container"),d=a.find(".navi"),e=$("#search-text");if(b)c.empty();else{var f=c.find(".navi");if(1!=f.length)return;f.empty();$("\x3ca\x3e").text(f.data("abbr")).click(function(){f.html(f.data("text")).siblings().remove();c.siblings(".preview").hide();c.siblings(".list-container").show();$("#original-question-id").val("");$("#popup-close-question").find(".popup-submit").disable();$(".close-as-duplicate-pane").find(".search-errors").empty();
e.val(f.data("search-text")).focus()}).appendTo(f)}d.data("search-text",e.val()).text(d.data("text")).prependTo(c)}function a(){var a=t.find(".popup-submit");a.attr("disabled")||($(".remaining-votes").addSpinner({position:"absolute",margin:"18px 0 0 3px"}),a.disable(),a=function(a,b){return t.find(a+' input[type\x3dradio][name\x3d"'+b+'"]:checked').val()},$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/add".formatUnicorn({questionId:C}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,
closeReasonId:a("#pane-main","close-reason"),duplicateOfQuestionId:$("#original-question-id").val(),closeAsOffTopicReasonId:a(".close-as-off-topic-pane","close-as-off-topic-reason"),belongsOnBaseHostAddress:a(".migration-pane","migration"),offTopicOtherText:t.find(".off-topic-other-comment-container textarea").val(),offTopicOtherCommentId:t.find(".close-as-off-topic-pane input[type\x3dradio]:checked").data("other-comment-id"),originalOffTopicOtherText:t.find('.off-topic-other-comment-container input[name\x3d"original_text"]').val()}}).done(function(a){w(a)}).fail(function(){r.parent().showErrorMessage("An error occurred; please try again")}).always(function(){t.find(".popup-close").click()}))}
function b(){r.is(":working")||(r.working(!0).addSpinner({margin:"0 3px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/reopen/add".formatUnicorn({questionId:C}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){w(a)}).fail(function(){r.working(!1).parent().showErrorMessage("An error occurred; please try again")}).always(function(){StackExchange.helpers.removeSpinner()}))}function w(a){a.isClose="QuestionClose"==a.FlagType;a.isRecommendClose="QuestionRecommendClose"==
a.FlagType;a.isReopen="QuestionReopen"==a.FlagType;a.verb=a.isRecommendClose?"flag":a.isReopen?"reopen":"close";var b=r;a.isClose&&r.is('[class*\x3d"flag-post-"]')&&(b=r.parent().find("a[class*\x3d'close-question']"));a.Success?u(a,b):A(a,b)}function u(a,b){if(!(v&&v.closeCallback&&v.closeCallback(b,a,a.isRecommendClose))){var c=function(){var a=window.location.href.splitOnLast("#")[0];0>a.indexOf("noredirect\x3d1")&&(a+=(0>a.indexOf("?")?"?":"\x26")+"noredirect\x3d1");window.location.href=a};a.ResultChangedState?
c():("Duplicate"!=a.CloseReason&&a.CloseAsOffTopicReasonId!=E||0!=b.closest(".mod-post-header").length||StackExchange.comments.loadAll(b),a.Tooltip&&b.attr("title",a.Tooltip),a.Message?s(a,b):c())}}function s(a,b){b.parent().showInfoMessage(a.Message);if(!a.isRecommendClose&&0<a.Count){b=b.closest(".post-menu").find(".close-question-link");var c=b.find(".existing-flag-count");0==c.length&&(b.text(b.text()+" "),c=$('\x3cspan class\x3d"existing-flag-count"\x3e').appendTo(b));c.text(a.Count)}}function A(a,
b){var c=a.Message;if(!c)switch(a.verb){case "flag":c="A problem occurred when trying to flag";break;case "reopen":c="A problem occurred when trying to reopen";break;case "close":c="A problem occurred when trying to close"}v&&v.closeErrorCallback&&v.closeErrorCallback(c)||(b.parent().showErrorMessage(c),a.RefreshClient&&setTimeout(function(){location.reload(!0)},2500))}function y(a){!a.is(":disabled")&&confirm("Are you sure (you cannot vote again after retracting)?")&&(a.disable().addSpinnerBefore({position:"absolute",
margin:"18px 0 0 -25px"}),$.ajax({type:"POST",url:"/flags/questions/{questionId}/close/retract".formatUnicorn({questionId:C}),dataType:"json",data:{fkey:StackExchange.options.user.fkey}}).done(function(a){s(a,r)}).fail(function(){r.parent().showErrorMessage("An error occurred; please try again")}).always(function(){t.find(".popup-close").click()}))}function B(a){x=a;F();x.find(".js-flag-load-close").unbind("click").click(function(){D?D(x,$(this)):H($(this))});x.find("form").submit(function(a){a.preventDefault();
I();return!1});z();v&&v.flagShowPopup?v.flagShowPopup(a,r):StackExchange.helpers.bindMovablePopups()}function z(){x.find(".action-list \x3e .disabled-action").each(function(){var a=$(this);a.find("input[type\x3dradio]").attr("disabled","disabled");a.find(".action-name").addClass("disabled-button")})}var E=3,v,D,C,r,t,x,F=function(){var a=x.find(".popup-submit"),b=x.find('textarea[name\x3d"otherText"]'),c=x.find('input[value\x3d"PostOther"]');b.focus(function(){b.hideHelpOverlay();c.is(":checked")||
c.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(b){c.is(":checked")&&a.enable(b)}});c.click(function(){b.focus()})},G=function(a){if(a.is(".mod-attention-subform")){var b=a.find('textarea[name\x3d"otherText"]').helpOverlay();0<a.find('input[value\x3d"PostOther"]:checked').length?b.focus():0==a.find("input:radio:checked").length&&a.closest(".popup").find(".popup-submit").disable()}},H=function(a){var b=x.fadeOut("fast").promise();t||(a.siblings(".action-name").addSpinner({margin:"0 5px"}),
b=m(!1));b.done(function(){d();a.is(".js-flag-load-close-duplicate")&&t.find("input[value\x3dDuplicate]").click();t.center().fadeIn("fast")});x.find(".popup-submit").disable();a.removeAttr("checked");x.find(".action-list li").trigger("hide-action")},I=function(){x.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var a=x.find('input[name\x3d"top-form"]:checked').val(),b="";"PostOther"==a&&(b=x.find('textarea[name\x3d"otherText"]').val());$.ajax({type:"POST",url:"/flags/posts/{postId}/add/{flagType}".formatUnicorn({postId:C,
flagType:a}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,otherText:b}}).always(function(){StackExchange.helpers.closePopups(".popup")}).done(function(a){v&&v.flagCallback&&v.flagCallback(r,a)||(a.ResultChangedState?location.reload(!0):a.Message&&(a.Success?r.parent().showInfoMessage(a.Message):r.parent().showErrorMessage(a.Message)))}).fail(function(a){a=a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during flagging";r.parent().showErrorMessage(a)})};return{close_afterLoadListOriginals:h,
updateCloseLinkCount:s,init:function(a){v||(v=a);$("body").off("click",".close-question-link, .close-question-button").on("click",".close-question-link, .close-question-button",function(a,c){a.preventDefault();var d=$(this),e=!!c;C=r=t=x=null;C=d.data("questionid");r=d;d.data("isclosed")?(e||confirm("Nominate this question for reopening?"))&&b():m(!0)});$("body").off("click",".flag-post-link, .flag-post-button").on("click",".flag-post-link, .flag-post-button",function(a){a.preventDefault();a=$(this);
C=r=t=x=null;C=a.data("postid");r=a;a.loadPopup({url:"/flags/posts/{postId}/popup".formatUnicorn({postId:C}),loaded:B,hideDescriptions:!1,subformShow:G,dontCenter:v&&v.flagShowPopup})})}}}();
(function(){function m(c,a){this.commentId=c;this.jComment=a;this.postUi=q(a)}function g(c){c=c.constructor===$?c:$(c);c=c.hasClass("comment")?c:c.closest(".comment");var a=c.attr("id").replace(/^comment-/,"");return new m(a,c)}function k(c,a,b){/Android/.test(navigator.userAgent)&&$(a,c).bind("touchstart",function(a){a=$(a.target);if(!a.is(b))return!0;var c=a.data("events");if(c&&c.click&&c.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function f(c,a,
b){$(".comments",c).delegate(a,"click",function(){g(this)[b]()});k(c,".comments",a)}var e,l=StackExchange.comments,q=l.uiForPost;l.extendPostUi({ensureInput:function(){var c=this.jDiv.find('form[id^\x3d"add-comment-"]'),a=this;return c.children().length?(c.add(c.prev()).show(),c.find("textarea")):d(c,"Add Comment",!1,function(){a.submitNewComment()})},saveEditingComments:function(c){var a=this.editingComments=[];this.jDiv.find("form[id^\x3d'edit-comment-']:visible").each(function(){var b=g(this);
if(b.commentId!==c){var d=$(this).find("textarea");a.push([b.commentId,d.val()])}})},restoreEditingComments:function(){this.editingComments&&($.each(this.editingComments,function(c,a){var b=a[1],d=$("#comment-"+a[0]);d.length&&g(d).edit(b,!0)}),delete this.editingComments)},commentsShown:function(){try{var c=this.jDiv.find("form[id^\x3d'add-comment-'] textarea:focus");c.length&&StackExchange.comments.tabCompleter.init(c);this.jtBody.data("remaining-comments-count",0)}catch(a){}},submitNewComment:function(){var c=
this.jDiv.find('form[id^\x3d"add-comment-"]'),a=c.find("textarea"),b=this,d=c.find('input[type\x3d"submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:a.val(),fkey:StackExchange.options.user.fkey}},"An error occurred during comment submission",d).done(function(d){b.showComments(d);a.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(c);c.add(c.prev()).hide();b.jCommentsLink.show();$(document).trigger("comment",b.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(c)})},
checkDiscussion:function(){var c=this.jDiv.find("tr.is-comment-discussion"),a=this;if(c.length){c.remove();var b=this.jDiv.find(".comment-form");b.find(".discussion-info").length||($("\x3cdiv style\x3d'margin:12px 0 3px; font-weight:bold' class\x3d'discussion-info'\x3e"+function(a){return"Please avoid extended discussions in comments. Would you like to "+a.aStart+"automatically move this discussion to chat?"}({aStart:"\x3ca href\x3d'#'\x3e"})+"\x3c/a\x3e\x3c/div\x3e").find("a").click(function(c){$(this).unbind("click");
c.preventDefault();a.ajax({url:"/posts/"+a.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},type:"POST"},"An error occurred when trying to move the discussion to chat",b).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorMessage(b,a.message)})}).end().prependTo(b),c.remove())}}});m.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var c=
this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),a=this;this.submitVote(0).done(function(b){b.Success?(c.closest("tr").siblings("tr").show(),a.renderScore(b.NewScore),c[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",a.postUi.postId)):c.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(a){409===a.status&&c.addClass("comment-up-undo");c.removeClass("comment-up").addClass("comment-up-on")})}},
voteUp:function(){var c=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),a=this;this.submitVote(2).done(function(b){b.Success?(c.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),c.addClass("comment-up-undo"),a.renderScore(b.NewScore),c[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",a.postUi.postId)):c.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){c.removeClass("comment-up-on").addClass("comment-up")})},
"delete":function(){var c=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(a){var b=c.postUi.jDiv.find("textarea");a.Success&&(0!==c.jComment.siblings(".comment").length||b.is(":visible")||c.jComment.closest(".comments").addClass("dno"),c.jComment.remove())})},flag:function(){var c=this;this.jComment.find(".comment-flag").loadPopup({url:"/flags/comments/{commentId}/popup".formatUnicorn({commentId:this.commentId}),loaded:function(a){var b=a.find('textarea[name\x3d"other-text"]').charCounter({min:6,
max:200,setIsValid:function(){h()}}),d=a.find('input[name\x3d"comment-flag-type"]'),e=d.filter('[value\x3d"'+b.data("flag-type")+'"]'),f=a.find(".text-counter"),h=function(){var c=0<d.filter(":checked").length;if(e.is(":checked")){var h=!b.is(":visible"),c=b.show().val().length;f.show();c=6<=c&&200>=c;h&&b.focus()}else b.hide(),f.hide();a.find(".popup-submit").enable(c)};d.click(h);h();a.find("form").submit(function(){var f=d.filter(":checked").val(),h=e.is(":checked")?b.val():"";a.fadeOutAndRemove();
c.submitFlag(f,h).done(function(a){a.Success?a.ResultChangedState?c.jComment.remove():c.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove():a.Message&&c.jComment.find(".comment-flag").closest("td").showErrorMessage(a.Message)});return!1})}})},submitFlag:function(c,a){var b=this.jComment.find(".comment-actions"),d={type:"POST",url:"/flags/comments/{commentId}/add/{flagTypeId}".formatUnicorn({commentId:this.commentId,flagTypeId:c}),data:{fkey:StackExchange.options.user.fkey,otherText:a},
dataType:"json"};return this.postUi.ajax(d,"An error occurred during flagging",b,!0)},edit:function(c,a){var b=this.jComment,e=b.find('form[id^\x3d"edit-comment-"]'),f=this;e.length&&(b.find(" \x3e td \x3e *").not(e).hide(),b.find("td:last").addClass("comment-form"),b=d(e,"Save Edits",!0,function(){f.submitEdit()}),b.val(c||e.find("div").text()),e.show(),a||b.focus())},cancelEdit:function(){var c=this.jComment,a=c.find('form[id^\x3d"edit-comment-"]');a.children("table").remove();a.hide();a.unbind("submit");
c.find("td:last").removeClass("comment-form");c.find(" \x3e td \x3e *").not(a).show()},submitEdit:function(){var c=this.jComment.find('form[id^\x3d"edit-comment-"]'),a=c.find("textarea").val(),b=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:a,fkey:StackExchange.options.user.fkey}},"An error occurred during comment submission",c).done(function(a){b.postUi.showComments(a,b.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(c)})},
submitVote:function(c,a){var b=this.jComment.find("td:first"),d={fkey:StackExchange.options.user.fkey};if(a)for(var e in a)d[e]=a[e];return this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/vote/"+c,dataType:"json",data:d,success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorMessage(b,a.Message)}},"An error occurred during voting",b,!0)},renderScore:function(c){var a="";c&&0<c&&(a+='\x3cspan title\x3d"number of \'useful comment\' votes received" class\x3d"'+
(5>c?"":15>=c?"warm":30>=c?"hot":"supernova")+'"\x3e'+c+"\x3c/span\x3e");this.jComment.find(".comment-score").html(a)}};var n=function(c){c.find("textarea").keyup(function(a){13!=a.which||a.shiftKey||$(this).prev("#tabcomplete:visible").length||c.submit()}).keypress(function(a){if(13==a.which&&!a.shiftKey)return!1})},d=function(c,a,b,d){a=c.hasClass("mobile-comment-form")?'\x3ctextarea name\x3d"comment" rows\x3d"2"\x3e\x3c/textarea\x3e\x3cinput type\x3d"submit" value\x3d"'+a+'"/\x3e':'\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3ctextarea name\x3d"comment" cols\x3d"68" rows\x3d"3"\x3e\x3c/textarea\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput tabindex\x3d"0" type\x3d"submit" value\x3d"'+
a+'"/\x3e'+(b?'\x3ca tabindex\x3d"0" class\x3d"edit-comment-cancel"\x3ecancel\x3c/a\x3e':"")+'\x3cbr/\x3e\x3ca tabindex\x3d"0" class\x3d"comment-help-link"\x3ehelp\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e\x3cspan class\x3d"text-counter"\x3e\x3c/span\x3e\x3cspan class\x3d"form-error"\x3e\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e';c.append(a);c.find("textarea").attr("placeholder",c.data("placeholdertext"));b&&c.find(".edit-comment-cancel").click(function(){g(c).cancelEdit()});
var f=!1;b=c.find("textarea");b.charCounter({min:15,max:600,setIsValid:function(a){f=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});c.find(".comment-help-link").click(h);if(e)b.one("focus",h);c.submit(function(){f?(StackExchange.helpers.disableSubmitButton(c),d(c)):c.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)});return!1});StackExchange.options.desc||n(c);return b},h=function(c){var a=$(this).closest("tbody"),b=a.find(".comment-help-link"),
d=$(".comment-help",a),e;if("click"==c.type)e=0==d.length||!d.is(":visible"),e||(h.manualOnly=!0);else{if(h.manualOnly)return;e=!0}var f=function(){b.text(e?"hide help":"help")};0<d.length?e?d.slideDown(f):d.slideUp(f):e&&(c=$("\x3ctr /\x3e").appendTo(a),c=$("\x3ctd colspan\x3d'2' /\x3e").appendTo(c),h.helpText?(c.html(h.helpText),$(".comment-help",c).slideDown(f)):h.inProgress||(h.inProgress=!0,StackExchange.helpers.addSpinner(b),c.load("/posts/comment-help",function(a){h.helpText=a;StackExchange.helpers.removeSpinner();
$(".comment-help",this).slideDown(f);h.inProgress=!1})))},p=l.init;l.init=function(c){p(c);e=c&&c.autoShowCommentHelp;c=c&&c.post||document;f(c,".comment-up","voteUp");f(c,".comment-delete","delete");f(c,".comment-flag","flag");f(c,".comment-edit","edit");f(c,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",c).each(function(){q(this).addShow(!0)})};l.extendCommentUi=function(c){for(var a in c)c.hasOwnProperty(a)&&(m.prototype[a]=c[a])}})();
StackExchange.comments.tabCompleter=function(){function m(e){var f=$("#tabcomplete");f.empty();5<e.length||!e.length||$.each(e,function(c,a){var b=$("\x3cli/\x3e").text(a).appendTo(f);a.toLowerCase()==d.toLowerCase()&&b.addClass("chosen")})}function g(){var d=n.caret().start,e=n.val(),c=!1;if(/@[^\s!?();:+"].*@/.test(e)){if(!/`/.test(e))return null;c=!0}var a=e.substring(d).search(/[\s!?();:+"\[\]\\]/);-1==a&&(a=e.length-d);var b=e.substring(0,d+a).match(/@[^\s!?();:+"\[\]\\]*$/);if(!b)return null;
var b=b[0].substr(1),a=d+a,f=a-b.length;return c&&/@[^\s!?();:+"]/.test(e.substr(0,f-1))?null:{start:f,pos:d,end:a,name:b}}function k(d){var e=g();if(e.name===d)n.is(":focus")||n.focus();else{var c=n.val();n.val(c.substring(0,e.start)+d+c.substring(e.end));d=e.start+d.length;n.caret(d,d)}}function f(e){var f;if(9==e.which){f=$("#tabcomplete li");if(!f.length)return;var c=f.filter(".chosen").removeClass("chosen"),c=e.shiftKey?c.prev():c.next();c.length||(c=e.shiftKey?f.last():f.first());f=c.addClass("chosen").text()}else if(27==
e.which){f=$("#tabcomplete li");if(!f.length)return;f=d;d=null}else return;e.preventDefault();k(f)}function e(e){if(e.which)switch(e.which){case 9:case 16:case 17:case 18:case 220:return}e=g();if(!e)d=null,m([]);else if(d!=e.name){var f=[];d=e.name;var c;c=e.name?RegExp("^"+StackExchange.helpers.noDiacritics(e.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"):/^\W/;for(var a=q.length,b=0;b<a;b++){var l=q[b].name;(e.name?StackExchange.helpers.noDiacritics(l.replace(/ /g,"").toLowerCase()):
l).match(c)&&f.push(l.replace(/ /g,""))}m(f)}}function l(d){return d?parseInt(d.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null:null}var q,n,d=null;$("#tabcomplete \x3e li").live("mousedown",function(d){d=$(this);d.parent().find("li.chosen").removeClass("chosen");k(d.addClass("chosen").text());return!1});return{init:function(g){if(!StackExchange.options.isMobile){var k=g.closest("div.comments"),c=k.closest(".question, .answer").find(".post-signature:last .user-details a[href^\x3d'/users/']"),c=l(c.attr("href")),
a=[];k.find("a.comment-user").each(function(b,c){var d=c.firstChild;if(3!==d.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var d=d.nodeValue,e=l($(c).attr("href"));e!==StackExchange.options.user.userId&&a.push({id:e,name:d})}});q=[];for(var k={},b=a.length-1;0<=b;b--){var m=a[b];k[m.id]||(q.push(m),k[m.id]=!0)}$("#tabcomplete").remove();n&&n.unbind($.browser.opera?"keypress":"keydown",f).unbind("keyup click",e);0===q.length||1===q.length&&q[0].id===c?n=null:(n=
g,d=null,$("\x3cul id\x3d'tabcomplete' /\x3e").insertBefore(g),g.bind("keydown",f).bind("keyup click",e))}}}}();
StackExchange.inlineEditing={init:function(){function m(g,k,f,e){k.fadeIn(f,e);g.hide()}$(".post-menu .edit-post").live("click",function(g){if(!(g.ctrlKey||g.altKey||g.metaKey||g.shiftKey)){var k=$(this),f=k.closest(".question, .answer");if(1==k.data("handling-event"))return!1;k.data("handling-event",1);f.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();k.addSpinner();var e=f.hasClass("answer"),l=f.find(".postcell,.answercell"),
q=l.find("\x3e *"),n=$('\x3cdiv class\x3d"inline-editor"/\x3e').hide().appendTo(l);n.load(k.attr("href")+"-inline",function(d,g,p){var c;n.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();f.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(f).offset().top-55},200);if("error"==g)StackExchange.helpers.showErrorMessage(l,"The post could not be loaded"),n.remove(),k.data("handling-event",0);
else{m(q,n,300);var a=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}$("#show-editor-button").show();k.data("handling-event",0);m(n,a,300,function(){n.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(f).offset().top-55},200);return!1},b=function(){y.unbind("keyup",w);E.trigger(c)},w=function(a){E.trigger(y[0].value);return!0};
n.find(".cancel-edit").click(function(){b();a(q)});var u=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},1E3,{sliding:!0}),s=n.find(".hide-preview");s.click(function(){var a=n.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),s.text("show preview")):(a.slideDown(),s.text("hide preview"));u.trigger(b);return!1});n.find('input[type\x3d"submit"]').attr("id").replace("submit-button","");var A=n.find("form"),
y=n.find("#title"),B=$("#question-header a"),z=y.data("question-state-suffix"),z=z?" "+z:"";c=y.val();var E=StackExchange.helpers.DelayedReaction(function(a){"undefined"!=typeof a&&(B.text(a+z),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,B[0]]))},{sliding:!0});y.keyup(w);n.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(c){if(!0===c.ctrlKey&&13==c.keyCode)return A.submit(),!1;if(27==c.keyCode)return b(),a(q),!1});StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(A,
e?2:1,e?"answer":"question",!1,function(b){var c=$(b.html).hide();l.replaceWith(c);e||$("#question-header a").text(b.title);$("html").trigger("inline-edit-complete",[c,b.title]);styleCode();a(c)})})}});return!1}})}};
StackExchange.vote_bounty=function(){var m,g=function(e,f,g){f=$(".bounty-vote");if(g.Success){$(".bounty-notification").remove();m=!1;var d=e.closest("td.votecell").parent().find("span.reputation-score:last");g.Message&&(g=$(g.Message),d.text(g.text()).attr("title",g.attr("title")));g=e.closest("div.vote").find(".bounty-award-container");1<g.length?(g=g.filter(":first").find(".bounty-award"),d=parseInt(g.text(),10),e=parseInt(e.text(),10),g.text("+"+(d+e)),f.remove()):(e.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
f.not(e).remove())}else StackExchange.helpers.showErrorMessage(e.parent(),g.Message),f.removeClass("disabled")},k=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var e=$(this),f=StackExchange.vote.getPostId(e);if(m?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(e,
f,StackExchange.vote.voteTypeIds.bountyClose,g)})},f=function(f,g){g=$(g||$(".bounty-link"));g=g.off("click",e);if(f)g.on("click",e);return g},e=function(){var e=f(!1,this);e.addSpinnerAfter({padding:"0 3px"});var g=$(e).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+g,dataType:"html",success:function(f){var d=$(f);d.appendTo(e.parent());d.find(".popup-close").click(function(){d.fadeOutAndRemove()});d.center().fadeIn("fast")},error:function(){e.parent().showErrorMessage("Unable to load popup - please try again")},
complete:function(){StackExchange.helpers.removeSpinner();f(!0,e)}})};return{init:function(e){m=!!e.hasOpenBounty;e.canOpenBounty&&f(!0);e.hasOpenBounty&&k()}}}();